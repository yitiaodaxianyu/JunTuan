{"version":3,"sources":["assets\\Scripts\\Equipment\\Ui\\EquipDataItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameManager from \"../../GameManager\";\r\nimport { HeroManager } from \"../../Hero/Data/HeroManager\";\r\nimport { Hero_Type } from \"../../Hero/Game/HeroConfig\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\nimport { ItemManager } from \"../../Prop/Data/Item\";\r\nimport { PropAction } from \"../../Prop/PropConfig\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport { UIManager } from \"../../UI/UIManager\";\r\nimport { EquipmentAttributeManager } from \"../Data/EquipmentAttribute\";\r\nimport { EquipInfo } from \"../EquipConfig\";\r\nimport {  EquipmentManager } from \"../EquipmentManager\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class EquipDataItem extends cc.Component {\r\n\r\n\r\n    ui_equip_info:EquipInfo=null;\r\n    self_equip_info:EquipInfo=null;\r\n    ui_hero_type:Hero_Type=Hero_Type.NULL;\r\n    self_hero_type:Hero_Type=Hero_Type.NULL;\r\n    click_callback:Function=null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    Common_Btn:cc.SpriteFrame[]=[]\r\n\r\n    init(equipInfo:EquipInfo,uiEquipId:EquipInfo,heroType:Hero_Type,clickCallback:Function,selfHero:Hero_Type=Hero_Type.NULL){\r\n        this.self_equip_info=equipInfo;\r\n        this.ui_equip_info=uiEquipId;\r\n        this.ui_hero_type=heroType;\r\n        this.self_hero_type=selfHero;\r\n        this.click_callback=clickCallback;\r\n        this.initData();\r\n        this.refreshData();\r\n    }\r\n\r\n    initData(){\r\n        //管理器\r\n        let LM=LanguageManager.getInstance();\r\n        let PM=PropManager.getInstance();\r\n        //图标\r\n        let item=EquipmentManager.getInstance().getEquipNodeByInfo(this.self_equip_info,PropAction.Null,this.self_hero_type);\r\n        item.scale=0.8\r\n        this.node.getChildByName('equipRoot').addChild(item);\r\n        //名称\r\n        let jsonItem=ItemManager.getInstance().getJsonItem(this.self_equip_info.equip_id);\r\n        let propName=this.node.getChildByName('propName');\r\n        propName.getComponent(cc.Label).string=\"[\"+PM.getPropQualityName(jsonItem.Quality)+\"]\"+LM.getStrByTextId(jsonItem.NameTextId);\r\n        propName.color=PM.getPropQualityTextColor(jsonItem.Quality);\r\n        let Outlinecolor=[new cc.Color(39, 35, 28),new cc.Color(29, 63, 27),new cc.Color(25, 55, 88),new cc.Color(66, 37, 96),new cc.Color(62, 32, 0),new cc.Color(79, 16, 15)]\r\n        // console.log(\"______\",jsonItem.Quality)\r\n        propName.getComponent(cc.LabelOutline).color=Outlinecolor[(jsonItem.Quality)]\r\n        //战力数\r\n        this.node.getChildByName('zhanliNum').getComponent(cc.Label).string=EquipmentManager.getInstance().getEquipZhanLi(this.self_equip_info.equip_id)+\"\"//EquipmentManager.getInstance().getEquipZhanLi(this.self_equip_info)+'';\r\n    }\r\n\r\n    refreshData(){\r\n        //装备的英雄\r\n        let heroType=this.self_hero_type;\r\n        let isWear=heroType!=Hero_Type.NULL;\r\n        if(heroType!=Hero_Type.NULL){\r\n            let heroIcon=this.node.getChildByName('heroIcon').getComponent(cc.Sprite);\r\n            heroIcon.spriteFrame=PropManager.getInstance().getHeroIconb(heroType);\r\n        }\r\n        this.node.getChildByName('exBg').active=isWear;\r\n        this.node.getChildByName('heroIcon').active=isWear;\r\n        this.node.getChildByName('Equipped_Icon').active=isWear;\r\n        this.node.getChildByName('btnExchange').active=isWear;\r\n        let btnEquip=this.node.getChildByName('btnEquip')\r\n        btnEquip.active=!isWear;\r\n\r\n        // if(this.ui_equip_info.equip_id!=0){\r\n        //     btnEquip.getChildByName(\"titleLabel\").getComponent(cc.LabelOutline).color=new cc.Color(12,56,86)//.toHEX(\"#0C3856\")\r\n        //     btnEquip.getComponent(cc.Sprite).spriteFrame=this.Common_Btn[0]\r\n        // }else{\r\n        //     btnEquip.getChildByName(\"titleLabel\").getComponent(cc.LabelOutline).color=new cc.Color(105,56,20)//.toHEX(\"#693814\")\r\n        //     btnEquip.getComponent(cc.Sprite).spriteFrame=this.Common_Btn[1]\r\n        // }\r\n    }\r\n\r\n    onClickBtnExchange(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        let oldCombat = HeroManager.getInstance().getHeroZhanli(this.ui_hero_type);\r\n        let oldData = HeroManager.getInstance().getDeepHeroData(this.ui_hero_type);\r\n        HeroManager.getInstance().addWearEquipment(this.ui_hero_type,this.self_equip_info.equip_id);\r\n        HeroManager.getInstance().addWearEquipment(this.self_hero_type,this.ui_equip_info.equip_id,EquipmentAttributeManager.getInstance().getEquipmentPosition(this.self_equip_info.equip_id));\r\n        let newCombat = HeroManager.getInstance().getHeroZhanli(this.ui_hero_type);\r\n        let newData = HeroManager.getInstance().getDeepHeroData(this.ui_hero_type);\r\n        if(oldCombat != newCombat){\r\n            UIManager.getInstance().showCombatChangeEffect(oldCombat,newCombat,oldData,newData);\r\n        }\r\n        if(this.click_callback){\r\n            this.click_callback(this.self_equip_info.equip_id);\r\n        }\r\n    }\r\n\r\n    onClickBtnEquip(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        \r\n        let oldCombat = HeroManager.getInstance().getHeroZhanli(this.ui_hero_type);\r\n        let oldData = HeroManager.getInstance().getDeepHeroData(this.ui_hero_type);\r\n        HeroManager.getInstance().addWearEquipment(this.ui_hero_type,this.self_equip_info.equip_id);\r\n        let newCombat = HeroManager.getInstance().getHeroZhanli(this.ui_hero_type);\r\n        let newData = HeroManager.getInstance().getDeepHeroData(this.ui_hero_type);\r\n        if(oldCombat != newCombat){\r\n            UIManager.getInstance().showCombatChangeEffect(oldCombat,newCombat,oldData,newData);\r\n        }\r\n        if(this.click_callback){\r\n            this.click_callback(this.self_equip_info.equip_id);\r\n        }\r\n    }\r\n\r\n}\r\n"]}