{"version":3,"sources":["assets\\Scripts\\Monster\\Data\\MonsterDataManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssetsEventType, EventManager } from \"../../Tools/EventManager\";\r\nimport { Enemy_Type } from \"../../Enemy/EnemyConfig\";\r\nimport { MonsterAttributeManager } from \"./MonsterAttribute\";\r\nimport { MonsterFeatureManager } from \"./MonsterFeature\";\r\nimport { MonsterManualManager } from \"./MonsterManual\";\r\nimport { MonsterConfigureManager } from \"./MonsterConfigure\";\r\nimport { MonsterGrowthAttributesManager } from \"./MonsterGrowthAttributes\";\r\nimport { MonsterGroupConfigureManager } from \"./MonsterGroupConfigure\";\r\nimport { MonsterSkillManager } from \"./MonsterSkill\";\r\n\r\n\r\nexport class MonsterDataManager {\r\n\r\n    private static _instance: MonsterDataManager = null;\r\n    //资源\r\n\r\n    //怪物数据\r\n    //消灭的敌人数量统计\r\n    private kill_enemys:number[]=[];\r\n\r\n    public static getInstance():MonsterDataManager {\r\n        if(this._instance==null) {\r\n            this._instance=new MonsterDataManager();\r\n            this._instance.init();\r\n        }\r\n        return this._instance;\r\n    }\r\n    //初始化游戏数据\r\n    private init () {\r\n        MonsterAttributeManager.getInstance();\r\n        MonsterFeatureManager.getInstance();\r\n        MonsterManualManager.getInstance();\r\n        MonsterConfigureManager.getInstance();\r\n        MonsterGrowthAttributesManager.getInstance();\r\n        MonsterGroupConfigureManager.getInstance()\r\n        MonsterSkillManager.getInstance();\r\n        //this.loadAllKillEnemy();\r\n    }\r\n    \r\n\r\n    //********************************************敌人的*************************************************\r\n    private loadAllKillEnemy()\r\n    {\r\n        this.kill_enemys=new Array<number>();\r\n        for(let i=0; i<Enemy_Type.enemy_num; i++)\r\n        {\r\n            let num=cc.sys.localStorage.getItem('kill_enemy_'+i);\r\n            if(num===\"\" || num===null)\r\n            {\r\n                num=0;\r\n                this.saveKillEnemy(i,num);\r\n            }else\r\n            {\r\n                num=parseInt(num);\r\n                // if(IsDebug)\r\n                // num=99999;\r\n                this.kill_enemys[i]=num;\r\n            }\r\n        }\r\n    }\r\n\r\n    getKillEnemy(type:Enemy_Type):number\r\n    {\r\n        return this.kill_enemys[type];\r\n    }\r\n\r\n    addKillEnemy(type:Enemy_Type,addNum:number)\r\n    {\r\n        this.kill_enemys[type]+=addNum;\r\n    }\r\n\r\n    saveKillEnemy(type:Enemy_Type,num:number)\r\n    {\r\n        this.kill_enemys[type]=num;\r\n        cc.sys.localStorage.setItem('kill_enemy_'+type,num);\r\n    }\r\n\r\n    saveAllKillEnemy()\r\n    {\r\n        for(let i=0; i<Enemy_Type.enemy_num; i++)\r\n        {\r\n            cc.sys.localStorage.setItem('kill_enemy_'+i,this.kill_enemys[i]);\r\n        }\r\n        //EventManager.postAssetsEvent(AssetsEventType.KILL_ENEMY);\r\n    }\r\n\r\n    //获取击杀奖励阶段\r\n    getKillRewardLevel(type:Enemy_Type):number\r\n    {\r\n        let num=cc.sys.localStorage.getItem('kill_reward_level_'+type);\r\n        if(num===\"\" || num===null)\r\n        {\r\n            num=0;\r\n        }else\r\n        {\r\n            num=parseInt(num);\r\n        }\r\n        return num;\r\n    }\r\n\r\n    saveKillRewardLevel(type:Enemy_Type,num:number)\r\n    {\r\n        // let enemyData=EnemyJsonData[type];\r\n        // let killNums=enemyData.kill_num.split('|');\r\n        // let maxLevel=killNums.length;\r\n        // if(num<=maxLevel)\r\n        \r\n        cc.sys.localStorage.setItem('kill_reward_level_'+type,num);\r\n    }\r\n\r\n    getIsCanGetKillReward(enemyType:Enemy_Type):boolean\r\n    {\r\n        let jieduan=this.getKillRewardLevel(enemyType);\r\n        let id=this.getMonsterIdByType(enemyType);\r\n        let killNums=MonsterManualManager.getInstance().getKillNumber(id);\r\n        if(jieduan>killNums.length)\r\n        {\r\n            return false;\r\n        }else\r\n        {\r\n            if(jieduan==killNums.length)\r\n            {\r\n                jieduan=killNums.length-1;\r\n            }\r\n            let needNum=killNums[jieduan];\r\n            let killNum=this.kill_enemys[enemyType];\r\n            if(killNum>=needNum)\r\n            {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getIsUnlockEnemy(enemyType:Enemy_Type):boolean\r\n    {\r\n        return this.kill_enemys[enemyType]>0?true:false;\r\n    }\r\n\r\n\r\n    \r\n    /**根据怪物类型获取怪物ID */\r\n    public getMonsterIdByType(type:Enemy_Type): number {\r\n        return 50000+(type)*10;\r\n    }\r\n    /**根据怪物类型和击杀阶段获取钻石奖励的数量 */\r\n    public getDiamondRewardByLevel(type:Enemy_Type,level:number){\r\n        let id=this.getMonsterIdByType(type);\r\n        let diamondNums=MonsterManualManager.getInstance().getDiamondReward(id);\r\n        if(level>=diamondNums.length)\r\n        {\r\n            level=diamondNums.length-1;\r\n        }\r\n        return diamondNums[level];\r\n    }\r\n}\r\n"]}