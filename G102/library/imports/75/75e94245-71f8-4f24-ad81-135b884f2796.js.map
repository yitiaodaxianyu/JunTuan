{"version":3,"sources":["assets\\Scripts\\UI\\home\\BagUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport ApkManager from \"../../Ads/ApkManager\";\r\nimport { EquipInfo } from \"../../Equipment/EquipConfig\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { Follow_Type } from \"../../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../../multiLanguage/FollowManager\";\r\nimport { ItemManager } from \"../../Prop/Data/Item\";\r\nimport Prop from \"../../Prop/Prop\";\r\nimport { PropAction, PropData } from \"../../Prop/PropConfig\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport UIComponent from \"../UIComponent\";\r\nimport { UiAction } from \"../UiInterface\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n\r\nenum State{\r\n    All = 1,\r\n    Prop,\r\n    Equipment,       \r\n}\r\n\r\n@ccclass\r\nexport default class BagUi extends UIComponent {\r\n    // 特殊物品列表\r\n    private especial_list:PropData[] = new Array();\r\n    // 宝箱列表\r\n    private treasure_chest_list:PropData[] = new Array();\r\n    // 资源道具列表\r\n    private assets_list:PropData[] = new Array();\r\n    // 玩法货币列表\r\n    private play_money_list:PropData[] = new Array();\r\n    // 消耗品列表\r\n    private consumables_list:PropData[] = new Array();\r\n\r\n    private equipment_list:EquipInfo[] = null;\r\n\r\n    private prop_list:PropData[] = null;\r\n\r\n    private scoll_content:cc.Node = null;\r\n\r\n    private null_item:cc.Node = null;\r\n\r\n\r\n    init(uiAc: UiAction) {\r\n        super.init(uiAc);\r\n        FollowManager.getInstance().followEvent(Follow_Type.打开背包次数);\r\n        this.initSelectButton(State.All,true);\r\n        this.initScroll(State.All);\r\n    }\r\n\r\n    initSelectButton(type:State,isInit:boolean){\r\n        for(let i = 1;i < 4;i++){\r\n            let btn = this.node.getChildByName(\"buttonBg\"+i);\r\n            let selectBtn = this.node.getChildByName(\"selectedButtonBg\" + i);\r\n            let btnLabel = this.node.getChildByName(\"btnLabel\" + i)\r\n            let selectBtnLabel = this.node.getChildByName(\"selectBtnLabel\" + i);\r\n\r\n            if(i == type){\r\n                btn.active = false;\r\n                btnLabel.active = false;\r\n                selectBtn.active = true;\r\n                selectBtnLabel.active = true;\r\n            }else{\r\n                btn.active = true;\r\n                btnLabel.active = true;\r\n                selectBtn.active = false;\r\n                selectBtnLabel.active = false;\r\n            }\r\n            if(isInit){\r\n                btn.on(cc.Node.EventType.TOUCH_END,() =>{\r\n                    this.initSelectButton(i,false);\r\n                    this.scoll_content.removeAllChildren();\r\n                    this.initScroll(i);\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    initScroll(type:State){\r\n        this.especial_list = new Array();\r\n        this.treasure_chest_list = new Array();\r\n        this.assets_list = new Array();\r\n        this.play_money_list = new Array();\r\n        this.consumables_list = new Array();\r\n        this.prop_list = new Array();\r\n\r\n        let numLabel:cc.Node;\r\n        this.scoll_content = this.node.getChildByName(\"scroll\").getComponent(cc.ScrollView).content\r\n        this.null_item = this.node.getChildByName(\"nullItem\")\r\n        numLabel = this.node.getChildByName(\"capacityNum\")\r\n        this.equipment_list = new Array();\r\n\r\n        if (type != State.Prop) {\r\n            let equipmentList1 = PropManager.getInstance().getEquipmentList(1);\r\n            let equipmentList2 = PropManager.getInstance().getEquipmentList(2);\r\n            let equipmentList3 = PropManager.getInstance().getEquipmentList(3);\r\n            this.equipment_list = this.equipment_list.concat(equipmentList1, equipmentList2, equipmentList3);\r\n            //EquipmentManager.getInstance().sortEquipmentList(this.equipment_list);\r\n        }\r\n\r\n        if (type != State.Equipment) {\r\n            let propList = PropManager.getInstance().getSortPropList();\r\n            for (let i = 0; i < propList.length; i++) {\r\n                let type = ItemManager.getInstance().getType(propList[i].prop_id)\r\n                switch (type) {\r\n                    case 4:\r\n                        // 消耗品\r\n                        this.consumables_list.push(propList[i]);\r\n                        break;\r\n                    case 5:\r\n                        // 资源道具\r\n                        this.assets_list.push(propList[i]);\r\n                        break;\r\n                    case 6:\r\n                        // 玩法货币\r\n                        this.play_money_list.push(propList[i]);\r\n                        break;\r\n                    case 8:\r\n                        // 宝箱\r\n                        this.treasure_chest_list.push(propList[i]);\r\n                        break;\r\n                    case 9:\r\n                        // 特殊物品\r\n                        this.especial_list.push(propList[i]);\r\n                        break;\r\n                }\r\n            }\r\n            this.prop_list = this.prop_list.concat(this.especial_list, this.treasure_chest_list, this.assets_list, this.play_money_list, this.consumables_list);\r\n            if(numLabel.getComponent(cc.Label).string == \"\"){\r\n                numLabel.getComponent(cc.Label).string = \"\" + (this.prop_list.length + this.equipment_list.length) + \"/200\";\r\n            }\r\n        }\r\n        // this.framingLoad(200);\r\n        let index = 0;\r\n        this.unscheduleAllCallbacks();\r\n        this.scoll_content.removeAllChildren();\r\n        this.schedule(()=>{\r\n            if(index<(this.prop_list.length+this.equipment_list.length)){\r\n                // 显示道具\r\n                if(index<this.prop_list.length){\r\n                    // 优先显示道具\r\n                    let item;\r\n                    if(ItemManager.getInstance().getType(this.prop_list[index].prop_id) == 5){\r\n                        item = PropManager.getInstance().createPropItem(this.prop_list[index].prop_id,this.prop_list[index].prop_num,PropAction.Use);\r\n                        item.getComponent(Prop).addUseListen(() =>{\r\n                            numLabel.getComponent(cc.Label).string = \"\";\r\n                            this.initScroll(type);\r\n                        })\r\n                    }else{\r\n                        // console.log(this.prop_list[index].prop_id)\r\n                        item = PropManager.getInstance().createPropItem(this.prop_list[index].prop_id,this.prop_list[index].prop_num,PropAction.Look);\r\n                        item.getComponent(Prop).addUseListen(() =>{\r\n                            numLabel.getComponent(cc.Label).string = \"\";\r\n                            this.initScroll(type);\r\n                        })\r\n                    }\r\n                    item.setParent(this.scoll_content);\r\n                }else{\r\n                    // 再显示装备\r\n                    // let equipment = PropManager.getInstance().createPropItem(this.equipment_list[i-this.prop_list.length].equip_id,1,PropAction.Look);\r\n                    // let equipment = EquipmentManager.getInstance().getEquipNodeById(this.equipment_list[index-this.prop_list.length].equip_id);\r\n                    // equipment.getComponent(EquipItem).addUseListen(() =>{\r\n                    //     this.initScroll(type);\r\n                    // })\r\n                    // equipment.setParent(this.scoll_content);\r\n                }\r\n            }else{\r\n                // 显示白板\r\n                let item = cc.instantiate(this.null_item);\r\n                item.active = true;\r\n                item.setParent(this.scoll_content);\r\n            }\r\n            index++;\r\n        },0.01,200,0);\r\n    }\r\n\r\n    /**\r\n     * （新增代码）获取生成子节点的Generator\r\n     */\r\n    private *getItemGenerator(length: number) {\r\n        for (let i = 0; i < length; i++) {\r\n            // 初始化道具\r\n            yield this.initItem(i);\r\n        }\r\n    }\r\n\r\n    private initItem(i:number) {\r\n        if(i<(this.prop_list.length+this.equipment_list.length)){\r\n            // 显示道具\r\n            if(i<this.prop_list.length){\r\n                // 优先显示道具\r\n                let item;\r\n                if(ItemManager.getInstance().getType(this.prop_list[i].prop_id) == 5){\r\n                    item = PropManager.getInstance().createPropItem(this.prop_list[i].prop_id,this.prop_list[i].prop_num,PropAction.Use);\r\n                }else{\r\n                    item = PropManager.getInstance().createPropItem(this.prop_list[i].prop_id,this.prop_list[i].prop_num,PropAction.Look);\r\n                }\r\n                item.setParent(this.scoll_content);\r\n            }else{\r\n                // 再显示装备\r\n                // let equipment = PropManager.getInstance().createPropItem(this.equipment_list[i-this.prop_list.length].equip_id,1,PropAction.Look);\r\n                // let equipment = EquipmentManager.getInstance().getEquipNodeById(this.equipment_list[i-this.prop_list.length].equip_id);\r\n                // equipment.setParent(this.scoll_content);\r\n            }\r\n        }else{\r\n            // 显示白板\r\n            let item = cc.instantiate(this.null_item);\r\n            item.active = true;\r\n            item.setParent(this.scoll_content);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 实现分帧加载\r\n     */\r\n    async framingLoad(length: number) {\r\n        await this.executePreFrame(this.getItemGenerator(length), 1);\r\n    }\r\n\r\n    /**\r\n     * 分帧执行 Generator 逻辑\r\n     * @param generator 生成器\r\n     * @param duration 持续时间（ms）\r\n     * 每次执行 Generator 的操作时，最长可持续执行时长。\r\n     * 假设值为8ms，那么表示1帧（总共16ms）下，分出8ms时间给此逻辑执行\r\n     */\r\n    private executePreFrame(generator: Generator, duration: number) {\r\n        return new Promise<void>((resolve, reject) => {\r\n            let gen = generator;\r\n            // 创建执行函数\r\n            let execute = () => {\r\n\r\n                // 执行之前，先记录开始时间戳\r\n                let startTime = new Date().getTime();\r\n\r\n                // 然后一直从 Generator 中获取已经拆分好的代码段出来执行\r\n                for (let iter = gen.next(); ; iter = gen.next()) {\r\n\r\n                    // 判断是否已经执行完所有 Generator 的小代码段\r\n                    // 如果是的话，那么就表示任务完成\r\n                    if (iter == null || iter.done) {\r\n                        resolve();\r\n                        return;\r\n                    }\r\n\r\n                    // 每执行完一段小代码段，都检查一下是否\r\n                    // 已经超过我们分配给本帧，这些小代码端的最大可执行时间\r\n                    if (new Date().getTime() - startTime > duration) {\r\n                        \r\n                        // 如果超过了，那么本帧就不在执行，开定时器，让下一帧再执行\r\n                        this.scheduleOnce(() => {\r\n                            execute();\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n            };\r\n\r\n            // 运行执行函数\r\n            execute();\r\n        });\r\n    }\r\n\r\n    clickBtnClose()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.destroySelf();\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n        // EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_SignIn);\r\n    }\r\n}\r\n"]}