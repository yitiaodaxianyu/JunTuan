{"version":3,"sources":["assets\\Scripts\\Tower\\TowerUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GameScene } from \"../Constants\";\r\nimport GameManager from \"../GameManager\";\r\nimport { Follow_Type } from \"../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../multiLanguage/FollowManager\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport MyTool from \"../Tools/MyTool\";\r\nimport BtnTower from \"./BtnTower\";\r\nimport { TowerLevelManager } from \"./TowerLevel\";\r\nimport TowerManager from \"./TowerManager\";\r\nimport FixedPos from \"../UI/home/FixedPos\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport UIComponent from \"../UI/UIComponent\";\r\nimport ToPlayMainUi from \"../UI/home/ToPlayMainUi\";\r\nimport { UIPath, UILayerLevel } from \"../UI/UIConfig\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TowerUi extends UIComponent {\r\n\r\n    @property(cc.Prefab)\r\n    item_btn_tower:cc.Prefab=null;\r\n\r\n    // @property(cc.Prefab)\r\n    // prefab_help:cc.Prefab=null;\r\n\r\n    @property([cc.SpriteFrame])\r\n    sp_btn:cc.SpriteFrame[]=[];\r\n\r\n    @property([cc.SpriteFrame])\r\n    sp_wupin:cc.SpriteFrame[]=[];//0=金币,1=英雄经验，2=玩家经验和钻石\r\n\r\n    @property([cc.SpriteFrame])\r\n    sp_kuang:cc.SpriteFrame[]=[];//0=金币,1=英雄经验，2=装备和经验\r\n\r\n    @property(cc.Prefab)\r\n    prefab_num:cc.Prefab=null;\r\n\r\n    @property(cc.Node)\r\n    content:cc.Node=null;\r\n\r\n    @property(cc.Node)\r\n    cloud_root:cc.Node=null;\r\n\r\n    @property(cc.Material)\r\n    gray_spine:cc.Material=null;\r\n\r\n    cur_load_level:number=1;\r\n\r\n    start_load_level:number=1;\r\n    end_load_level:number=1;\r\n    max_load_num:number=8;\r\n\r\n    sword:cc.Node=null;\r\n    btn_tower:cc.Node=null;\r\n\r\n    win_width:number=cc.winSize.width/2;\r\n\r\n    onLoad(): void {\r\n        let level=TowerManager.getTowerLevel()-2;\r\n        if(level<1){\r\n            level=1;\r\n        }\r\n        this.start_load_level=this.cur_load_level=level;\r\n        this.end_load_level=this.start_load_level+5;\r\n        let maxLevel=TowerLevelManager.getMaxFloor();\r\n        if(this.end_load_level>maxLevel){\r\n            this.end_load_level=maxLevel;\r\n            this.start_load_level=this.cur_load_level=this.end_load_level-6;\r\n        }        \r\n        this.loadTower();\r\n        this.adaptation();        \r\n    }\r\n\r\n    private adaptation()\r\n    {\r\n        let wp=cc.winSize;\r\n        let bottom=this.node.getChildByName('bottom');\r\n        let top = this.node.getChildByName(\"Tower_Bg_3\");\r\n        bottom.y=-wp.height/2;\r\n        bottom.zIndex=1;\r\n        top.y = wp.height/2 - 50;\r\n        // UIManager.getInstance().addTeamSelectUi(this.node,cc.v2(0,0),this.node.getChildByName('bottom').y,false);\r\n    }\r\n\r\n    protected start(): void {\r\n        //this.showEnemyInfo();\r\n        // this.showRewardList();\r\n        // let infoRoot=this.node.getChildByName('infoRoot');\r\n        // infoRoot.active=false;\r\n        // infoRoot.y;\r\n        let bgLoading=UIManager.getInstance().getLoadingNode();\r\n        if(bgLoading){\r\n            let loadingBar=bgLoading.getChildByName('ProgressBar').getComponent(cc.ProgressBar);\r\n            loadingBar.progress=0.9;\r\n        }\r\n        \r\n    }\r\n\r\n    loadTower(){\r\n        this.sword=this.node.getChildByName('sword');\r\n        let level=TowerManager.getTowerLevel();\r\n        for(let i=this.start_load_level; i<=this.end_load_level; i++,this.cur_load_level++){\r\n            let btnTower=cc.instantiate(this.item_btn_tower);\r\n            btnTower.name=\"btnTower\"+this.cur_load_level;\r\n            btnTower.getComponent(BtnTower).init(this.cur_load_level);\r\n            this.content.addChild(btnTower);\r\n            if(i == level){\r\n                this.sword.parent = btnTower;\r\n                this.sword.y = 160;\r\n                let arrow = new cc.Node();\r\n                arrow.addComponent(cc.Sprite).spriteFrame = TowerManager.getInstance().getSpByName(\"Tower_Arrow\");\r\n                arrow.setPosition(cc.v2(0,120));\r\n                arrow.parent = btnTower;\r\n                cc.tween(arrow).to(0.4,{position:cc.v3(0,125,0)}).to(0.4,{position:cc.v3(0,115,0)}).union().repeatForever().start();\r\n            }\r\n        }\r\n        this.scheduleOnce(()=>{\r\n            this.content.getComponent(cc.Layout).enabled = false;\r\n            for(let i=this.start_load_level; i<=this.end_load_level; i++){\r\n                let btnTower=this.content.getChildByName(\"btnTower\"+i);\r\n                btnTower.zIndex = this.end_load_level - i;\r\n    \r\n            }\r\n        },0.01);\r\n        this.node.opacity=0;\r\n        this.scheduleOnce(()=>{\r\n            this.node.opacity=255;\r\n            if(level<=TowerLevelManager.getMaxFloor()){\r\n                this.btn_tower=this.content.getChildByName('btnTower'+level);\r\n                let disY=0;\r\n                let delayT=0;\r\n                if(TowerManager.is_show_tower){\r\n                    if(level>1){\r\n                        let prevBtn=this.content.getChildByName('btnTower'+(level-1));\r\n                        let fightY=prevBtn.y; \r\n                        disY=-fightY;\r\n                        disY=this.getDisY(disY);\r\n                        //1.播放一下剑的特效\r\n                        \r\n                        // this.sword.y=fightY+disY-64;\r\n                        // let swordSK=this.sword.getComponent(sp.Skeleton);\r\n                        //let tt=swordSK.setAnimation(0,\"\",false);\r\n                        // prevBtn.getComponent(BtnTower).showUnlonkProcess0();\r\n                        delayT=1.9;\r\n                        let tt=new Date().getTime();\r\n                        // swordSK.setCompleteListener(()=>{\r\n                        //     // prevBtn.getComponent(BtnTower).showUnlonkProcess1();\r\n                        //     swordSK.setCompleteListener(null);\r\n                        //     this.sword.active=false;\r\n                        //     cc.log(new Date().getTime()-tt);\r\n                        // })\r\n                    }else{\r\n                        disY=this.getDisY(-this.btn_tower.y);;\r\n                    }                                        \r\n                }else{\r\n                    disY=this.getDisY(-this.btn_tower.y);\r\n                } \r\n                let disYY=0;\r\n                let fightY=this.btn_tower.y;\r\n                disYY=-fightY;\r\n                disYY=this.getDisY(disYY);\r\n                this.content.y=disY;\r\n                // cc.tween(this.content).delay(delayT).to(0.5,{y:disYY}).call(()=>{\r\n                //     TowerManager.is_show_tower=false;\r\n                //     this.sword.active=true;\r\n                //     this.sword.y=this.btn_tower.y+this.content.y-64\r\n                // }).start();\r\n                //设置战斗剑\r\n                // let swordY=fightY+this.content.y-64;                                \r\n                //设置云\r\n                // let jiange=200;\r\n                // let hh=cc.winSize.height/2-109;\r\n                // let cloudNum=Math.round((hh-swordY)/jiange);\r\n                // for(let i=1; i<=cloudNum; i++){\r\n                //     for(let n=0; n<4; n++){\r\n                //         let cloud=new cc.Node();\r\n                //         let cloudSpName=i%2?\"Tower_Cloud_0\":\"Tower_Cloud_1\";\r\n                //         cloud.addComponent(cc.Sprite).spriteFrame=TowerManager.getInstance().getSpByName(cloudSpName);\r\n                //         cloud.y=swordY+jiange*i+Math.random()*jiange/5;\r\n                //         cloud.x=-this.win_width/2+cloud.width/2*n+Math.random()*jiange/5;\r\n                //         this.cloud_root.addChild(cloud);\r\n                //     }\r\n                    \r\n                // }\r\n            }else{\r\n                let hhh=(this.content.height-cc.winSize.height/2);\r\n                this.content.y=-hhh;\r\n            }\r\n\r\n        },cc.director.getDeltaTime());   \r\n        //设置按钮\r\n        let bottom=this.node.getChildByName('bottom')\r\n        let btnStart=bottom.getChildByName('btnStart').getComponent(cc.Button);\r\n        let isCan=level<=TowerLevelManager.getMaxFloor();\r\n        let material=isCan?cc.Material.getBuiltinMaterial('2d-sprite'):this.gray_spine;\r\n        btnStart.getComponent(cc.Sprite).setMaterial(0,material)\r\n        btnStart.interactable=isCan;\r\n\r\n        // let btnTeam=bottom.getChildByName('btnTeam').getComponent(cc.Button);\r\n        // btnTeam.interactable=isCan;\r\n        // let text=bottom.getChildByName('text')\r\n        // text.color=isCan?cc.color(33,84,37):cc.Color.WHITE;\r\n    }\r\n\r\n    getDisY(y:number):number{\r\n        let disY=y;\r\n        let hh=cc.winSize.height/2-109;\r\n        if(disY>-hh){\r\n            disY=-hh;\r\n        }\r\n        let hhh=(this.content.height-cc.winSize.height/2);\r\n        if(disY<-hhh){\r\n            disY=-hhh;\r\n        }\r\n        return disY;\r\n    }\r\n\r\n    // showEnemyInfo(){\r\n    //     let level=TowerManager.getTowerLevel();\r\n    //     if(level>TowerLevelManager.getMaxFloor()){\r\n    //         return;\r\n    //     }\r\n    //     //显示怪物信息\r\n    //     let levelDatas=TowerLevelManager.getInstance().getFightingInfo(level);\r\n    //     let waveNum=levelDatas.length;\r\n    //     let enemyTypes:any[]=new Array();\r\n    //     let mam=MonsterAttributeManager.getInstance();\r\n    //     //筛查怪物种类\r\n    //     for(let w=0; w<waveNum; w++)\r\n    //     {\r\n    //         let levelData=levelDatas[w];\r\n    //         let monsterNum=levelData.monster_num;\r\n    //         for(let i=0; i<monsterNum.length; i++)\r\n    //         {\r\n    //             let mId=levelData.monster_id[i];\r\n    //             if(mId!=50000){\r\n    //                 let enemyType=mam.getEnemyType(mId);\r\n    //                 //查找出拥有一样类型的下标\r\n    //                 let eIndex=-1;\r\n    //                 for(let n=0;n<enemyTypes.length;n++)\r\n    //                 {\r\n    //                     let eData=enemyTypes[n];\r\n    //                     if(eData.type==enemyType)\r\n    //                     {\r\n    //                         eIndex=n;\r\n    //                         break;\r\n    //                     }\r\n    //                 }                                      \r\n    //                 if(eIndex==-1)\r\n    //                 {\r\n    //                     let isBoss=levelData.is_boss[i];\r\n    //                     enemyTypes.push({type:enemyType,isBoss:isBoss});                        \r\n    //                     //boss.push(isBoss);\r\n    //                 }else\r\n    //                 {\r\n    //                     //找到对应的位置，设置为BOSS\r\n    //                     if(!enemyTypes[eIndex].isBoss)\r\n    //                     {\r\n    //                         let isBoss=levelData.is_boss[i];\r\n    //                         if(isBoss)\r\n    //                         {\r\n    //                             enemyTypes[eIndex].isBoss=true;\r\n    //                         }\r\n    //                     }\r\n    //                 }   \r\n    //             }\r\n                                            \r\n    //         }\r\n    //     }\r\n    //     //排序，boss在最前\r\n    //     enemyTypes.sort((a:any,b:any)=>{\r\n    //         return b.isBoss-a.isBoss;\r\n    //     });\r\n    //     let infoRoot=this.node.getChildByName('infoRoot');\r\n    //     let enemyContent=infoRoot.getChildByName('enemyScrollView').getComponent(cc.ScrollView).content;\r\n    //     enemyContent.removeAllChildren();\r\n    //     //展示关卡数\r\n    //     let zrLabel=infoRoot.getChildByName('zrLabel');\r\n    //     zrLabel.getComponent(cc.Label).string=LanguageManager.getInstance().getString(LanguageIndex.Enemy_lineup)+\"-\"+level+\"F\";\r\n    //     let jiange=20;\r\n    //     let isJi=enemyTypes.length%2?true:false;\r\n    //     let centerIndex=Math.round(enemyTypes.length/2);\r\n    //     //展示怪物的种类\r\n    //     for(let i=1; i<=enemyTypes.length; i++)\r\n    //     {\r\n    //         let type=enemyTypes[i-1].type;\r\n    //         let isBoss=enemyTypes[i-1].isBoss;\r\n    //         let mapEnemy=cc.instantiate(EnemyIconManager.getInstance().prefab_icon);\r\n    //         mapEnemy.getComponent(EnemyIcon).init(type,isBoss)\r\n    //         enemyContent.addChild(mapEnemy);\r\n    //         let xx=0;\r\n    //         if(isJi){\r\n    //             //奇数\r\n    //             xx=(i-centerIndex)*(mapEnemy.width+jiange)\r\n    //         }else{\r\n    //             //偶数\r\n    //             xx=(i-centerIndex)*(mapEnemy.width+jiange)-(mapEnemy.width+jiange)/2;\r\n    //         }\r\n    //         mapEnemy.x=xx;\r\n    //     }\r\n    // }\r\n\r\n    //显示挂机奖励的列表\r\n    showRewardList(){\r\n        let level=TowerManager.getTowerLevel();\r\n        if(level>TowerLevelManager.getMaxFloor()){\r\n            return;\r\n        }\r\n        // let infoRoot=this.node.getChildByName('infoRoot');\r\n        // let rewardScrollview=infoRoot.getChildByName('rewardScrollview').getComponent(cc.ScrollView);\r\n        // let content=rewardScrollview.content;\r\n        // content.removeAllChildren();\r\n        // let numRoot=content.parent.getChildByName('num_root');\r\n        // numRoot.removeAllChildren();\r\n        // let equipRoot=content.parent.getChildByName('equip_root');\r\n        // equipRoot.removeAllChildren();\r\n        //添加金币等资源列表\r\n        // let jsonData=TowerRewardManager.getInstance().getJsonTowerReward(level);        \r\n        // let coinNum=jsonData.Coin;\r\n        // let heroExpNum=jsonData.HeroExp;\r\n        // let gemNum=jsonData.Gem;\r\n        // let itemNum=0;\r\n        // let itemId=jsonData.AdItem;\r\n        // if(jsonData.AdItem){\r\n        //     itemNum=jsonData.AdItemNum;\r\n        // }\r\n        //金币框\r\n        // this.createWupin(0,coinNum);\r\n        // this.createWupin(1,heroExpNum);\r\n        // this.createWupin(2,gemNum);\r\n        //添加装备列表\r\n        // for(let i=0;i<itemNum;i++){\r\n        //     //装备框\r\n        //     let kuang=this.createKuang(2);\r\n        //     content.addChild(kuang);\r\n        //     let item=EquipmentManager.getInstance().getEquipNodeById(itemId);\r\n        //     item.addComponent(FixedPos).init(kuang,cc.v2(0,0),content);\r\n        //     equipRoot.addChild(item);            \r\n        // }\r\n\r\n        // let jiange=20;\r\n        // let isJi=content.childrenCount%2?true:false;\r\n        // let centerIndex=Math.round(content.childrenCount/2);        \r\n        // //展示怪物的种类\r\n        // for(let i=1; i<=content.childrenCount; i++)\r\n        // {\r\n        //     let item=content.children[i-1];\r\n        //     let xx=0;\r\n        //     if(isJi){\r\n        //         //奇数\r\n        //         xx=(i-centerIndex)*(item.width+jiange)\r\n        //     }else{\r\n        //         //偶数\r\n        //         xx=(i-centerIndex)*(item.width+jiange)-(item.width+jiange)/2;\r\n        //     }\r\n        //     item.x=xx;\r\n        // }\r\n    }\r\n\r\n    createWupin(kuangIndex:number,num:number):cc.Node{\r\n        let infoRoot=this.node.getChildByName('infoRoot');\r\n        let content=infoRoot.getChildByName('rewardScrollview').getComponent(cc.ScrollView).content;\r\n        let numRoot=content.parent.getChildByName('num_root');\r\n        //框\r\n        let kuang=this.createKuang(kuangIndex);               \r\n        let node=new cc.Node();\r\n        node.addComponent(cc.Sprite).spriteFrame=this.sp_wupin[kuangIndex];\r\n        kuang.addChild(node);\r\n        let numLabel=cc.instantiate(this.prefab_num);\r\n        numLabel.getComponent(cc.Label).string=MyTool.getCoinDanwei(num);\r\n        numLabel.setAnchorPoint(cc.v2(0,0.5));\r\n        numLabel.getComponent(FixedPos).init(kuang,cc.v2(-16,-32.5),content);\r\n        numRoot.addChild(numLabel);        \r\n        content.addChild(kuang);\r\n        switch(kuangIndex){\r\n            case 0:{\r\n                kuang.name=\"coin\"; \r\n                node.name=\"coin\"; \r\n            }break;\r\n        }\r\n        return node;\r\n    }\r\n\r\n    createKuang(kuangIndex:number):cc.Node{\r\n        let kuang=new cc.Node();\r\n        kuang.addComponent(cc.Sprite).spriteFrame=this.sp_kuang[kuangIndex];\r\n        return kuang;\r\n    }\r\n    \r\n\r\n    clickBtnHelp(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        // let help=cc.instantiate(this.prefab_help);\r\n        // this.node.addChild(help);\r\n        UIManager.getInstance().showHelpTipsUi(null,810001,[810002,810003]);\r\n    }\r\n\r\n    clickBtnClose(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        TowerManager.is_show_tower=false;\r\n        super.onClose();\r\n    }\r\n\r\n    clickBtnFormaiton(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        UIManager.getInstance().showUiDialog(UIPath.ToPlay,UILayerLevel.One,{onCompleted:(uiNode)=> {\r\n            uiNode.getComponent(ToPlayMainUi).init(null);\r\n        },})\r\n        // let team=this.node.getChildByName('team_select_ui');\r\n        // if(team){\r\n        //     team.active=!team.active;\r\n        //     let bottom=this.node.getChildByName(\"bottom\");\r\n        //     let text=bottom.getChildByName(\"text\").getComponent(LabelLanguage);\r\n        //     let index=team.active?LanguageIndex.Close:LanguageIndex.Formation;\r\n        //     let btnTeam=bottom.getChildByName(\"btnTeam\").getComponent(cc.Sprite);\r\n        //     btnTeam.spriteFrame=this.sp_btn[team.active?0:1];\r\n        //     text.setLanguageIndex(index);\r\n        //     let infoRoot=this.node.getChildByName('infoRoot');\r\n        //     infoRoot.active=team.active;\r\n        // }\r\n    }\r\n\r\n    startGame(){\r\n        FollowManager.getInstance().followEvent(Follow_Type.爬塔每层挑战次数+TowerManager.getTowerLevel());\r\n        let gm=GameManager.getInstance();\r\n        gm.fighting_info=TowerLevelManager.getInstance().getFightingInfo(TowerManager.getTowerLevel());        \r\n        let bgLoading=UIManager.getInstance().getLoadingNode();\r\n        bgLoading.active=true;\r\n        let loadingBar=bgLoading.getChildByName('ProgressBar').getComponent(cc.ProgressBar);\r\n        let loadLabel=loadingBar.node.getChildByName('loadLabel').getComponent(cc.Label);\r\n        cc.director.preloadScene(GameScene.game,(completedCount: number, totalCount: number, item: any)=>{\r\n            //真实进度\r\n            let progressTrue=completedCount/totalCount;\r\n            //假的进度\r\n            let progressFalse=progressTrue/2;\r\n            loadingBar.progress = progressFalse;\r\n            loadLabel.string=(loadingBar.progress*100).toFixed(0)+'%';\r\n            GameManager.getInstance().cur_load_progress=progressFalse;\r\n            //this.loading_light.x = this.loading_bar.progress*this.loading_bar.totalLength-this.loading_bar.totalLength/2;\r\n        },()=>{\r\n            cc.director.loadScene(GameScene.game);\r\n        });\r\n    }\r\n\r\n    clickBtnStart(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        if(TowerManager.getTodayPassNum()>=20){\r\n            GameManager.getInstance().showMessage('');\r\n            return;\r\n        }\r\n        if(TowerManager.getTowerLevel()<=TowerLevelManager.getMaxFloor()){\r\n            this.startGame();\r\n        }        \r\n    }\r\n\r\n    // protected update(dt: number): void {\r\n    //     for(let i=0; i<this.cloud_root.childrenCount; i++){\r\n    //         let c=this.cloud_root.children[i];\r\n    //         c.x-=dt*(Math.random()*10+40);\r\n    //         if(c.x<-(c.width/2+this.win_width)){\r\n    //             c.x=c.width/2+this.win_width;\r\n    //             let cloudSpName=Math.random()>0.5?\"Tower_Cloud_0\":\"Tower_Cloud_1\";\r\n    //             c.getComponent(cc.Sprite).spriteFrame=TowerManager.getInstance().getSpByName(cloudSpName);\r\n    //         }\r\n    //     }\r\n    //     if(this.btn_tower&&TowerManager.is_show_tower==false){\r\n    //         this.sword.y=this.btn_tower.y+this.content.y-64\r\n    //     }\r\n    // }\r\n\r\n}\r\n"]}