{"version":3,"sources":["assets\\Scripts\\UI\\home\\SignInGetTip.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WXManagerEX, { WXADEnvnt } from \"../../../startscene/WXManagerEX\";\r\nimport ApkManager from \"../../Ads/ApkManager\";\r\nimport { VIDEO_TYPE } from \"../../Constants\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { RewardData } from \"../../JsonData/LevelJsonData\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport UIComponent from \"../UIComponent\";\r\nimport { UILayerLevel } from \"../UIConfig\";\r\nimport { UiAction } from \"../UiInterface\";\r\nimport { UIManager } from \"../UIManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SignInGetTip extends UIComponent {\r\n\r\n    reward_info:RewardData = null;\r\n\r\n    init(uiAc: UiAction): void {\r\n        super.init(uiAc);\r\n        cc.director.on(WXADEnvnt.QIRIQIANDAOSHIPIN, this.onShipinComp, this);\r\n    }\r\n\r\n    initData(rewardInfo:RewardData){\r\n        this.reward_info = rewardInfo;\r\n        let reward = PropManager.getInstance().createPropItem(rewardInfo.reward_id,rewardInfo.reward_num);\r\n        let root = this.node.getChildByName(\"itemRoot\");\r\n        root.removeAllChildren();\r\n        root.addChild(reward);\r\n    }\r\n\r\n    onClickAdBtn(){\r\n        if (cc.sys.platform === cc.sys.BYTEDANCE_GAME) {\r\n\r\n            WXManagerEX.getInstance().qiriQiandaoShipin= tt.createRewardedVideoAd({\r\n                adUnitId: '90312q6nknsj0ao2an'\r\n            });\r\n            WXManagerEX.getInstance().qiriQiandaoShipin.offError();\r\n                    WXManagerEX.getInstance().qiriQiandaoShipin.onError(err => {\r\n                        console.log(err)\r\n                    });\r\n            WXManagerEX.getInstance().qiriQiandaoShipin.offClose();\r\n            WXManagerEX.getInstance().qiriQiandaoShipin.show().catch(() => {\r\n                // 失败重试\r\n                WXManagerEX.getInstance().qiriQiandaoShipin.load()\r\n                    .then(() => WXManagerEX.getInstance().qiriQiandaoShipin.show())\r\n                    .catch(err => {\r\n                        GameManager.getInstance().showMessage(\"广告拉取失败\");\r\n                    })\r\n            })\r\n            WXManagerEX.getInstance().qiriQiandaoShipin.onClose(res => {\r\n                // 用户点击了【关闭广告】按钮\r\n                // 小于 2.1.0 的基础库版本，res 是一个 undefined\r\n                if (res && res.isEnded || res === undefined) {\r\n                  // 正常播放结束，可以下发游戏奖励\r\n                  this.onShipinComp();\r\n                }\r\n                else {\r\n                    // 播放中途退出，不下发游戏奖励\r\n                }\r\n                WXManagerEX.getInstance().qiriQiandaoShipin.destroy();\r\n            })\r\n\r\n        }else{\r\n            this.onShipinComp();\r\n        }\r\n    }\r\n    private onShipinComp(): void {\r\n        UIManager.getInstance().closeAllUiDialog(UILayerLevel.Two);\r\n        PropManager.getInstance().changePropNum(this.reward_info.reward_id,this.reward_info.reward_num);\r\n    }\r\n    onClose(): void {\r\n        super.onClose();\r\n        cc.director.off(WXADEnvnt.QIRIQIANDAOSHIPIN, this.onShipinComp, this);\r\n\r\n    }\r\n\r\n}\r\n"]}