{"version":3,"sources":["assets\\Scripts\\Payment\\PaymentUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport GameManager from \"../GameManager\";\r\nimport { Follow_Type } from \"../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../multiLanguage/FollowManager\";\r\nimport TextLanguage from \"../multiLanguage/TextLanguage\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport { EventManager, RedEventString, RedEventType } from \"../Tools/EventManager\";\r\nimport UIComponent from \"../UI/UIComponent\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PaymentUi extends UIComponent {\r\n\r\n    static _instance:PaymentUi=null;\r\n\r\n    @property([cc.Node])\r\n    all_ui:cc.Node[]=[];\r\n\r\n    cur_selected_index:number=0;\r\n\r\n\r\n    onLoad () {\r\n        PaymentUi._instance=this;\r\n    }\r\n\r\n    protected onDestroy(): void {\r\n        PaymentUi._instance=null;\r\n    }\r\n\r\n    initData(showIndex:number){\r\n        this.cur_selected_index=showIndex;\r\n    }\r\n\r\n    start () {\r\n        this.adaptation();\r\n        this.setBtnShow();\r\n    }\r\n\r\n    private adaptation()\r\n    {\r\n        let wp=cc.winSize;\r\n        let bottom=this.node.getChildByName('bottom');\r\n        bottom.y=-wp.height/2;\r\n        bottom.zIndex=1;\r\n        this.node.getChildByName('top').y=wp.height/2;\r\n        let rate=wp.height/wp.width;\r\n        if(rate<2){\r\n            this.node.getChildByName('premium_card').scale=rate-1;\r\n        }\r\n    }\r\n\r\n    showIndex(index:number){\r\n        this.cur_selected_index=index;\r\n        this.setBtnShow();\r\n    }\r\n\r\n    setBtnShow(){\r\n        let down=this.node.getChildByName('bottom');\r\n        let content=down.getChildByName('btnScrollView').getComponent(cc.ScrollView).content;\r\n        let textId:number|number[]=0;\r\n        for(let i=0; i<6; i++)\r\n        {\r\n            let btn=content.children[i];   \r\n            let btns=btn.getComponents(cc.Button);\r\n            let isCanBtn=this.cur_selected_index!=i;\r\n            this.all_ui[i].active=!isCanBtn;\r\n            if(!isCanBtn){\r\n                textId=btn.getChildByName('nameText').getComponent(TextLanguage).getTextId();\r\n            }\r\n            for(let n=0; n<btns.length; n++){\r\n                btns[n].interactable=isCanBtn;\r\n            }            \r\n        }\r\n        //标题名称\r\n        let top=this.node.getChildByName('top')\r\n        top.getChildByName('titleText').getComponent(TextLanguage).setTextId(textId);        \r\n        if(this.cur_selected_index == 0 || this.cur_selected_index == 5){\r\n            this.node.getChildByName(\"top\").getChildByName(\"btnHelp\").active = true;\r\n        }else{\r\n            this.node.getChildByName(\"top\").getChildByName(\"btnHelp\").active = false;\r\n        }\r\n        //titleText.setTextId()\r\n    }\r\n\r\n    clickBtnBottom(btn,indexStr:string){        \r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        let index=parseInt(indexStr);\r\n        switch(index){\r\n            case 0:\r\n                FollowManager.getInstance().followEvent(Follow_Type.商城_尊享卡页签点击次数);\r\n            break;\r\n            case 1:\r\n                FollowManager.getInstance().followEvent(Follow_Type.商城_龙晶充值页签点击次数);\r\n            break;\r\n            case 2:\r\n                FollowManager.getInstance().followEvent(Follow_Type.商城_热卖礼包签点击次数);\r\n            break;\r\n            case 3:\r\n                FollowManager.getInstance().followEvent(Follow_Type.商城_通关返利签点击次数);\r\n            break;\r\n            case 4:\r\n                FollowManager.getInstance().followEvent(Follow_Type.商城_累计充值页签点击次数);\r\n            break;\r\n            case 5:\r\n                FollowManager.getInstance().followEvent(Follow_Type.商城_战令页签点击次数);\r\n            break;\r\n        }\r\n        if(this.cur_selected_index!=index){\r\n            this.cur_selected_index=index;\r\n            this.setBtnShow();\r\n        }\r\n    }\r\n\r\n    clickBtnHelp(e){\r\n       GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n       if(this.cur_selected_index == 0){\r\n            UIManager.getInstance().showHelpTipsUi(null,100003,[1400201,1400202,1400203]);\r\n        }else if(this.cur_selected_index == 5){\r\n            UIManager.getInstance().showHelpTipsUi(null,100003,[1450004,1450005,1450006]);\r\n        }\r\n    }\r\n\r\n    clickBtnClose(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_Shop);\r\n        super.onClose();\r\n    }\r\n\r\n}\r\n"]}