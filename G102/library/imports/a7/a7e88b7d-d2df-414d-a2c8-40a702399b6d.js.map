{"version":3,"sources":["assets\\Scripts\\Game\\ChapterPop.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport GameManager from \"../GameManager\";\r\nimport MapManager from \"../GuaJi/MapManager\";\r\nimport { OfflineRevenueManager } from \"../JsonData/OfflineRevenue\";\r\nimport { LevelManager } from \"../Level/LevelManager\";\r\nimport { MissionLevelManager } from \"../Level/MissionLevel\";\r\nimport { OfflineRevenueShowManager } from \"../Level/OfflineRevenueShow\";\r\nimport LabelLanguage from \"../multiLanguage/LabelLanguage\";\r\nimport LanguageManager from \"../multiLanguage/LanguageManager\";\r\nimport TextLanguage from \"../multiLanguage/TextLanguage\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport BigMap from \"./BigMap\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    // @property(cc.Label)\r\n    // label: cc.Label = null;\r\n\r\n    // @property\r\n    // text: string = 'hello';\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n    @property(cc.Node)\r\n    txtScrollView: cc.Node = null;\r\n    level:number=0//默认第0关\r\n    @property(cc.Node)\r\n    bt: cc.Node = null;//标题名字\r\n    @property(cc.Node)\r\n    gushi: cc.Node = null;//章节故事\r\n    @property(cc.Node)\r\n    needNum: cc.Node = null;//每小时增加多少金币\r\n    @property(cc.Node)\r\n    content: cc.Node = null;//新增奖励\r\n    @property(cc.Node)\r\n    txt: cc.Node = null;//无新增奖励文本\r\n\r\n    @property(cc.Node)\r\n    btnReplace: cc.Node = null;//蓝色按钮   未抵达100106  变灰    前往100034   变蓝色\r\n\r\n    parent = null;//父节点\r\n\r\n    @property(cc.Node)\r\n    Map_Window_1: cc.Node = null;//背景图\r\n\r\n    \r\n    @property(cc.SpriteAtlas)\r\n    Map_Window: cc.SpriteAtlas = null;//背景图\r\n    \r\n    start () {\r\n\r\n    }\r\n    protected onEnable(): void {\r\n        this.txtScrollView.getComponent(cc.ScrollView).scrollToTop(0)\r\n        this.txtScrollView.getComponent(cc.ScrollView).scrollToBottom(4)\r\n\r\n        this.bt.getComponent(TextLanguage).setReplaceValue('~',(this.level+1) + '');//.setTextId(OfflineRevenueShowManager.getInstance().getTitletext(this.level+1))\r\n        \r\n        this.gushi.getComponent(TextLanguage).setTextId(OfflineRevenueShowManager.getInstance().getChapterIntroduction(this.level+1))\r\n\r\n        this.needNum.getComponent(cc.Label).string=\"+\"+OfflineRevenueShowManager.getInstance().getGetCoins(this.level+1)+\"/h\"\r\n\r\n        let UnlockProps=OfflineRevenueShowManager.getInstance().getUnlockProps(this.level+1)\r\n\r\n        // console.log(\"精灵图：\",this.Map_Window.getSpriteFrame(\"Map_Window_1\"),this.level+1)\r\n        this.Map_Window_1.getComponent(cc.Sprite).spriteFrame=this.Map_Window.getSpriteFrame(\"Map_Window_\"+(this.level+1))\r\n\r\n        if(UnlockProps.length==0){\r\n            this.txt.active=true\r\n        }else{\r\n            this.txt.active=false\r\n            for (let index = 0; index < UnlockProps.length; index++) {\r\n                let item=PropManager.getInstance().createPropItem(UnlockProps[index],0);\r\n                item.scale=0.9;\r\n                item.parent=this.content;\r\n            }\r\n        }\r\n        let myChapter=0\r\n        if(LevelManager.getInstance().finish_level<MissionLevelManager.getMaxLevel()){\r\n            myChapter=MissionLevelManager.getInstance().getChapter(LevelManager.getInstance().finish_level+1)\r\n        }else{\r\n            myChapter=MissionLevelManager.getInstance().getChapter(LevelManager.getInstance().finish_level)\r\n        }\r\n        if((this.level+1)>myChapter){\r\n            // this.Flag.children[this.level].getComponent(cc.Sprite).spriteFrame=this.spriteFrame[1]\r\n            this.btnReplace.getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"));\r\n            this.btnReplace.getChildByName(\"label\").getComponent(TextLanguage).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"));\r\n            this.btnReplace.getChildByName(\"label\").getComponent(TextLanguage).setTextId(100106)\r\n        }\r\n        if((this.level+1)<=myChapter){\r\n            this.btnReplace.getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-sprite\"));\r\n            this.btnReplace.getChildByName(\"label\").getComponent(TextLanguage).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-sprite\"));\r\n            this.btnReplace.getChildByName(\"label\").getComponent(TextLanguage).setTextId(100034)\r\n            // this.Flag.children[this.level].getComponent(cc.Sprite).spriteFrame=this.spriteFrame[0]\r\n            // if((this.level+1)==Chapter){\r\n            //     this.Map_Sword.setPosition(this.Flag.children[this.level].getPosition().x,this.Flag.children[this.level].getPosition().y+100,0)\r\n            // }\r\n        }\r\n    }\r\n    onBtn_Close(){\r\n        for (let index = 0; index < this.content.children.length; index++) {\r\n            this.content.children[index].destroy()\r\n        }\r\n        this.node.active=false\r\n    }\r\n    onBtn_Replace(){\r\n        // @ts-ignore\r\n        if(this.btnReplace.getComponent(cc.Sprite).getMaterial(0)._name== 'builtin-2d-gray-sprite (Instance)'){\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(100108))//暂未解锁该章节\r\n        }else{\r\n            MapManager.Currentlevel=MissionLevelManager.getInstance().getChapterLevel(this.level+1)\r\n            // console.log(\"________\",MapManager.Currentlevel,this.level)\r\n            this.onBtn_Close()\r\n            this.parent.getComponent(BigMap).onBtn_Close()\r\n            //进入这个章节\r\n        }\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}