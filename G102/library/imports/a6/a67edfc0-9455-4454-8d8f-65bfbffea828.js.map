{"version":3,"sources":["assets\\Scripts\\Monster\\Elite\\ShuangJuRen.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { Enemy_State } from \"../../Enemy/EnemyConfig\";\r\nimport { GameEffectsManager, GameEffectId } from \"../../Game/GameEffectsManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { HeroManager } from \"../../Hero/Data/HeroManager\";\r\nimport { BuffId, DamageType, Hero_Type } from \"../../Hero/Game/HeroConfig\";\r\nimport { KeyFrameData, MonsterActionName, StrengthType } from \"../MonsterData\";\r\nimport MonsterNewNormal from \"../MonsterNewNormal\";\r\nimport EliteAtt65 from \"./EliteAtt65\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ShuangJuRen extends MonsterNewNormal {\r\n\r\n    protected onLoad(): void {\r\n        super.onLoad();\r\n        this.addMonsterNormalAttack(this.onMonsterNormalAttack);\r\n        GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.xuanyun,2);\r\n        GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.monster65_shuangjuren_att);\r\n        GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.monster65_shuangjuren_att_hit);\r\n        GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.monster65_shuangjuren_att_hit_crit);\r\n    }\r\n\r\n    /**怪物开始攻击，返回是否截获本次攻击 */\r\n    onMonsterNormalAttack ():boolean {\r\n        //发射\r\n        this.att_jishu=0;\r\n        super.setEnemyState(Enemy_State.att);\r\n        let data=new KeyFrameData();\r\n        data.name='OnDamaging';\r\n        data.callback=()=>{\r\n            if(this.getIsDie()==true){\r\n                return;\r\n            }\r\n            this.att_jishu=0;\r\n            let attPos=super.getAttPos();\r\n            let node=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.monster65_shuangjuren_att,attPos);\r\n            let tss=node.getComponent(EliteAtt65);            \r\n            //随机英雄\r\n            let heroId=HeroManager.getInstance().getRandHeroId(GameManager.getInstance().cur_game_mode);\r\n            if(heroId!=Hero_Type.NULL){\r\n                let heroPos=GameManager.getInstance().all_hero.get(heroId).node.getPosition();\r\n                let offsetPos=heroPos.sub(attPos)\r\n                let pi2=Math.PI*2;\r\n                let attDir=(Math.atan2(offsetPos.y,offsetPos.x)+pi2)%pi2;\r\n                tss.setAttHero(heroId);\r\n                tss.init(super.getAttData(DamageType.Normal,true,0),GameEffectId.monster65_shuangjuren_att,1000,attDir,1280,270);\r\n            }\r\n        }\r\n        super.playSpinAnimaton((this.getAnimaName(MonsterActionName.Attack)),false,data,()=>{\r\n            super.setEnemyState(Enemy_State.move);\r\n            this.startIdle();\r\n            if(this.att_wall){\r\n                this.move_direction=Math.random()>0.5?Math.PI:0;\r\n            }\r\n        })\r\n        return true\r\n    }\r\n\r\n}\r\n"]}