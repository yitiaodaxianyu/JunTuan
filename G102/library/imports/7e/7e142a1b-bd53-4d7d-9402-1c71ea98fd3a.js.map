{"version":3,"sources":["assets\\Scripts\\Tutorials\\TutorailsManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WXManagerEX from \"../../startscene/WXManagerEX\";\r\nimport { TutorialLevelManager } from \"../Level/TutorialLevel\";\r\nimport { CourseTextManager } from \"./CourseText\";\r\nimport Tutorials from \"./Tutorials\";\r\n\r\nconst {ccclass} = cc._decorator;\r\n@ccclass\r\nexport default class TutorailsManager {\r\n\r\n    private static _instance: TutorailsManager = null;\r\n    //连贯式教程的状态,在每个教程开启后设置为true,在该教程系列最后一个教程完成后设置为false\r\n    is_tutorails_state:boolean=false;\r\n    cur_tutorial:Tutorials=null;\r\n\r\n    public static getInstance():TutorailsManager\r\n    {\r\n        if(this._instance==null)\r\n        {\r\n            this._instance=new TutorailsManager();\r\n            this._instance.init();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    public is_finish:boolean=true;\r\n    public showing_id:number=-1;\r\n    //是否完成了战斗教程\r\n    public is_finish_game:boolean=true;\r\n\r\n    private init()\r\n    {\r\n        let num=cc.sys.localStorage.getItem('tutorials_finish');\r\n        if( num===\"\" || num===null)\r\n        {\r\n            this.is_finish=false;\r\n            \r\n        }else\r\n        {\r\n            this.is_finish=true;\r\n        }\r\n        let gameT=cc.sys.localStorage.getItem('tutorials_finish_game');\r\n        if( gameT===\"\" || gameT===null)\r\n        {\r\n            this.is_finish_game=this.isShowTutorials(204)==false;            \r\n        }else\r\n        {\r\n            this.is_finish_game=true;\r\n        }        \r\n    }\r\n    /**是否需要显示教程id */\r\n    public isShowTutorials(id:number):boolean\r\n    {\r\n        let num=cc.sys.localStorage.getItem('tutorials_'+id);\r\n        if(num===''||num===null)\r\n        {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**保存教程id，表示此id已经完成 */\r\n    saveTutorials(id:number)\r\n    {\r\n        cc.sys.localStorage.setItem('tutorials_'+id,123);\r\n    }\r\n\r\n    saveFinish()\r\n    {\r\n        this.is_finish=true;\r\n        cc.sys.localStorage.setItem('tutorials_finish',123);\r\n    }\r\n\r\n    saveFinishFromGame()\r\n    {\r\n        this.is_finish_game=true;\r\n        cc.sys.localStorage.setItem('tutorials_finish_game',123);\r\n    }\r\n\r\n    //beginCallback-教程开始的回调，closeCallback-教程关闭的回调\r\n    showTutorials(id:number,beginCallback:Function,closeCallback:Function,isLeft:boolean=true,parent?:cc.Node,bossPos?:cc.Vec2)\r\n    {        \r\n        if(this.isShowTutorials(id) && this.showing_id!=id)\r\n        {\r\n            this.is_tutorails_state=true;\r\n            if(beginCallback)\r\n            beginCallback();\r\n            WXManagerEX.getInstance().resourcesBundle.load('tutorials/tutorials_root',cc.Prefab,(error: Error, assets:cc.Prefab)=>{\r\n                if(error)\r\n                {\r\n                    console.log(error);\r\n                    return;\r\n                }\r\n                let node=cc.instantiate(assets);                \r\n                let uiRoot=cc.find('Canvas/Ui_Root');\r\n                let tutorials_root=uiRoot.getChildByName('tutorials_root');\r\n                if(tutorials_root)\r\n                {\r\n                    tutorials_root.getComponent(Tutorials).onTutorialsComplete();\r\n                }\r\n                node.zIndex=6688;\r\n                if(parent){\r\n                    parent.addChild(node);\r\n                }else{\r\n                    uiRoot.addChild(node);\r\n                }                \r\n                this.cur_tutorial=node.getComponent(Tutorials);\r\n                this.cur_tutorial.showRuoTutorials(id,closeCallback,isLeft,bossPos);\r\n                this.showing_id=id;\r\n            });\r\n        }        \r\n    }\r\n\r\n}\r\n\r\n"]}