{"version":3,"sources":["assets\\Scripts\\Hero\\Skill\\Continuous.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Enemy_DeBuff_Type } from \"../../Enemy/EnemyConfig\";\r\nimport { GameEffectId, GameEffectsManager } from \"../../Game/GameEffectsManager\";\r\nimport { GongJiData } from \"../Data/HeroData\";\r\nimport { Hero_Type } from \"../Game/HeroConfig\";\r\nimport { ContinuousSkill, DamageListen } from \"./SkillConfig\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Continuous extends cc.Component implements ContinuousSkill {\r\n\r\n    @property({type:cc.Enum(GameEffectId)})\r\n    game_effect_id:GameEffectId=GameEffectId.Null;\r\n\r\n    remain_time: number;\r\n    damage_num: number;\r\n    jiange_time: number;\r\n    hero_type:Hero_Type;\r\n    damage_listen: DamageListen;\r\n    jishu:number=0;\r\n    other_value_1:number=0;\r\n    other_value_2:number=0;\r\n    buff_id:number=0;\r\n    is_recycled:boolean=false;\r\n    buff_floor_num:number=0;\r\n    gong_ji_data:GongJiData=null;\r\n    /**\r\n     * \r\n     * @param totalTime 持续的总时长\r\n     * @param damage 每次触发的真实伤害\r\n     * @param dt \r\n     */\r\n    init(data:ContinuousSkill,listen: DamageListen,gjData:GongJiData){\r\n        this.remain_time=data.remain_time;\r\n        this.damage_num=data.damage_num;\r\n        this.jiange_time=data.jiange_time;\r\n        this.hero_type=data.hero_type;\r\n        this.other_value_1=data.other_value_1;\r\n        this.other_value_2=data.other_value_2;\r\n        this.buff_id=data.buff_id;\r\n        this.gong_ji_data=gjData;\r\n        this.is_recycled=false;\r\n        this.addDamageListen(listen);\r\n        this.buff_floor_num=1;\r\n        \r\n    }\r\n\r\n    refreshData(data:ContinuousSkill){\r\n        this.remain_time=data.remain_time;\r\n        this.damage_num=data.damage_num;\r\n        this.jiange_time=data.jiange_time;\r\n        this.buff_floor_num++;\r\n    }\r\n\r\n    addDamageListen(listen: DamageListen) {\r\n        this.damage_listen=listen;\r\n    }\r\n\r\n    doDamage(){\r\n        if(this.damage_listen){\r\n            let num=this.damage_num;\r\n            if(this.buff_id==Enemy_DeBuff_Type.LiuXue_RenZhe_Active_Skill){\r\n                num*=this.buff_floor_num;\r\n            }\r\n            this.damage_listen.doDamage(this.gong_ji_data);\r\n        }\r\n    }\r\n    /**\r\n     * 删除自身，回收至特效管理器\r\n     * @param isSelf 是否自身调用，如果是，则需要触发回调。\r\n     */\r\n    destroySelf(isSelf:boolean){\r\n        if(this.is_recycled==false){\r\n            GameEffectsManager.getInstance().destroyGameEffectById(this.game_effect_id,this.node);\r\n            this.is_recycled=true;\r\n        }\r\n        // if(isSelf && this.damage_listen){\r\n        //     this.damage_listen.end(this.is_recycled);\r\n        // }\r\n        this.damage_listen=null;\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        this.remain_time-=dt;\r\n        if(this.remain_time>0){\r\n            this.jishu+=dt;\r\n            if(this.jishu>=this.jiange_time){\r\n                this.jishu=0;\r\n                this.doDamage();\r\n            }\r\n        }else{\r\n            this.destroySelf(true);\r\n        }\r\n    }\r\n}\r\n"]}