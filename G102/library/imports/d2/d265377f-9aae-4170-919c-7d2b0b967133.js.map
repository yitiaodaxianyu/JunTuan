{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\ANuBiSi\\KuangSha.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GameState } from \"../../../Constants\";\r\nimport { GameEffectId, GameEffectsManager } from \"../../../Game/GameEffectsManager\";\r\nimport SkyManager from \"../../../Game/SkyManager\";\r\nimport GameManager from \"../../../GameManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport MonsterManager from \"../../../Monster/MonsterManager\";\r\nimport { BuffData } from \"../BuffData\";\r\nimport { BuffId, BuffType, DamageType, SkillType } from \"../HeroConfig\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class KuangSha extends cc.Component {\r\n\r\n    remain_time:number=0;\r\n    value:number=0;\r\n\r\n    init(remainTime:number,jiansuValue:number){\r\n        this.remain_time=remainTime;\r\n        this.value=jiansuValue;\r\n    }\r\n\r\n    destroySelf(){\r\n        GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.a_nu_bi_si_active_skill_wind,this.node);\r\n    }\r\n\r\n    onAddBuff(){\r\n        let allMonsterS=MonsterManager.getInstance().node.children;\r\n        let len=allMonsterS.length;    \r\n        for(let i=0;i<len; i++)\r\n        {\r\n            let monster=allMonsterS[i];\r\n            let monsterTS=monster.getComponent(Monster);\r\n            if(monsterTS&&monsterTS.getIsCanCheck())\r\n            {\r\n                let buffData=new BuffData();\r\n                buffData.buff_id=BuffId.Hero_ANuBiSi_Active_Skill_JianSu;\r\n                buffData.buff_type=BuffType.Slowdown;\r\n                buffData.buff_value=[this.value];\r\n                buffData.remain_time=1.5;\r\n                monsterTS.addDeBuff(buffData,null);\r\n            }\r\n        }\r\n        for(let i=0; i<5; i++){\r\n            this.scheduleOnce(()=>{\r\n                let xx=-375+150*i+Math.random()*40-20;\r\n                let node=GameEffectsManager.getInstance().createGameEffectForParent(GameEffectId.a_nu_bi_si_active_skill_line,cc.v2(xx,0),this.node);\r\n                cc.tween(node).by(0.48,{y:-cc.winSize.height}).call(()=>{\r\n                    GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.a_nu_bi_si_active_skill_line,node);\r\n                }).start();\r\n                if(Math.random()<0.3){\r\n                    let quan=GameEffectsManager.getInstance().createGameEffectForParent(GameEffectId.a_nu_bi_si_active_skill_ring,cc.v2(Math.random()*600-300,Math.random()*1000-500),this.node);\r\n                    quan.scaleX=Math.random()<0.5?-1:1;\r\n                }\r\n            },Math.random()*0.4);\r\n        }              \r\n    }\r\n\r\n    update (dt:number) {\r\n        if(GameManager.getInstance().cur_game_state==GameState.Game_Playing){\r\n            if(this.remain_time>0){\r\n                this.remain_time-=dt;\r\n                if(this.remain_time<=0){\r\n                    this.destroySelf();\r\n                }\r\n            }else{\r\n                this.destroySelf();\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}