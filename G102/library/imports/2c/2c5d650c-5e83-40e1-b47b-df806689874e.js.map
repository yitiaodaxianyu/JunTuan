{"version":3,"sources":["assets\\Scripts\\Boss\\Boss7\\BossSkill7.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GameState } from \"../../Constants\";\r\nimport { GameEffectsManager, GameEffectId } from \"../../Game/GameEffectsManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { BuffData } from \"../../Hero/Game/BuffData\";\r\nimport { BuffId, BuffType } from \"../../Hero/Game/HeroConfig\";\r\nimport Monster from \"../../Monster/Monster\";\r\nimport { MonsterAttData } from \"../../Monster/MonsterData\";\r\nimport MonsterManager from \"../../Monster/MonsterManager\";\r\nimport MyTool from \"../../Tools/MyTool\";\r\nimport WallManager from \"../../Wall/WallManager\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BossSkill7 extends cc.Component {\r\n\r\n    monster_att_data:MonsterAttData=null;\r\n    target_yy:number=0;\r\n    move_speed:number=2000;\r\n    acc_speed:number=300;\r\n    cur_acc_speed:number=0;\r\n    is_destory:boolean=false;\r\n    is_xuanyun:boolean=false;\r\n    max_scale_yy:number=0;\r\n    max_distance:number=0;\r\n\r\n    init(attData:MonsterAttData,targetYY:number,speed:number,accSpeed:number,isXuanYun:boolean){\r\n        this.cur_acc_speed=0;\r\n        this.move_speed=speed;\r\n        this.acc_speed=accSpeed;\r\n        this.target_yy=targetYY;\r\n        this.monster_att_data=attData;\r\n        this.is_xuanyun=isXuanYun;\r\n        this.node.scale=1;\r\n        this.max_scale_yy=WallManager.getInstance().getMainWall().getWallRect().center.y;\r\n        this.max_distance=Math.abs(WallManager.getInstance().getMainWall().getWallRect().center.y-this.node.y);\r\n        this.is_destory=false;\r\n    }\r\n\r\n    destroySelf() {\r\n        this.is_destory=true;        \r\n        this.createBomb();\r\n        GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.boss7_skill_bullect,this.node);\r\n    }\r\n\r\n    createBomb(){\r\n        GameEffectsManager.getInstance().createGameEffectById(GameEffectId.boss7_skill_bullect_hit,cc.v2(this.node.x,this.target_yy));\r\n       \r\n        if(this.is_xuanyun){\r\n            //击晕所有英雄\r\n            GameManager.getInstance().all_hero.forEach((v,k)=>{\r\n                let buffData=new BuffData();\r\n                buffData.buff_id=BuffId.Monster_XuanYun;\r\n                buffData.game_effect_id=GameEffectId.xuanyun;\r\n                buffData.remain_time=3;\r\n                buffData.buff_type=BuffType.Vertigo;\r\n                v.addDeBuff(buffData);\r\n            })\r\n            this.monster_att_data.is_big=true;\r\n        }else{\r\n            this.monster_att_data.is_big=false;\r\n        }\r\n        WallManager.getInstance().getMainWall().beInjured(this.monster_att_data);\r\n    }\r\n    \r\n    protected update(dt: number): void {\r\n        if(GameManager.getInstance().cur_game_state==GameState.Game_Playing){\r\n            if(this.is_destory==false){\r\n                this.cur_acc_speed+=this.acc_speed*dt;\r\n                let finalSpeed=this.move_speed*dt+this.cur_acc_speed;\r\n                this.node.y-=finalSpeed;\r\n                this.node.scale=1+(1-Math.abs(this.max_scale_yy-this.node.y)/this.max_distance)\r\n                if(this.node.y<=this.target_yy){\r\n                    this.destroySelf();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n}\r\n"]}