{"version":3,"sources":["assets\\Scripts\\Pet\\Ui\\PetDataItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameManager from \"../../GameManager\";\r\nimport { HeroManager } from \"../../Hero/Data/HeroManager\";\r\nimport { Hero_Type } from \"../../Hero/Game/HeroConfig\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\nimport { ItemManager } from \"../../Prop/Data/Item\";\r\nimport { PropAction } from \"../../Prop/PropConfig\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport { UIManager } from \"../../UI/UIManager\";\r\nimport { PetMessage } from \"../PetConfig\";\r\nimport { PetManager } from \"../PetManager\";\r\nimport PetItem from \"./PetItem\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PetDataItem extends cc.Component {\r\n\r\n    ui_pet_info:PetMessage=null;\r\n    self_pet_info:PetMessage=null;\r\n    ui_hero_type:Hero_Type=Hero_Type.NULL;\r\n    self_hero_type:Hero_Type=Hero_Type.NULL;\r\n    click_callback:Function=null;\r\n    \r\n    @property(cc.SpriteFrame)\r\n    Common_Btn:cc.SpriteFrame[]=[]\r\n\r\n    initData(petMessage:PetMessage,uiPetId:PetMessage,heroType:Hero_Type,clickCallback:Function,selfHero:Hero_Type = Hero_Type.NULL){\r\n        this.self_pet_info = petMessage;\r\n        this.ui_pet_info = uiPetId;\r\n        this.ui_hero_type = heroType;\r\n        this.self_hero_type = selfHero;\r\n        this.click_callback = clickCallback;\r\n        this.refreshUi();\r\n    }\r\n\r\n    refreshUi(){\r\n        let LM=LanguageManager.getInstance();\r\n        let PM=PropManager.getInstance();\r\n        let equipRoot = this.node.getChildByName(\"equipRoot\");\r\n        if(equipRoot.childrenCount == 0){\r\n            let item=PetManager.getInstance().getPetNodeByInfo(this.self_pet_info,PropAction.Null,this.self_hero_type);\r\n            item.scale = 0.8;\r\n            item.name = \"item_equip\";\r\n            equipRoot.addChild(item);\r\n        }else{\r\n            let item=equipRoot.getChildByName(\"item_equip\");\r\n            item.getComponent(PetItem).init(this.self_hero_type,this.self_pet_info,PropAction.Null);\r\n        }\r\n        let jsonItem=ItemManager.getInstance().getJsonItem(this.self_pet_info.pet_id);\r\n        let propName=this.node.getChildByName('propName');\r\n        propName.getComponent(cc.Label).string=\"[\"+PM.getPropQualityName(jsonItem.Quality)+\"]\"+LM.getStrByTextId(jsonItem.NameTextId);\r\n        propName.color=PM.getPropQualityTextColor(jsonItem.Quality);\r\n        let Outlinecolor=[new cc.Color(39, 35, 28),new cc.Color(29, 63, 27),new cc.Color(25, 55, 88),new cc.Color(66, 37, 96),new cc.Color(62, 32, 0),new cc.Color(79, 16, 15)]\r\n        propName.getComponent(cc.LabelOutline).color=Outlinecolor[(jsonItem.Quality)]\r\n        this.node.getChildByName('zhanliNum').getComponent(cc.Label).string=PetManager.getInstance().getPetZhanLi(this.self_pet_info.pet_id)+\"\";\r\n        let heroType=this.self_hero_type;\r\n        let isWear=heroType!=Hero_Type.NULL;\r\n        if(heroType!=Hero_Type.NULL){\r\n            let heroIcon=this.node.getChildByName('heroIcon').getComponent(cc.Sprite);\r\n            heroIcon.spriteFrame=PropManager.getInstance().getHeroIconb(heroType);\r\n        }\r\n        this.node.getChildByName('exBg').active=isWear;\r\n        this.node.getChildByName('heroIcon').active=isWear;\r\n        this.node.getChildByName('Equipped_Icon').active=isWear;\r\n        this.node.getChildByName('btnExchange').active=isWear;\r\n        let btnEquip=this.node.getChildByName('btnEquip')\r\n        btnEquip.active=!isWear;\r\n        // if(this.ui_pet_info.pet_id!=0){\r\n        //     btnEquip.getChildByName(\"titleLabel\").getComponent(cc.LabelOutline).color=new cc.Color(105,56,20)//.toHEX(\"#693814\")\r\n        //     btnEquip.getComponent(cc.Sprite).spriteFrame=this.Common_Btn[1]\r\n        // }else{\r\n        //     btnEquip.getChildByName(\"titleLabel\").getComponent(cc.LabelOutline).color=new cc.Color(12,56,86)//.toHEX(\"#0C3856\")\r\n        //     btnEquip.getComponent(cc.Sprite).spriteFrame=this.Common_Btn[0]\r\n        // }\r\n    }\r\n\r\n    onClickBtnExchange(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        let oldCombat = HeroManager.getInstance().getHeroZhanli(this.ui_hero_type);\r\n        let oldData = HeroManager.getInstance().getDeepHeroData(this.ui_hero_type);\r\n\r\n        HeroManager.getInstance().addWearPet(this.ui_hero_type,this.self_pet_info.pet_id);\r\n        HeroManager.getInstance().addWearPet(this.self_hero_type,this.ui_pet_info.pet_id);\r\n\r\n        let newCombat = HeroManager.getInstance().getHeroZhanli(this.ui_hero_type);\r\n        let newData = HeroManager.getInstance().getDeepHeroData(this.ui_hero_type);\r\n        if(oldCombat != newCombat){\r\n            UIManager.getInstance().showCombatChangeEffect(oldCombat,newCombat,oldData,newData);\r\n        }\r\n        if(this.click_callback){\r\n            this.click_callback(this.self_pet_info.pet_id);\r\n        }\r\n    }\r\n\r\n    onClickBtnEquip(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        let oldCombat = HeroManager.getInstance().getHeroZhanli(this.ui_hero_type);\r\n        let oldData = HeroManager.getInstance().getDeepHeroData(this.ui_hero_type);\r\n        HeroManager.getInstance().addWearPet(this.ui_hero_type,this.self_pet_info.pet_id);\r\n        if(this.click_callback){\r\n            this.click_callback(this.self_pet_info.pet_id);\r\n        }\r\n        let newCombat = HeroManager.getInstance().getHeroZhanli(this.ui_hero_type);\r\n        let newData = HeroManager.getInstance().getDeepHeroData(this.ui_hero_type);\r\n        if(oldCombat != newCombat){\r\n            UIManager.getInstance().showCombatChangeEffect(oldCombat,newCombat,oldData,newData);\r\n        }\r\n    }\r\n\r\n}\r\n"]}