{"version":3,"sources":["assets\\Scripts\\Boss\\BossManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { JiaSu } from \"../Constants\";\r\nimport { GameEffectId, GameEffectsManager } from \"../Game/GameEffectsManager\";\r\nimport GameManager from \"../GameManager\";\r\nimport { MonsterConfigureManager } from \"../Monster/Data/MonsterConfigure\";\r\nimport MonsterManager from \"../Monster/MonsterManager\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BossManager extends cc.Component {\r\n\r\n    private static _instance: BossManager = null;\r\n\r\n\r\n    public static getInstance():BossManager\r\n    {\r\n        if(this._instance==null)\r\n        {\r\n            let node=new cc.Node();\r\n            cc.director.getScene().getChildByName(\"Canvas\").addChild(node);\r\n            this._instance=node.addComponent(BossManager);\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    onLoad() {\r\n        if(!BossManager._instance)\r\n        {\r\n            BossManager._instance=this;\r\n        }\r\n        //可以根据关卡数先预加载boss相关的数据\r\n        //cc.resources.load('boss/bosscoming');\r\n        //cc.resources.load('boss/boss1');\r\n    }\r\n\r\n    onDestroy() {\r\n        BossManager._instance=null;\r\n    }\r\n\r\n    addBoss(monsterId:number,level:number,hpRate:number){\r\n        //加载对应的boss\r\n        //显示开场动画\r\n        this.showBossComing(monsterId,()=>{\r\n            //播放完成\r\n            cc.log(\"播放完成，生成boss\");\r\n            this.showBoss(monsterId,level,hpRate);\r\n        });\r\n    }\r\n    \r\n    private showBossComing(monsterId:number,endCallback:Function){\r\n        let node=GameEffectsManager.getInstance().createGameEffectForParent(GameEffectId.boss_coming,cc.v2(0,0),cc.find(\"Canvas/Ui_Root\"));\r\n        let bossSkin=this.getBossSkin(monsterId);\r\n        let spNode=node.getChildByName('bosscoming');\r\n        let sps=spNode.getComponent(sp.Skeleton);\r\n        sps.setAnimation(0,\"bosscoming\",false);\r\n        sps.setSkin(bossSkin);\r\n        sps.setCompleteListener(()=>{\r\n            endCallback();\r\n            GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.boss_coming,node);\r\n        });\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_EnemyComing);\r\n    }\r\n\r\n    showBoss(monsterId:number,level:number,hpRate:number){\r\n        //console.log(\"___________Boss\")\r\n        MonsterManager.getInstance().createMonsterById(monsterId,GameManager.getInstance().getFightCenter(),level,hpRate,true);\r\n    }\r\n\r\n    private getBossSkin(monsterId:number):string{\r\n        let bossType=6;\r\n        switch(monsterId){\r\n            case 30381:{\r\n                bossType=6;\r\n            }break;\r\n            case 30391:{\r\n                bossType=7;\r\n            }break;\r\n            case 30801:{\r\n                bossType=8;\r\n            }break;\r\n            case 30811:{\r\n                bossType=9;\r\n            }break;\r\n            case 30821:{\r\n                bossType=10;\r\n            }break;\r\n            case 30831:{\r\n                bossType=11;\r\n            }break;\r\n            case 30841:{\r\n                bossType=12;\r\n            }break;\r\n            case 30851:{\r\n                bossType=13;\r\n            }break;\r\n            case 30861:{\r\n                bossType=14;\r\n            }break;\r\n            case 30871:{\r\n                bossType=15;\r\n            }break;\r\n            default:{\r\n                bossType=6;\r\n            }break;\r\n        }\r\n        return \"Boss\"+bossType;\r\n    }\r\n}\r\n"]}