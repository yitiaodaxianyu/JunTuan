{"version":3,"sources":["assets\\Scripts\\GameData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { AccessName, HttpManager } from \"./NetWork/HttpManager\";\r\nimport {FuncType, GameScene, IsDebug,IsTestServer,Item_Type, MAX_ENERGY} from \"./Constants\";\r\nimport { EquipmentManager } from \"./Equipment/EquipmentManager\";\r\nimport GameManager from \"./GameManager\";\r\nimport { LogManager } from \"./Tools/LogInfo\";\r\nimport { LevelManager } from \"./Level/LevelManager\";\r\nimport { ActivityManager } from \"./Activity/ActivityManager\";\r\nimport UserData from \"./UserData\";\r\nimport { EventManager, RedEventString, RedEventType } from \"./Tools/EventManager\";\r\nimport { StorageKey } from \"./Storage/StorageConfig\";\r\nimport { PetManager } from \"./Pet/PetManager\";\r\nimport { DingYueManager } from \"./Payment/DingYueManager\";\r\nimport TowerManager from \"./Tower/TowerManager\";\r\nimport { CyclePackManager } from \"./Payment/Data/CyclePack\";\r\nimport { PayManager } from \"./Payment/PayManager\";\r\nimport { TheStorageManager } from \"./Storage/StorageManager\";\r\nimport { PropManager } from \"./Prop/PropManager\";\r\nimport TaskManager from \"./Task/TaskManager\";\r\nimport { TaskItem } from \"./Task/TaskEnum\";\r\nimport { PropId } from \"./Prop/PropConfig\";\r\nimport { DailyShopManager } from \"./Store/DailyShop\";\r\nimport { FunctionDefinitionManager } from \"./JsonData/FunctionDefinition\";\r\nimport { PurchaseCoinsManager } from \"./Store/PurchaseCoins\";\r\nimport { CommodityInformationManager } from \"./Store/CommodityInformation\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameData {\r\n\r\n    private static _instance: GameData = null;\r\n\r\n    init () {\r\n        // this.checkIsNewDay();        \r\n    }\r\n\r\n    \r\n    public static getInstance():GameData\r\n    {\r\n        if(this._instance==null)\r\n        {\r\n            this._instance=new GameData();\r\n            this._instance.init();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    getMaxEnergy():number\r\n    {\r\n        let max=LevelManager.getInstance().finish_level+MAX_ENERGY;\r\n        if(max>30)\r\n        {\r\n            max=30;\r\n        }\r\n        return max;\r\n    }\r\n    \r\n    onExit()\r\n    {\r\n        //记录退出时间\r\n        let curDate = new Date();\r\n        cc.sys.localStorage.setItem('exit_time',curDate.getTime());\r\n    }    \r\n    \r\n    randomLetter(len:number):string \r\n    {\r\n        const letters = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\r\n        let res = ''\r\n        for (let i = 0; i < len; i++) {\r\n            let n = Math.floor(Math.random() * letters.length)\r\n            res += letters[n]\r\n        }\r\n        return res\r\n    }\r\n\r\n    saveExitTime()\r\n    {\r\n        if(GameManager.getInstance().cur_game_scene==GameScene.load){\r\n            return;\r\n        }\r\n        //记录退出时间\r\n        let curDate = new Date();\r\n        cc.sys.localStorage.setItem('exit_time',curDate.getTime());\r\n        let loginTime=this.getLoginTime();\r\n        let onlineTime=Math.floor((curDate.getTime()-loginTime)/1000);\r\n        let totalTime=GameData.getTotalTime();\r\n        this.saveTotalTime(totalTime+onlineTime);\r\n        LogManager.saveLogList();\r\n        //上传信息\r\n        if(IsTestServer)\r\n        {\r\n            PropManager.getInstance().saveAllPropNum();\r\n        }\r\n        //把信息同步到文件中\r\n        //EquipmentManager.getInstance().saveAllEquipmentList();\r\n        //PetManager.getInstance().saveAllPetList();\r\n    }\r\n\r\n    saveLoginTime()\r\n    {\r\n        let curDate = new Date();\r\n        cc.sys.localStorage.setItem('login_time',curDate.getTime()); \r\n    }\r\n\r\n    getLoginTime():number\r\n    {\r\n        let num=cc.sys.localStorage.getItem('login_time');\r\n        if(num===''||num===null)\r\n        {\r\n            num=new Date().getTime();\r\n        }\r\n        num=parseInt(num);\r\n        return num;\r\n    }\r\n\r\n    saveTotalTime(num:number)\r\n    {\r\n        cc.sys.localStorage.setItem('total_online_time',num);\r\n        this.saveLoginTime();\r\n        //FollowManager.getInstance().followNeiBu(this.finish_level,num,this.getUserName());\r\n    }\r\n\r\n    static getTotalTime():number\r\n    {\r\n        let num=cc.sys.localStorage.getItem('total_online_time');\r\n        if(num===''||num===null)\r\n        {\r\n            num=0;            \r\n        }\r\n        num=parseInt(num);\r\n        return num;\r\n    }\r\n\r\n    //今天是否可以签到\r\n    getIsSignToday():boolean\r\n    {\r\n        return TheStorageManager.getInstance().getNumber(StorageKey.CanSignIn,0) == 0\r\n        \r\n    }\r\n\r\n    saveIsSignToday(isSign:boolean)\r\n    {\r\n        if(isSign==true)\r\n        {\r\n            cc.sys.localStorage.setItem(\"TodaySignNum\",1);\r\n        }else\r\n        {\r\n            cc.sys.localStorage.setItem(\"TodaySignNum\",0);\r\n        }\r\n    }\r\n\r\n    //获取签到天数\r\n    getSignDays()\r\n    {\r\n        let signDays = cc.sys.localStorage.getItem(\"SignDays\");\r\n        if(signDays!=\"\" && signDays!=null)\r\n        {\r\n            signDays=parseInt(signDays);\r\n        }else\r\n        {\r\n            signDays=0;\r\n        }\r\n        return signDays;\r\n    }\r\n\r\n    checkIsNewMonth():boolean{\r\n        let isNewMonth:boolean = false;\r\n        let curMonth=new Date().getMonth();\r\n        let month=cc.sys.localStorage.getItem(\"LoginMonth\");\r\n        if(month!=\"\"&&month!=null){\r\n            month=parseInt(month);\r\n        }else{\r\n            month=-1;\r\n        }\r\n\r\n        if(month > 0)\r\n        {\r\n            if(month!=curMonth)\r\n            {\r\n                isNewMonth = true;\r\n            }\r\n        }else\r\n        {\r\n            isNewMonth = true;\r\n        }\r\n        if(isNewMonth){\r\n            this.saveNewMonth(true);\r\n        }\r\n        return isNewMonth;\r\n    }\r\n\r\n    saveNewMonth(isNewMonth:boolean)\r\n    {\r\n        // let curMonth=new Date().getMonth();\r\n        // cc.sys.localStorage.setItem(\"LoginMonth\", curMonth);        \r\n        // if(isNewMonth==true)\r\n        // {\r\n        //     //重置战令\r\n        //     BattlePassManager.resetBattlePass();\r\n        //     CyclePackManager.getInstance().resetMonthData();\r\n        // }\r\n    }\r\n\r\n    getYearWeek(year, month, day) {//a为年 b为月 c为日\r\n        var date1 = new Date(year, parseInt(month) - 1, day),\r\n            date2 = new Date(year, 0, 1),\r\n            d = Math.round((date1.valueOf() - date2.valueOf()) / 86400000);\r\n        return Math.ceil((d + ((date2.getDay() + 1) - 1)) / 7);\r\n    };\r\n\r\n    checkIsNewWeek():boolean{\r\n        let isNewWeek:boolean = false;\r\n        let date = new Date();\r\n        let curWeek=this.getYearWeek(date.getFullYear(),date.getMonth(),date.getDate());\r\n        let week=cc.sys.localStorage.getItem(\"LoginWeek\");\r\n        if(week!=\"\"&&week!=null){\r\n            week=parseInt(week);\r\n        }else{\r\n            week=-1;\r\n        }\r\n\r\n        if(week > 0)\r\n        {\r\n            if(week!=curWeek)\r\n            {\r\n                isNewWeek = true;\r\n            }\r\n        }else\r\n        {\r\n            isNewWeek = true;\r\n        }\r\n        if(isNewWeek){\r\n            this.saveNewWeek(true);\r\n        }\r\n        return isNewWeek;\r\n    }\r\n\r\n    saveNewWeek(isNewWeek:boolean)\r\n    {\r\n        let date = new Date();\r\n        let curWeek=this.getYearWeek(date.getFullYear(),date.getMonth(),date.getDate());\r\n        cc.sys.localStorage.setItem(\"LoginWeek\", curWeek);        \r\n        if(isNewWeek==true)\r\n        {\r\n            //重置战令\r\n            // BattlePassManager.resetBattlePass();\r\n            CyclePackManager.getInstance().resetWeekData();\r\n        }\r\n    }\r\n\r\n    checkIsNewDay():boolean\r\n    {\r\n        let isNewDay:boolean = false;\r\n        let curDay = new Date().getDate();\r\n        let loginDay = cc.sys.localStorage.getItem(\"LoginDay\");\r\n        if(loginDay!=\"\" && loginDay!=null)\r\n        {\r\n            loginDay=parseInt(loginDay);\r\n        }\r\n        else\r\n            loginDay=0;\r\n        if(loginDay > 0)\r\n        {\r\n            if(loginDay!= curDay)\r\n            {\r\n                isNewDay = true;\r\n            }\r\n        }else\r\n        {\r\n            isNewDay = true;\r\n        }\r\n        this.saveNewDay(isNewDay);\r\n        return isNewDay;\r\n    }\r\n\r\n    \r\n    \r\n    saveNewDay(isNewDay:boolean)\r\n    {\r\n        let curDay = new Date().getDate();\r\n        cc.sys.localStorage.setItem(\"LoginDay\", curDay);        \r\n        if(isNewDay==true)\r\n        {\r\n            this.checkIsNewMonth();\r\n            // HeroManager.getInstance().saveNewDayZhanli();\r\n            this.saveIsSignToday(false);          \r\n            PayManager.getInstance().resetAllTodayShow();\r\n            DingYueManager.getInstance().resetTodayGetState();\r\n            TowerManager.resetTodayPassNum();\r\n            CyclePackManager.getInstance().resetDayData();\r\n            EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_SignIn);\r\n            ActivityManager.getInstance().resetTicket();\r\n        }\r\n    }\r\n            \r\n    getTotalVideoNum():number\r\n    {\r\n        let num=cc.sys.localStorage.getItem('total_video_num');\r\n        if(num!=\"\"&&num!=null)\r\n        {\r\n            num=parseInt(num);\r\n        }else\r\n        {\r\n            num=0;\r\n        }\r\n        return num;\r\n    }\r\n\r\n    addTotalVideoNum(num:number)\r\n    {\r\n        let newNum=this.getTotalVideoNum()+num;\r\n        cc.sys.localStorage.setItem('total_video_num',newNum);\r\n        this.HttpAddPayPrice();\r\n    }\r\n\r\n    HttpAddPayPrice(){\r\n        HttpManager.post(AccessName.updateUserInfo,this.getPayJsonString(),false)\r\n    }\r\n\r\n    private getPayJsonString():string{\r\n        let uid=UserData.getInstance().getUserID();\r\n        return JSON.stringify({\r\n            type:7,\r\n            uid:uid,\r\n            value:1,\r\n        });\r\n    }\r\n\r\n    /**从服务器更新时间戳到本地 */\r\n    refreshServerTime(){\r\n        HttpManager.gameTimePost(AccessName.getServerTime,this.getUidJsonString()).then((data:any)=>{\r\n            if(data.serverTime){\r\n                if(TheStorageManager.getInstance().getNumber(StorageKey.TomorowZeroTimeStamp,0) <= data.serverTime){\r\n                    let oneDay = 60*60*24;\r\n                    let timezone = 60 * (-new Date().getTimezoneOffset());\r\n                    let todaySpeendTime = data.serverTime % oneDay;\r\n                    let todayZero = data.serverTime - todaySpeendTime  - timezone;\r\n                    let tomorowZero = todayZero + oneDay;\r\n                    this.refreshDailyData();\r\n                    TheStorageManager.getInstance().setItem(StorageKey.TomorowZeroTimeStamp,tomorowZero);\r\n                }\r\n                if(TheStorageManager.getInstance().getNumber(StorageKey.NextWeekZeroTimeStamp,0) <= data.serverTime){\r\n                    let oneDay = 60*60*24;\r\n                    let timezone = 60 * (-new Date().getTimezoneOffset());\r\n                    let todaySpeendTime = data.serverTime % oneDay;\r\n                    let todayZero = data.serverTime - todaySpeendTime  - timezone;\r\n                    let t = new Date(todayZero * 1000);\r\n                    let week = t.getDay();\r\n                    if(week == 0) week = 7;\r\n                    let weekSpeedTime = (week - 1) * oneDay;\r\n                    let mondayZero = (todayZero - weekSpeedTime) + oneDay * 7;\r\n                    this.refreshWeekData();\r\n                    TheStorageManager.getInstance().setItem(StorageKey.NextWeekZeroTimeStamp,mondayZero);\r\n                }\r\n                if(TheStorageManager.getInstance().getNumber(StorageKey.NextMonthZeroTimeStamp,0) <= data.serverTime){\r\n                    let oneDay = 60*60*24;\r\n                    let timezone = 60 * (-new Date().getTimezoneOffset());\r\n                    let todaySpeendTime = data.serverTime % oneDay;\r\n                    let todayZero = data.serverTime - todaySpeendTime  - timezone;\r\n                    // 转换到当天零点的时间\r\n                    let date = new Date(todayZero * 1000);\r\n                    // new Date()第3个参数默认为1，就是每个月的1号，把它设置为0时， \r\n                    // new Date()会返回上一个月的最后一天，然后通过getDate()方法得到天数\r\n                    let tempDate = new Date(date.getFullYear(),date.getMonth() + 1,0);\r\n                    // 获取到当月的天数\r\n                    let days = tempDate.getDate();\r\n                    // 获取到剩余的天数\r\n                    let remainingDay = days - date.getDate() + 1;\r\n                    \r\n                    // 下个月一号零点的时间戳(单位秒)\r\n                    let nextMonthZero = todayZero + (remainingDay * oneDay);\r\n                    this.refreshMonthData();\r\n                    TheStorageManager.getInstance().setItem(StorageKey.NextMonthZeroTimeStamp,nextMonthZero);\r\n                }\r\n            }else{\r\n                cc.error(\"数据获取失败\");\r\n            }\r\n        }).catch((err)=>{\r\n            cc.error(err);\r\n        });\r\n    }\r\n\r\n    /**  刷新日常数据，即需要每日更新的数据在这更新*/\r\n    refreshDailyData(){\r\n        // 每日商店数据更新\r\n        TheStorageManager.getInstance().setItem(StorageKey.StoreDailyShopId,'');\r\n        for(let i = 0;i<6;i++){\r\n            TheStorageManager.getInstance().setItem(StorageKey.StoreDailyShopNum + i,'');\r\n            TheStorageManager.getInstance().setItem(StorageKey.StoreDailyShopDiscount + i,'');\r\n        }\r\n        for(let i = 0;i<3;i++){\r\n            TheStorageManager.getInstance().setItem(StorageKey.StoreCoinItem + i,0)\r\n        }\r\n        // TheStorageManager.getInstance().setItem(StorageKey.CanSignIn,'0');\r\n        TheStorageManager.getInstance().setItem(StorageKey.CanFastOffline,'');\r\n        TheStorageManager.getInstance().setItem(StorageKey.CanAdFastOffline,'');\r\n        TheStorageManager.getInstance().setItem(StorageKey.CoinPopAd,'');\r\n        TheStorageManager.getInstance().setItem(StorageKey.TurmtableAd,'');\r\n        TheStorageManager.getInstance().setItem(StorageKey.TurmtableFree,'');\r\n        TheStorageManager.getInstance().setItem(StorageKey.TurmtableFreeYes, 1);\r\n        TheStorageManager.getInstance().setItem(StorageKey.TurmtableFreeTime, GameManager.getInstance().tumTableTime);\r\n        TheStorageManager.getInstance().setItem(StorageKey.TaskDailyActivityNum,'');\r\n\r\n        TheStorageManager.getInstance().setItem(StorageKey.VipDailyCollectionStatus,0);\r\n\r\n        TheStorageManager.getInstance().setItem(StorageKey.BossChallengeTimes, 3);\r\n        TheStorageManager.getInstance().setItem(StorageKey.UnlimitedChallengeTimes,3);\r\n        TheStorageManager.getInstance().setItem(StorageKey.VoidCrackChallengeTimes, 3);\r\n\r\n        TheStorageManager.getInstance().setItem(StorageKey.BuyBossChallengeTimes, 3);\r\n        TheStorageManager.getInstance().setItem(StorageKey.BuyUnlimitedChallengeTimes,3);\r\n        TheStorageManager.getInstance().setItem(StorageKey.BuyVoidCrackChallengeTimes, 3);\r\n        \r\n        for(let i = 20;i<101;i+=20){\r\n            TheStorageManager.getInstance().setItem(StorageKey.TaskDailyActivityState + i,'');\r\n        }\r\n        TheStorageManager.getInstance().setItem(StorageKey.TaskId + 0,0);\r\n        // 周卡每日领取刷新\r\n        TheStorageManager.getInstance().setItem(StorageKey.WeekCardIsReceiveToday,0);\r\n        TheStorageManager.getInstance().setItem(StorageKey.WeekCardFreeAdNum,10);\r\n        TheStorageManager.getInstance().setItem(StorageKey.TodayIsFirstLogIn,0);\r\n\r\n        // TaskManager.getInstance().emitTask(TaskItem.累计登录X天);\r\n    }\r\n\r\n    /**刷新周更数据，即每周刷新的数据在此更新 */\r\n    refreshWeekData(){\r\n        TheStorageManager.getInstance().setItem(StorageKey.TaskWeekActivityNum,'');\r\n        for(let i = 100;i<501;i+=100){\r\n            TheStorageManager.getInstance().setItem(StorageKey.TaskWeeklyActivityState + i,'');\r\n        }\r\n    }\r\n\r\n    /**刷新月更数据，即每月刷新的数据在此更新 */\r\n    refreshMonthData(){\r\n        TheStorageManager.getInstance().setItem(StorageKey.DailySignInNum,'');\r\n        for(let i = 1;i<32;i++){\r\n            TheStorageManager.getInstance().setItem(StorageKey.DailySignInDay + i,'');\r\n            TheStorageManager.getInstance().setItem(StorageKey.DailySignInCumulativeDay + i,'');\r\n        }\r\n    }\r\n\r\n    saveSignUnlockHint()\r\n    {\r\n        cc.sys.localStorage.setItem('SignUnlockHint',1);\r\n    }\r\n\r\n    /**商店钻石红点信息 */\r\n    getGemFreeRedTip():boolean{\r\n        let storeItemInfo=CommodityInformationManager.getInstance().getJsonCommodityInformation(100101);\r\n        let num=TheStorageManager.getInstance().getNumber(StorageKey.StoreDailyShopNum + 0,0);        \r\n        return num < storeItemInfo.AdPlayableTimes\r\n    }\r\n    getCoinFreeRedTip():boolean{\r\n        let coinData = PurchaseCoinsManager.getInstance().getJsonDataByChapter(LevelManager.getInstance().getFinishChapter());\r\n        let isTip=false;\r\n        coinData.forEach((v,k) =>{            \r\n            if(v.AdReward == 1){\r\n                if(isTip==false && (Number(TheStorageManager.getInstance().getInt(StorageKey.StoreCoinItem + k,0)) < v.AdPlayableTimes)){\r\n                    isTip=true;\r\n                }\r\n            }\r\n        })\r\n        return isTip\r\n    }\r\n    /**招募十连抽 */\r\n    getHeroRecruitingRedTip():boolean{        \r\n        return PropManager.getInstance().getPropNum(PropId.OrdinaryWishingCoin)>=10;\r\n    }\r\n    getPetRecruitingRedTip():boolean{\r\n        let oneDayTime = 60*60*24*1000;\r\n        let currentTime = Date.now();\r\n        if(FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.PetParadise) == true && TheStorageManager.getInstance().getNumber(StorageKey.StoreMysteryPetFreeTime,0) + oneDayTime - currentTime <= 0){\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n    getEquipFreeRedTip():boolean{\r\n        let oneDayTime = 60*60*24*1000;\r\n        let currentTime = Date.now();\r\n        if(TheStorageManager.getInstance().getNumber(StorageKey.StoreMysteryEquipFreeTime,0) + oneDayTime - currentTime <= 0){\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    //********************************************账户信息*************************************************   \r\n  \r\n\r\n    private getUidJsonString():string{\r\n        let uid=UserData.getInstance().getUserID();\r\n        return JSON.stringify({\r\n            uid:uid,\r\n        });\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n"]}