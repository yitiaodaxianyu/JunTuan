{"version":3,"sources":["assets\\Scripts\\Tutorials\\RewardSSUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GameMode, GameScene } from \"../Constants\";\r\nimport GameManager from \"../GameManager\";\r\nimport { HeroManager } from \"../Hero/Data/HeroManager\";\r\nimport { Hero_Type } from \"../Hero/Game/HeroConfig\";\r\nimport { MissionLevelManager } from \"../Level/MissionLevel\";\r\nimport { Follow_Type } from \"../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../multiLanguage/FollowManager\";\r\nimport TextLanguage from \"../multiLanguage/TextLanguage\";\r\nimport ImagerLanguage from \"../Multilingual/ImagerLanguage\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport StoreHeroShowUi from \"../Store/StoreHeroShowUi\";\r\nimport UIComponent from \"../UI/UIComponent\";\r\nimport { UIPath, UILayerLevel } from \"../UI/UIConfig\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport TutorailsManager from \"./TutorailsManager\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class RewardSSUi extends UIComponent {\r\n\r\n    /**0:解锁展示，只能查看   1：挑战成功，可以选择 */\r\n    cur_mode:number=0;\r\n\r\n    select_node:cc.Node=null;\r\n    cur_select_index:number=-1;\r\n    ss_id:number[]=[Hero_Type.LeiShen,Hero_Type.ANuBiSi,Hero_Type.MeiMo];\r\n\r\n    initData(mode:number){\r\n        this.cur_mode=mode;\r\n        let textLanguage=this.node.getChildByName(\"btnOk\").getChildByName('TextLanguage').getComponent(TextLanguage);\r\n        let titleImg=this.node.getChildByName('titleImg').getComponent(ImagerLanguage);\r\n        let tipText=this.node.getChildByName('tipText').getComponent(TextLanguage);\r\n        switch(this.cur_mode){\r\n            case 0:{\r\n                textLanguage.setTextId(310004);\r\n                titleImg.setTextId(15);\r\n                tipText.setTextId(310005);\r\n            }break;\r\n            case 1:{\r\n                textLanguage.setTextId(100001);\r\n                titleImg.setTextId(16);\r\n                tipText.setTextId(310003);\r\n            }break;\r\n        }\r\n    }\r\n\r\n    start () {\r\n        this.select_node=this.node.getChildByName(\"select\");\r\n        this.select_node.active=false;\r\n        this.refreshUi();\r\n    }\r\n\r\n    refreshUi(){\r\n        switch(this.cur_mode){\r\n            case 0:{\r\n                this.select_node.active=false;\r\n                for(let i=0; i<3; i++){\r\n                    let card=this.node.getChildByName(\"card\"+(i+1));\r\n                    card.scale=0.84;\r\n                }                \r\n            }break;\r\n            case 1:{\r\n                this.node.getChildByName(\"btnOk\").active=this.cur_select_index>=0;\r\n                for(let i=0; i<3; i++){\r\n                    let card=this.node.getChildByName(\"card\"+(i+1));\r\n                    if(this.cur_select_index==i){\r\n                        card.scale=1;\r\n                        this.select_node.active=true;\r\n                        this.select_node.setPosition(card.getPosition());\r\n                    }else{\r\n                        card.scale=0.84;\r\n                    }\r\n                }\r\n            }break;\r\n        }        \r\n    }\r\n\r\n    onBtnCardClick(btn:cc.Event.EventTouch,indexStr:string){\r\n        let index=parseInt(indexStr);\r\n        switch(this.cur_mode){\r\n            case 0:{\r\n                //弹出详情\r\n                this.showHero(this.ss_id[index]);\r\n            }break;\r\n            case 1:{\r\n                if(this.cur_select_index!=index){\r\n                    this.cur_select_index=index;\r\n                    this.refreshUi();\r\n                }                \r\n            }break;\r\n        }\r\n    }\r\n\r\n    onBtnOkClick(){\r\n        switch(this.cur_mode){\r\n            case 0:{\r\n                //开始关卡\r\n                TutorailsManager.getInstance().saveTutorials(204);\r\n                FollowManager.getInstance().followEvent(Follow_Type.新手引导+204);\r\n                GameManager.getInstance().fighting_info=MissionLevelManager.getInstance().getFightingInfo(1);\r\n                GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n                cc.director.loadScene(GameScene.game);\r\n            }break;\r\n            case 1:{                \r\n                //获得英雄\r\n                if(this.cur_select_index>=0){\r\n                    let id=this.ss_id[this.cur_select_index];\r\n                    PropManager.getInstance().changePropNum(id+110000,1);\r\n                    if(GameManager.getInstance().cur_game_scene==GameScene.game){\r\n                        //看看有没有空位插进去.\r\n                        let teamList=HeroManager.getInstance().getTeamList(GameMode.Main);\r\n                        for(let i=0; i<teamList.length; i++){\r\n                            let heroId=teamList[i];\r\n                            if(heroId<Hero_Type.NULL){\r\n                                if(teamList.indexOf(id)==-1){\r\n                                    teamList[i]=id;\r\n                                    HeroManager.getInstance().saveTeamList(GameMode.Main,teamList);\r\n                                    HeroManager.getInstance().loadHeroData(id);\r\n                                    GameManager.getInstance().loadGameHeroData();\r\n                                    GameManager.getInstance().game.loadHero(id,i);\r\n                                    break;\r\n                                }                                \r\n                            }\r\n                        }\r\n                    }\r\n                    HeroManager.getInstance().reportHeroList();\r\n                    TutorailsManager.getInstance().saveTutorials(205);\r\n                    FollowManager.getInstance().followEvent(Follow_Type.新手引导+205);\r\n                    this.onClose();\r\n                }                                \r\n            }break;\r\n        }\r\n    }\r\n\r\n    showHero(heroId:Hero_Type){\r\n        UIManager.getInstance().showUiDialog(UIPath.StoreHeroShowUi,UILayerLevel.Three,{onCompleted:(uiNode)=>{\r\n            uiNode.getComponent(StoreHeroShowUi).init({\r\n                onClose:()=>{\r\n                    \r\n                }\r\n            });\r\n            uiNode.getComponent(StoreHeroShowUi).initData(heroId,false);\r\n        }}); \r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}