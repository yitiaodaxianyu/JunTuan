{"version":3,"sources":["assets\\Scripts\\Hero\\Ui\\ExclusiveWeaponsUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ApkManager from \"../../Ads/ApkManager\";\r\nimport ExclusiveEquipItem from \"../../Equipment/Ui/ExclusiveEquipItem\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { HeroManager } from \"../../Hero/Data/HeroManager\";\r\nimport { Hero_Type } from \"../../Hero/Game/HeroConfig\";\r\nimport { ExclusiveEnhancementManager } from \"../../JsonData/ExclusiveEnhancement\";\r\nimport { ExclusiveWeaponMessageManager } from \"../../JsonData/ExclusiveWeaponMessage\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\nimport TextLanguage from \"../../multiLanguage/TextLanguage\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport MyTool from \"../../Tools/MyTool\";\r\nimport UIComponent from \"../../UI/UIComponent\";\r\nimport { UILayerLevel, UIPath } from \"../../UI/UIConfig\";\r\nimport { UiAction } from \"../../UI/UiInterface\";\r\nimport { UIManager } from \"../../UI/UIManager\";\r\nimport ExclusiveWeaponsStrengtheningUi from \"./ExclusiveWeaponsStrengtheningUi\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ExclusiveWeaponsUi extends UIComponent {\r\n\r\n    hero_type:Hero_Type = Hero_Type.NULL;\r\n\r\n    @property(cc.SpriteAtlas)\r\n    exclusive_weapon_ui:cc.SpriteAtlas = null;\r\n\r\n    init(uiAc: UiAction): void {\r\n        super.init(uiAc);\r\n\r\n    }\r\n\r\n    initData(heroType:Hero_Type){\r\n        this.hero_type = heroType;\r\n        this.refreshUi();\r\n    }\r\n\r\n    refreshUi(){\r\n        let heroInfo = HeroManager.getInstance().getHeroInfo(this.hero_type);\r\n        let weaponData = ExclusiveEnhancementManager.getInstance().getJsonByHeroTypeAndWeaponLevel(this.hero_type,heroInfo.exclusive_equip_stage);\r\n        let weaponMessage = ExclusiveWeaponMessageManager.getInstance().getJsonExclusiveWeaponMessage(this.hero_type);\r\n        this.node.getChildByName(\"equipName\").getComponent(TextLanguage).setTextId(weaponMessage.ExclusiveWeaponNameID);\r\n        this.node.getChildByName(\"heroDes\").getComponent(TextLanguage).setTextId(weaponMessage.HeroExclusive);\r\n        this.node.getChildByName(\"ATK\").getComponent(cc.Label).string = \"\" + MyTool.numberFormat(weaponData.Attack * HeroManager.getInstance().getHeroZhanli(this.hero_type),2);\r\n        this.node.getChildByName(\"Hp\").getComponent(cc.Label).string = \"\" + MyTool.numberFormat(weaponData.Health * 100,2) + \"%\";\r\n        this.node.getChildByName(\"defence\").getComponent(cc.Label).string = \"\" + MyTool.numberFormat(weaponData.Defense * 100,2) + \"%\";\r\n        this.node.getChildByName(\"atk\").getComponent(cc.Label).string = \"\" + MyTool.numberFormat(weaponData.Attack * 100,2) + \"%\";\r\n        this.node.getChildByName(\"crit\").getComponent(cc.Label).string = \"\" + MyTool.numberFormat(weaponData.Hit,2);\r\n        this.node.getChildByName(\"exclusiveEquipItem\").getComponent(ExclusiveEquipItem).init(this.hero_type);\r\n        \r\n\r\n\r\n        this.node.getChildByName(\"skillName\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(weaponMessage.ExclusiveWeaponSkillID);\r\n        this.node.getChildByName(\"skillIcon\").getComponent(cc.Sprite).spriteFrame = this.exclusive_weapon_ui.getSpriteFrame(\"Exclusive_Skill_\"+this.hero_type);\r\n        this.node.getChildByName(\"skillDes\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(weaponMessage.ExclusiveWeaponSkillDescription);\r\n\r\n        let content = this.node.getChildByName(\"scroll\").getComponent(cc.ScrollView).content\r\n        let text1 = content.getChildByName(\"levelDes1\");\r\n        let text2 = content.getChildByName(\"levelDes2\");\r\n        let text3 = content.getChildByName(\"levelDes3\");\r\n        text1.getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(weaponMessage.ExclusiveWeaponStrengthenID_1);\r\n        text2.getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(weaponMessage.ExclusiveWeaponStrengthenID_2);\r\n        text3.getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(weaponMessage.ExclusiveWeaponStrengthenID_3);\r\n\r\n        if(heroInfo.exclusive_equip_stage >= 10){\r\n            text1.getComponentInChildren(cc.Sprite).spriteFrame = this.exclusive_weapon_ui.getSpriteFrame(\"Exclusive_Info_1\")\r\n            text1.color = cc.color(137,233,237);\r\n            text1.addComponent(cc.LabelOutline).color = cc.color(32,36,55);\r\n            text1.getComponent(cc.LabelOutline).width = 2;\r\n        }\r\n        if(heroInfo.exclusive_equip_stage >= 20){\r\n            text2.getComponentInChildren(cc.Sprite).spriteFrame = this.exclusive_weapon_ui.getSpriteFrame(\"Exclusive_Info_1\")\r\n            text2.color = cc.color(137,233,237);\r\n            text2.addComponent(cc.LabelOutline).color = cc.color(32,36,55);\r\n            text2.getComponent(cc.LabelOutline).width = 2;\r\n        }\r\n        if(heroInfo.exclusive_equip_stage >= 30){\r\n            text3.getComponentInChildren(cc.Sprite).spriteFrame = this.exclusive_weapon_ui.getSpriteFrame(\"Exclusive_Info_1\")\r\n            text3.color = cc.color(137,233,237);\r\n            text3.addComponent(cc.LabelOutline).color = cc.color(32,36,55);\r\n            text3.getComponent(cc.LabelOutline).width = 2;\r\n        }\r\n    }\r\n\r\n    onClickBtnStrengthening(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        // UIManager.getInstance().showExclusiveWeaponsStrengtheningUi({\r\n        //     onClose:()=>{\r\n        //         this.refreshUi();\r\n        //     }\r\n        // },this.hero_type,false);\r\n        UIManager.getInstance().showUiDialog(UIPath.ExclusiveStrengthening,UILayerLevel.Two,{onCompleted:(uiNode)=> {\r\n            uiNode.getComponent(ExclusiveWeaponsStrengtheningUi).init({\r\n                onClose:()=>{\r\n                    this.refreshUi();\r\n                }\r\n            });\r\n            uiNode.getComponent(ExclusiveWeaponsStrengtheningUi).initData(this.hero_type,false);\r\n        },})\r\n    }\r\n\r\n    onClickBtnClose()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.destroySelf();\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n    }\r\n\r\n}\r\n"]}