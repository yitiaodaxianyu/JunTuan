{"version":3,"sources":["assets\\Scripts\\Equipment\\Ui\\SynthesisSucceeded.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { EquipmentAttributeManager } from \"../Data/EquipmentAttribute\";\r\nimport { EquipmentManager } from \"../EquipmentManager\";\r\nimport EquipInfoUi from \"./EquipInfoUi\";\r\nimport MergeUi from \"./MergeUi\";\r\nimport { EquipmentLevelUpCostManager } from \"../Data/EquipmentLevelUpCost\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { PropId } from \"../../Prop/PropConfig\";\r\nimport { TaskItem } from \"../../Task/TaskEnum\";\r\nimport TaskManager from \"../../Task/TaskManager\";\r\nimport { EquipInfo } from \"../EquipConfig\";\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SynthesisSucceeded extends cc.Component {\r\n\r\n    // @property(cc.Label)\r\n    // label: cc.Label = null;\r\n\r\n    // @property\r\n    // text: string = 'hello';\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    // start () {\r\n\r\n    // }\r\n    \r\n    @property(cc.Node)\r\n    txt1:cc.Node=null\r\n    @property(cc.Node)\r\n    txt2:cc.Node=null//品级名字\r\n\r\n    @property(cc.Node)\r\n    skillNum1:cc.Node=null//品级等级\r\n    @property(cc.Node)\r\n    skillNum2:cc.Node=null\r\n\r\n    @property(cc.Node)\r\n    oldHpNum1:cc.Node=null//生命值\r\n    @property(cc.Node)\r\n    oldAtkNum1:cc.Node=null//攻击力\r\n    @property(cc.Node)\r\n    oldDefanceNum1:cc.Node=null//防御力\r\n    \r\n    @property(cc.Node)\r\n    oldHpNum2:cc.Node=null//生命值\r\n    @property(cc.Node)\r\n    oldAtkNum2:cc.Node=null//攻击力\r\n    @property(cc.Node)\r\n    oldDefanceNum2:cc.Node=null//防御力\r\n\r\n    equip_info1:number=null;\r\n    equip_info2:number=null;\r\n\r\n    EqfiUI=null\r\n\r\n    EquipList=new Array<EquipInfo>();\r\n\r\n    Coin=[]\r\n    protected onEnable(): void {\r\n        this.Coin=[]\r\n        if(this.equip_info1){\r\n            let Quality= EquipmentAttributeManager.getInstance().getQuality(this.equip_info1)//品级\r\n            let Quality2= EquipmentAttributeManager.getInstance().getQuality(this.equip_info2)//品级\r\n\r\n            // console.log(\"______\",Quality,Quality2)\r\n            let butes1=EquipmentManager.getInstance().getAttributes(this.equip_info1)\r\n            let butes2=EquipmentManager.getInstance().getAttributes(this.equip_info2)\r\n\r\n            this.oldHpNum1.parent.active=true\r\n            this.oldHpNum2.parent.active=true\r\n            this.oldAtkNum1.parent.active=true\r\n            this.oldAtkNum2.parent.active=true\r\n            this.oldDefanceNum1.parent.active=true\r\n            this.oldDefanceNum2.parent.active=true\r\n            \r\n\r\n            this.oldHpNum1.getComponent(cc.Label).string=\"\"+butes1[2]\r\n            this.oldHpNum2.getComponent(cc.Label).string=\"\"+butes2[2]\r\n            if(butes2[2]==0){\r\n                this.oldHpNum1.parent.active=false\r\n                this.oldHpNum2.parent.active=false\r\n            }\r\n\r\n\r\n            this.oldAtkNum1.getComponent(cc.Label).string=\"\"+butes1[0]\r\n            this.oldAtkNum2.getComponent(cc.Label).string=\"\"+butes2[0]\r\n\r\n            if(butes2[0]==0){\r\n                this.oldAtkNum1.parent.active=false\r\n                this.oldAtkNum2.parent.active=false\r\n            }\r\n\r\n            this.oldDefanceNum1.getComponent(cc.Label).string=\"\"+butes1[1]\r\n            this.oldDefanceNum2.getComponent(cc.Label).string=\"\"+butes2[1]\r\n\r\n            if(butes2[1]==0){\r\n                this.oldDefanceNum1.parent.active=false\r\n                this.oldDefanceNum2.parent.active=false\r\n            }\r\n\r\n            this.skillNum1.getComponent(cc.Label).string=\"Lv\"+Quality\r\n            this.skillNum2.getComponent(cc.Label).string=\"Lv\"+Quality2\r\n\r\n            // console.log(\"___\",Quality2)\r\n            if(Quality2==6){\r\n                TaskManager.getInstance().emitTask(TaskItem.累计X件装备到达品质6);\r\n            }\r\n            TaskManager.getInstance().emitTask(TaskItem.合成X次装备);\r\n            TaskManager.getInstance().emitTask(TaskItem.升级1次装备品级);\r\n            let PM=PropManager.getInstance();\r\n            this.txt1.getComponent(cc.Label).string=\"[\"+PM.getPropQualityName(Quality)+\"]\"//\r\n            this.txt1.color=PM.getPropQualityTextColor(Quality-1);\r\n\r\n            this.txt2.getComponent(cc.Label).string=\"[\"+PM.getPropQualityName(Quality2)+\"]\"\r\n            this.txt2.color=PM.getPropQualityTextColor(Quality2-1);\r\n\r\n            // for (let index = 0; index < this.EquipList.length; index++) {\r\n            //     // if(this.EquipList[index].equip_level>1&&this.EquipList[index].sequence_id!=this.equip_info1.sequence_id){\r\n            //     //     this.Coin.push(this.EquipList[index].equip_level)\r\n            //     // }\r\n            //     //EquipmentManager.getInstance().removeEquipment(this.EquipList[index])\r\n            // }\r\n            //EquipmentManager.getInstance().Findonechangequality(this.equip_info1)\r\n        }\r\n    }\r\n\r\n    clickBtnClose()//关闭  刷新装备详情\r\n    {\r\n\r\n        let coin=0\r\n        for (let index = 0; index < this.Coin.length; index++) {\r\n            coin+=EquipmentLevelUpCostManager.getInstance().getCoinCostAll(this.Coin[index])//升级所需要的金币\r\n        }\r\n        if(coin>0){\r\n            console.log(coin,this.Coin)\r\n            PropManager.getInstance().changePropNum(PropId.Coin,coin);\r\n            GameManager.getInstance().showGetTip(PropManager.getInstance().createPropItem(PropId.Coin,coin));\r\n        }\r\n        this.EqfiUI.getComponent(EquipInfoUi).refreshInfo(this.equip_info1)\r\n        this.node.active=false\r\n        this.node.parent.getComponent(MergeUi).clickBtnClose()\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}