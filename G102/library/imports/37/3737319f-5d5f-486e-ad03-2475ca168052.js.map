{"version":3,"sources":["assets\\Scripts\\Game\\Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { BossChallengeManager } from \"../Activity/BossChallenge\";\r\nimport BossGameUi from \"../Activity/BossGameUi\";\r\nimport EndlessgGameUi from \"../Activity/EndlessgGameUi\";\r\nimport { EndlessLevelsManager } from \"../Activity/EndlessLevels\";\r\nimport { GameMode, GameScene, GameState, IsDebug, JiaSu } from \"../Constants\";\r\nimport BuffDisplay from \"../copy/endlesschallenges/BuffDisplay\";\r\nimport GameData from \"../GameData\";\r\nimport GameManager from \"../GameManager\";\r\nimport { HeroManager } from \"../Hero/Data/HeroManager\";\r\nimport Hero from \"../Hero/Game/Hero\";\r\nimport { Hero_Type } from \"../Hero/Game/HeroConfig\";\r\nimport { LevelManager } from \"../Level/LevelManager\";\r\nimport { MissionLevelManager } from \"../Level/MissionLevel\";\r\nimport { Follow_Type } from \"../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../multiLanguage/FollowManager\";\r\nimport LanguageManager from \"../multiLanguage/LanguageManager\";\r\nimport TextLanguage from \"../multiLanguage/TextLanguage\";\r\nimport { DingYueManager } from \"../Payment/DingYueManager\";\r\nimport Pet from \"../Pet/Game/Pet\";\r\nimport { PropId } from \"../Prop/PropConfig\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport { MusicIndex, SoundIndex } from \"../Sound/AudioConstants\";\r\nimport { StorageKey } from \"../Storage/StorageConfig\";\r\nimport { TheStorageManager } from \"../Storage/StorageManager\";\r\nimport { TaskItem } from \"../Task/TaskEnum\";\r\nimport TaskManager from \"../Task/TaskManager\";\r\nimport MyTool from \"../Tools/MyTool\";\r\nimport TowerManager from \"../Tower/TowerManager\";\r\nimport RewardSSUi from \"../Tutorials/RewardSSUi\";\r\nimport TutorailsManager from \"../Tutorials/TutorailsManager\";\r\nimport { UIPath, UILayerLevel } from \"../UI/UIConfig\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport WallManager from \"../Wall/WallManager\";\r\nimport WeekCardUi from \"../WeekCard/WeekCardUi\";\r\nimport BuffStateManager from \"./BuffStateManager\";\r\nimport { GameEffectId, GameEffectsManager } from \"./GameEffectsManager\";\r\nimport { instance } from \"./TouchPlane/TouchPlane\";\r\nimport BuyBattlePotion from \"./Ui/BuyBattlePotion\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Game extends cc.Component {\r\n\r\n    @property([cc.SpriteFrame])\r\n    sp_rate: cc.SpriteFrame[] = [];\r\n\r\n    @property([cc.SpriteFrame])\r\n    sp_auto: cc.SpriteFrame[] = [];\r\n\r\n    @property([cc.SpriteFrame])\r\n    sp_wave: cc.SpriteFrame[] = [];\r\n\r\n    @property(cc.Prefab)\r\n    prefab_normal_wave: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    prefab_boss_wave: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    prefab_jiange: cc.Prefab = null;\r\n    /**当前波数节点 */\r\n    cur_wave_node: cc.Node = null;\r\n    cur_wave_sp: cc.Node = null;\r\n    wave_pos_x: number[] = [];\r\n    left_xx: number = 0;\r\n    dist_xx: number = 0;\r\n    one_width: number = 0;\r\n    // @property(cc.JsonAsset)\r\n    // zhen_xing:cc.JsonAsset=null;\r\n    /**是否解锁了速率 */\r\n    is_unlock_rate: boolean = true;\r\n    try_rate_ramain: number = 60 * 10;\r\n    is_try_rate: boolean = false;\r\n    /**是否解锁了自动战斗 */\r\n    is_unlock_auto: boolean = true;\r\n    try_auto_ramain: number = 60 * 10;\r\n    is_try_auto: boolean = false;\r\n    /**试用文本 */\r\n    @property(cc.Label)\r\n    try_auto_label: cc.Label = null;\r\n    /**试用文本 */\r\n    @property(cc.Label)\r\n    try_rate_label: cc.Label = null;\r\n    //测试\r\n    start_time: number = 0;\r\n    time_jishu: number = 0;\r\n    time_label: cc.Label = null;\r\n    bg0: cc.Node = null;\r\n    bg1: cc.Node = null;\r\n    dps_label: cc.Label = null;\r\n    //关卡进度条\r\n    level_progress: cc.ProgressBar = null;\r\n    level_label: cc.Label = null;\r\n    coin_label: cc.Label = null;\r\n    total_coin: number = 0;\r\n    endless_ts: EndlessgGameUi = null;\r\n    //当前背景使用的名称\r\n    cur_bg_name: string = 'bg2';\r\n\r\n    private bgSpeed: number = 50;\r\n\r\n    //战斗药水\r\n    @property(cc.Node)\r\n    battlepotion: cc.Node[] = [];//红色   绿色   蓝色\r\n    battlepotionPropId: PropId[] = [PropId.RedPotion, PropId.GreenPotion, PropId.BluePotion]//战斗药水的道具id\r\n    battlepotionstate: number[] = [1, 1, 1]//战斗药水在这一局是否使用了  默认每一个药水有一次使用的机会\r\n\r\n    bg2_wall: cc.Node;\r\n\r\n    onLoad() {\r\n        cc.director.getCollisionManager().enabled = true;\r\n        GameData.getInstance();\r\n        GameManager.getInstance().init(GameScene.game);\r\n        GameManager.getInstance().game = this;\r\n        this.adaptation();\r\n        //cc.director.resume();\r\n        //cc.director.getCollisionManager().enabledDebugDraw=true;\r\n        this.setBgImg();\r\n        if (TutorailsManager.getInstance().is_finish_game) {\r\n            this.loadHeros();\r\n        } else {\r\n            GameManager.getInstance().loadTutorailsHeroData();\r\n        }\r\n        if (DingYueManager.getInstance().getWeekInfo()) {\r\n            this.is_unlock_auto = DingYueManager.getInstance().getWeekInfo().is_buy;\r\n        }\r\n        if (DingYueManager.getInstance().getWeekInfo()) {\r\n            this.is_unlock_rate = DingYueManager.getInstance().getWeekInfo().is_buy;\r\n        }\r\n\r\n\r\n        if (!this.is_unlock_rate) {\r\n            GameManager.getInstance().setBtnSetupRate(1, false);\r\n        }\r\n        if (!this.is_unlock_auto) {\r\n            GameManager.getInstance().setAutoFighting(false, false);\r\n        }\r\n        this.try_auto_ramain = TheStorageManager.getInstance().getInt(StorageKey.try_auto_fight_remain, 60 * 10);\r\n        this.try_rate_ramain = TheStorageManager.getInstance().getInt(StorageKey.try_rate_fight_remain, 60 * 10);\r\n        this.setTryAutoLabel();\r\n        this.setTryRateLabel();\r\n        GameManager.getInstance().setGameRate(1);\r\n        instance.on(cc.Node.EventType.TOUCH_END, this.onTouchEndByJoy, this);\r\n    }\r\n    protected onDestroy(): void {\r\n        instance.off(cc.Node.EventType.TOUCH_END, this.onTouchEndByJoy, this);\r\n    }\r\n    start() {\r\n        this.showLoading();\r\n        //this.startTest();\r\n        GameManager.getInstance().music_manager.playMusic(MusicIndex.BGM_Battle);\r\n        GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.Null, 4);\r\n        GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.ui_monster_warning, 1);\r\n        this.setBtnAuto();\r\n        this.setBtnRateShow();\r\n        this.initLevelShow();\r\n\r\n        if (TutorailsManager.getInstance().is_finish_game == false) {\r\n            UIManager.getInstance().preloadUiByPath(UIPath.RewardSSUI);\r\n            UIManager.getInstance().preloadUiByPath(UIPath.StoreHeroShowUi);\r\n        }\r\n    }\r\n\r\n    testCamera() {\r\n        // 创建渲染纹理，并设置纹理大小同显示屏(showSprite)大小一样\r\n        let texture = new cc.RenderTexture();\r\n        texture.initWithSize(300, 240);\r\n        cc.find('Canvas/TestCamera').getComponent(cc.Camera).targetTexture = texture;\r\n        let showSprite = cc.find('Canvas/Test/showRoot/showSprite');\r\n        showSprite.getComponent(cc.Sprite).spriteFrame.setTexture(texture);\r\n    }\r\n\r\n    private adaptation() {\r\n        //上下模块\r\n        let topUi = cc.find('Canvas/Ui_Root/top_ui');\r\n        let wp = cc.winSize;\r\n        topUi.y = wp.height / 2;\r\n\r\n        //\r\n        this.time_label = topUi.getChildByName('timeLabel').getComponent(cc.Label);\r\n        this.level_progress = topUi.getChildByName('levelProgressBar').getComponent(cc.ProgressBar);\r\n        this.level_progress.progress = 0;\r\n        this.level_label = topUi.getChildByName('levelLabel').getComponent(cc.Label);\r\n        this.coin_label = topUi.getChildByName('iconBg').getChildByName('coinLabel').getComponent(cc.Label);\r\n        this.dps_label = topUi.getChildByName('dpsLabel').getComponent(cc.Label);\r\n        //城墙\r\n        let wallBg = this.node.getChildByName('wall_bg');\r\n        wallBg.y = -(cc.winSize.height / 2) + wallBg.height / 2;\r\n        //hp\r\n        let hp = cc.find('Canvas/Ui_Root/hp_root');\r\n        hp.y = -wp.height / 2 + hp.height - 27;//27是血条的坐标\r\n        this.bg0 = this.node.getChildByName('bg0');\r\n        this.bg1 = this.node.getChildByName('bg1');\r\n        this.bg0.y = cc.winSize.height / 2 - this.bg0.height / 2;\r\n        this.bg1.y = this.bg0.y + this.bg0.height;\r\n        //上碰撞点\r\n        //cc.find('Canvas/wall_root/wall_top').y=topUi.y;\r\n    }\r\n\r\n    showLoading() {\r\n        let bgLoading = UIManager.getInstance().getLoadingNode();\r\n        bgLoading.active = true;\r\n        let loadingBar = bgLoading.getChildByName('ProgressBar').getComponent(cc.ProgressBar);\r\n        let loadLabel = loadingBar.node.getChildByName('loadLabel').getComponent(cc.Label);\r\n        loadingBar.progress = GameManager.getInstance().cur_load_progress;\r\n        let loadingSchedule = () => {\r\n            loadingBar.progress += 0.005;\r\n            loadLabel.string = (loadingBar.progress * 100).toFixed(0) + '%';\r\n            if (loadingBar.progress >= 1) {\r\n                loadingBar.progress = 1;\r\n                this.unschedule(loadingSchedule);\r\n                loadingSchedule = null;\r\n                this.checkStartGame();\r\n            }\r\n        };\r\n        this.schedule(loadingSchedule, 0.02);\r\n    }\r\n\r\n    checkStartGame() {\r\n        if (Hero.cur_loaded_num >= Hero.max_load_num) {\r\n            let bgLoading = UIManager.getInstance().getLoadingNode();\r\n            bgLoading.active = false;\r\n            this.startGame();\r\n            if (GameManager.getInstance().cur_game_mode == GameMode.Endless) {\r\n                FollowManager.getInstance().followEvent(Follow_Type.开始无尽挑战次数);\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战X次无尽挑战);\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战1次无尽挑战);\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战3次无尽挑战);\r\n                let num\r\n                // let totalnum\r\n                // totalnum=TheStorageManager.getInstance().getNumber(StorageKey.TotalUnlimitedChallengeTimes,0);\r\n                num = TheStorageManager.getInstance().getNumber(StorageKey.UnlimitedChallengeTimes, 3);\r\n                num--;\r\n                // totalnum++\r\n                // TheStorageManager.getInstance().setItem(StorageKey.TotalUnlimitedChallengeTimes,totalnum);\r\n                TheStorageManager.getInstance().setItem(StorageKey.UnlimitedChallengeTimes, num);\r\n                let wavenumber = TheStorageManager.getInstance().getNumber(StorageKey.UnlimitedChallengeDamage, 0)\r\n                let Round = EndlessLevelsManager.getInstance().getRound(wavenumber)//回合数\r\n\r\n                if (Round - 1 > 0) {\r\n                    BuffDisplay.surplusnumber = (Round - 2)\r\n                    GameManager.getInstance().showBtnBuff(1);//Buff选择弹窗\r\n                } else {\r\n                    BuffDisplay.surplusnumber = -1\r\n                }\r\n                //console.log(\"buff:\",BuffDisplay.surplusnumber,Round)\r\n            }\r\n        } else {\r\n            this.scheduleOnce(() => {\r\n                this.checkStartGame();\r\n            }, 0.2);\r\n        }\r\n    }\r\n    private indexLoad: Array<number> = [2, 1, 3, 0, 4];\r\n    loadHeros() {\r\n        //获取队列\r\n        Hero.max_load_num = 0;\r\n        Hero.cur_loaded_num = 0;\r\n        Pet.max_load_num = 0;\r\n        Pet.cur_loaded_num = 0;\r\n        let teamList = HeroManager.getInstance().getTeamList(GameManager.getInstance().cur_game_mode);\r\n\r\n\r\n        for (let i = 0; i < teamList.length; i++) {\r\n            let heroType = teamList[this.indexLoad[i]];\r\n            if (heroType > 0) {\r\n                this.loadHero(heroType, this.indexLoad[i])\r\n            }\r\n        }\r\n        // let heroRoot=cc.find('Canvas/Hero_Root');\r\n        // for(let i=0; i<heroRoot.childrenCount; i++){\r\n        //     let hero=heroRoot.children[i].getComponent(Hero);\r\n\r\n        // }\r\n        //预加载弓手Hero_Root\r\n        // if (TutorailsManager.getInstance().is_finish_game == false && LevelManager.getInstance().start_level == 5) {\r\n        //     cc.resources.load('heros/hero8');\r\n        // }\r\n    }\r\n    private indexData: Array<number> = [3, 1, 0, 2, 4];\r\n    loadHero(heroType: Hero_Type, posIndex: number, callback?: Function) {\r\n        Hero.max_load_num++;\r\n        let xIndexTepm = posIndex;\r\n        let yIndexTepm = posIndex;\r\n        if (posIndex == 0) {\r\n            xIndexTepm = 1;\r\n        }\r\n        if (posIndex == 4) {\r\n            xIndexTepm = 3;\r\n            yIndexTepm = 0;\r\n        }\r\n\r\n        if (posIndex == 3) {\r\n            yIndexTepm = 1;\r\n        }\r\n        let posX = xIndexTepm * 45 - 90;\r\n        let posY = yIndexTepm * 60 - 120;\r\n        cc.resources.load('heros/hero' + heroType, cc.Prefab, (error: Error, assets: cc.Prefab) => {\r\n            if (error) {\r\n                console.log(error);\r\n                return;\r\n            }\r\n            let node = cc.instantiate(assets);\r\n            node.parent = cc.find('Canvas/Hero_Root');\r\n            node.x = posX;\r\n            let hp = cc.find('Canvas/Ui_Root/hp_root');\r\n            node.y = hp.y + posY + 150;\r\n            node.getComponent(Hero).targetX = node.x;\r\n            node.getComponent(Hero).posX = node.x;\r\n\r\n            node.setSiblingIndex(this.indexData[posIndex]);\r\n            BuffStateManager.getInstance().createBuffRoot(cc.v2(posX, node.y + 150), heroType);\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    showKaiZhan() {\r\n        let kaiZhan = cc.find('Canvas/Ui_Root/KaiZhan');\r\n        kaiZhan.active = true;\r\n        let spine = kaiZhan.getChildByName('KaiZhan').getComponent(sp.Skeleton);\r\n        let anima = spine.setAnimation(0, 'KaiZhan', false);//YX_Kaizhan\r\n        spine.setTrackEventListener(anima, (entry: sp.spine.TrackEntry, event) => {\r\n            if (event.data.name == 'Attack') {\r\n                GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_Kaizhan);\r\n            }\r\n        });\r\n        spine.setCompleteListener(() => {\r\n            spine.setCompleteListener(null);\r\n            kaiZhan.active = false;\r\n        });\r\n    }\r\n    StatusBattlePotion() {\r\n        //刷新战斗药水的状态\r\n        for (let battlepotionindex = 0; battlepotionindex < this.battlepotion.length; battlepotionindex++) {\r\n            //数量\r\n            let battlepotionnumber = PropManager.getInstance().getPropNum(this.battlepotionPropId[battlepotionindex])\r\n            //数量改变\r\n            this.battlepotion[battlepotionindex].getChildByName(\"Redtxt\").getComponent(cc.Label).string = \"x\" + battlepotionnumber\r\n            this.battlepotion[battlepotionindex].getChildByName(\"Battle_Lock\").active = false\r\n\r\n            if (battlepotionnumber == 0) {//数量为0变灰\r\n                this.battlepotion[battlepotionindex].getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"))\r\n            } else {//数量大于0变亮\r\n                this.battlepotion[battlepotionindex].getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-sprite\"))\r\n            }\r\n            //这一局是否用了一次\r\n            let whetheruse = this.battlepotionstate[battlepotionindex]\r\n            if (whetheruse == 0) {//数量为0变灰\r\n                this.battlepotion[battlepotionindex].getChildByName(\"Battle_Lock\").active = true\r\n                this.battlepotion[battlepotionindex].getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"))\r\n            } else {//数量大于0变亮\r\n                this.battlepotion[battlepotionindex].getChildByName(\"Battle_Lock\").active = false\r\n                this.battlepotion[battlepotionindex].getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-sprite\"))\r\n            }\r\n        }\r\n    }\r\n\r\n    startGame() {\r\n        // console.log(\"++++++++\")\r\n        this.StatusBattlePotion()\r\n        let gm = GameManager.getInstance();\r\n        gm.cur_game_state = GameState.Game_Playing;\r\n        this.showCoin();\r\n        this.showKaiZhan();\r\n        this.setBtnRateShow();\r\n        this.setBtnAuto();\r\n        let top = cc.find(\"Canvas/Ui_Root/top_ui\");\r\n\r\n        //let coinBg=cc.find('Canvas/Ui_Root/top_ui/iconBg');\r\n        switch (gm.cur_game_mode) {\r\n            case GameMode.Main: {\r\n                //coinBg.active=false;\r\n                top.getChildByName('curLabel').getComponent(cc.Label).string = GameManager.getInstance().fighting_info.title_name;\r\n                this.total_coin = MissionLevelManager.getInstance().getPassReward_Coin(LevelManager.getInstance().start_level);\r\n                FollowManager.getInstance().followEvent(Follow_Type.开始第N章玩家数 + MissionLevelManager.getInstance().getChapter(LevelManager.getInstance().start_level));\r\n                FollowManager.getInstance().followEvent(Follow_Type.开始挑战关卡 + LevelManager.getInstance().start_level);\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战1次关卡);\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战3次关卡);\r\n                top.getChildByName(\"levelLabeltxt\").getComponent(TextLanguage).setTextId(140017)\r\n                top.getChildByName(\"Boss\").active = false\r\n                this.scheduleOnce(() => {\r\n                    this.checkTutorails();\r\n                }, 0.5)\r\n\r\n                top.getChildByName(\"Endless_Btn_Buff\").active = false\r\n            } break;\r\n            case GameMode.Endless: {\r\n                // top.getChildByName(\"bg\").active=false;\r\n                // top.getChildByName(\"levelProgressBar\").active=false;\r\n                // top.getChildByName(\"curLabel\").active=false;\r\n                // top.getChildByName(\"levelLabel\").active=false;  \r\n                //coinBg.active=false;\r\n                GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.monster_zhiliao_halo_hit, 2);\r\n                top.getChildByName(\"levelLabeltxt\").getComponent(TextLanguage).setTextId(800018)//800018\r\n                top.getChildByName(\"Endless_Btn_Buff\").active = true\r\n                top.getChildByName(\"Boss\").active = false\r\n                //波数//GameManager.getInstance().fighting_info.title_name;\r\n                let wavenumber = TheStorageManager.getInstance().getNumber(StorageKey.UnlimitedChallengeDamage, 0)\r\n                top.getChildByName('curLabel').getComponent(cc.Label).string = \"\" + wavenumber\r\n\r\n                FollowManager.getInstance().followEvent(Follow_Type.开始BOSS挑战次数);\r\n                // this.scheduleOnce(function(){\r\n                //     let node=UIManager.getInstance().getNodeById(UIPath.CoinPop)\r\n                //     node.getComponent(CoinPop).initUi(PropId.Gem)\r\n                //     this.scheduleOnce(function(){\r\n                //         UIManager.getInstance().destroyNode(UIPath.CoinPop,node)\r\n                //     },0.5)\r\n                // },0.5)\r\n\r\n\r\n\r\n\r\n\r\n                // cc.resources.load(\"ui/game/endless_game_ui\", cc.Prefab, (error: Error, assets: cc.Prefab) => {\r\n                //     if (error) {\r\n                //         console.log(error);\r\n                //         return;\r\n                //     }\r\n                //     let node = cc.instantiate(assets);\r\n                //     top.getChildByName('BossHpRoot').addChild(node);\r\n                //     this.endless_ts = node.getComponent(EndlessgGameUi);\r\n                //     this.endless_ts.refreshData();\r\n                // });\r\n            } break;\r\n            case GameMode.Boss_Challenge: {\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战X次boss狩猎);\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战1次BOSS狩猎);\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战3次BOSS狩猎);\r\n                // top.getChildByName(\"bg\").active=false;\r\n                // top.getChildByName(\"levelProgressBar\").active=false;\r\n                // top.getChildByName(\"curLabel\").active=false; \r\n                // top.getChildByName(\"levelLabel\").active=false;\r\n                //coinBg.active=false;\r\n                let num\r\n                // let totalnum\r\n                // totalnum=TheStorageManager.getInstance().getNumber(StorageKey.TotalBossChallengeTimes,0);\r\n                num = TheStorageManager.getInstance().getNumber(StorageKey.BossChallengeTimes, 3);\r\n                num--;\r\n                // totalnum++\r\n                // TheStorageManager.getInstance().setItem(StorageKey.TotalBossChallengeTimes,totalnum);\r\n                TheStorageManager.getInstance().setItem(StorageKey.BossChallengeTimes, num);\r\n                this.level_label.string = '0/1';\r\n                top.getChildByName(\"Boss\").active = true\r\n                top.getChildByName(\"Endless_Btn_Buff\").active = false\r\n                cc.resources.load(\"ui/game/boss_game_ui\", cc.Prefab, (error: Error, assets: cc.Prefab) => {\r\n                    if (error) {\r\n                        console.log(error);\r\n                        return;\r\n                    }\r\n                    let node = cc.instantiate(assets);\r\n                    top.getChildByName('BossHpRoot').addChild(node);\r\n                    BossChallengeManager.getInstance().boss_challenge_ts = node.getComponent(BossGameUi);\r\n                    BossChallengeManager.getInstance().boss_challenge_ts.refreshData();\r\n                });\r\n                this.time_label.node.color = cc.Color.WHITE;\r\n                cc.find(\"Canvas/Ui_Root/top_ui/Boss/timeLabel\").color = cc.Color.WHITE\r\n                //top.getChildByName('iconTime').color=cc.Color.RED;\r\n                this.showRemainTime()\r\n            } break;\r\n            case GameMode.Tower: {\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战1次爬塔);\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战3次爬塔);\r\n                //coinBg.active=false;\r\n                TowerManager.is_show_tower = false;\r\n                top.getChildByName('curLabel').getComponent(cc.Label).string = GameManager.getInstance().fighting_info.title_name;\r\n            } break;\r\n            case GameMode.Maze: {\r\n                TaskManager.getInstance().emitTask(TaskItem.挑战1次冰河探险);\r\n\r\n                TowerManager.is_show_tower = false;\r\n                top.getChildByName('curLabel').getComponent(cc.Label).string = GameManager.getInstance().fighting_info.title_name;\r\n                top.getChildByName(\"levelLabeltxt\").getComponent(TextLanguage).setTextId(140017)\r\n                top.getChildByName(\"Boss\").active = false\r\n                top.getChildByName(\"Endless_Btn_Buff\").active = false\r\n            } break;\r\n        }\r\n        PropManager.getInstance().saveAllPropNum(true);\r\n    }\r\n    clickBtnBuff() {//buff弹窗\r\n        //console.log(\"+++++++Buff展示弹窗\")\r\n        // GameManager.getInstance().showBtnBuff(0);//Buff展示弹窗\r\n        GameManager.getInstance().showBtnBuff(0);//Buff选择弹窗\r\n        if (IsDebug) {\r\n            GameManager.getInstance().all_hero.forEach((v, k) => {\r\n                console.log(k + \",主动技能冷却时间:\" + v.skill_total_time + \",攻速:\" + 1 / v.hero_data.gongji_jiange + \"增伤：\" + v.hero_data.all_increase_damage, v.hero_data);\r\n            });\r\n            console.log(WallManager.getInstance().getMainWall().getAttributeData());\r\n        }\r\n    }\r\n\r\n    setBgImg() {\r\n        ///let level=LevelManager.getInstance().start_level;\r\n        // let bg0 = this.node.getChildByName('bg0');\r\n        let wallBg = this.node.getChildByName('wall_bg');\r\n        let wallDown = wallBg.getChildByName('wall_down');\r\n        //适配坐标\r\n        // let hp=cc.find('Canvas/Ui_Root/wall_root');\r\n        // wallBg.y=hp.y+108;\r\n        GameManager.getInstance().enemy_att_y = wallBg.y + wallDown.y + wallDown.height / 2;\r\n        this.bg0.y = cc.winSize.height / 2 - this.bg0.height / 2;\r\n        this.bg1.y = this.bg0.y + this.bg0.height;\r\n        //章\r\n        //let name=LevelManager.getLevelName(level);\r\n        let fightingInfo = GameManager.getInstance().fighting_info;\r\n        let bgName = fightingInfo.bg_name;\r\n        this.cur_bg_name = bgName;\r\n        cc.resources.load(bgName, cc.SpriteFrame, (error: Error, assets: cc.SpriteFrame) => {\r\n            if (error) {\r\n                console.log(error);\r\n                return;\r\n            }\r\n            this.bg0.getComponent(cc.Sprite).spriteFrame = assets;\r\n            this.bg1.getComponent(cc.Sprite).spriteFrame = assets;\r\n        });\r\n        cc.resources.load(fightingInfo.wall_name, cc.SpriteFrame, (error: Error, assets: cc.SpriteFrame) => {\r\n            if (error) {\r\n                console.log(error);\r\n                return;\r\n            }\r\n            wallBg.getChildByName('bg2_wall').getComponent(cc.Sprite).spriteFrame = assets;\r\n            this.bg2_wall = wallBg.getChildByName('bg2_wall');\r\n            //let bc = wallBg.getChildByName('wall_down').getComponent(cc.BoxCollider);\r\n            // this.scheduleOnce(() => {\r\n            //     bc.size = wallBg.getContentSize();\r\n            //     GameManager.getInstance().enemy_att_y = wallBg.y + bc.node.y + bc.node.height / 2;\r\n            // }, 0.5);\r\n        });\r\n    }\r\n\r\n    showBaoxiang() {\r\n        //根据当前所在波数显示\r\n\r\n    }\r\n\r\n    startNextLevel() {\r\n        this.initLevelShow();\r\n        this.showDps();\r\n        this.showLevelProgress();\r\n        if (GameManager.getInstance().cur_game_mode == GameMode.Main) {\r\n            this.start_time = 0;\r\n        }\r\n        this.showTime();\r\n        this.startGame();\r\n        this.showCoin();\r\n        if (this.cur_bg_name != GameManager.getInstance().fighting_info.bg_name) {\r\n            this.setBgImg();\r\n        }\r\n    }\r\n\r\n    setProgress() {\r\n        let bgLoading = cc.find('Canvas/Ui_Root/bg_loading');\r\n        bgLoading.active = true;\r\n        //开始加载关卡所需的怪物\r\n        let progress = bgLoading.getChildByName('ProgressBar').getComponent(cc.ProgressBar);\r\n        progress.progress = 0.0;\r\n    }\r\n\r\n    clickBtnDouble(btn: cc.Event.EventTouch) {\r\n        FollowManager.getInstance().followEvent(Follow_Type.二倍速点击次数);\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        if (this.is_unlock_rate == false && this.try_rate_ramain <= 0) {\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(1400108));\r\n            GameManager.getInstance().cur_game_state = GameState.Game_Pause;\r\n            UIManager.getInstance().showUiDialog(UIPath.WeekCard, UILayerLevel.One, {\r\n                onCompleted: (uiNode) => {\r\n                    uiNode.getComponent(WeekCardUi).refreshUi();\r\n                    uiNode.getComponent(WeekCardUi).init({\r\n                        onClose: () => {\r\n                            GameManager.getInstance().cur_game_state = GameState.Game_Playing;\r\n                            this.is_unlock_auto = DingYueManager.getInstance().getWeekInfo().is_buy;\r\n                            this.is_unlock_rate = DingYueManager.getInstance().getWeekInfo().is_buy;\r\n                            if (this.is_unlock_rate) {\r\n                                GameManager.getInstance().setBtnSetupRate(2);\r\n                                this.setTryAutoLabel();\r\n                                this.setTryRateLabel();\r\n                                this.setBtnRateShow();\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            return;\r\n        } else {\r\n            if (GameManager.getInstance().getBtnSetupRate() == 1) {\r\n                GameManager.getInstance().setBtnSetupRate(2);\r\n                //启动试用\r\n                if (this.is_unlock_rate == false && this.try_rate_ramain > 0) {\r\n                    this.is_try_rate = true;\r\n                }\r\n            } else {\r\n                GameManager.getInstance().setBtnSetupRate(1);\r\n                //关闭试用\r\n                if (this.is_unlock_rate == false) {\r\n                    this.is_try_rate = false;\r\n                }\r\n            }\r\n        }\r\n        this.setBtnRateShow();\r\n    }\r\n\r\n    clickBtnAuto() {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        FollowManager.getInstance().followEvent(Follow_Type.自动战斗点击次数);\r\n        if (this.is_unlock_auto == false && this.try_auto_ramain <= 0) {\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(1400107));\r\n            GameManager.getInstance().cur_game_state = GameState.Game_Pause;\r\n            UIManager.getInstance().showUiDialog(UIPath.WeekCard, UILayerLevel.One, {\r\n                onCompleted: (uiNode) => {\r\n                    uiNode.getComponent(WeekCardUi).refreshUi();\r\n                    uiNode.getComponent(WeekCardUi).init({\r\n                        onClose: () => {\r\n                            GameManager.getInstance().cur_game_state = GameState.Game_Playing;\r\n                            this.is_unlock_auto = DingYueManager.getInstance().getWeekInfo().is_buy;\r\n                            this.is_unlock_rate = DingYueManager.getInstance().getWeekInfo().is_buy;\r\n                            if (this.is_unlock_auto) {\r\n                                GameManager.getInstance().setAutoFighting(true);\r\n                                this.setTryAutoLabel();\r\n                                this.setTryRateLabel();\r\n                                this.setBtnAuto();\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            return;\r\n        }\r\n        if (this.is_unlock_auto == false && this.try_auto_ramain > 0) {\r\n            //有剩余时间，启用/关闭试用\r\n            this.is_try_auto = !GameManager.getInstance().auto_fighting;\r\n            if (this.is_try_auto == false) {\r\n                //关闭，那就关闭计时\r\n                this.try_auto_ramain = Math.floor(this.try_auto_ramain)\r\n                TheStorageManager.getInstance().setItem(StorageKey.try_auto_fight_remain, this.try_auto_ramain);\r\n            }\r\n        }\r\n        GameManager.getInstance().setAutoFighting(!GameManager.getInstance().auto_fighting);\r\n        this.setBtnAuto();\r\n    }\r\n\r\n    clickBtnPause() {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.try_auto_ramain = Math.floor(this.try_auto_ramain)\r\n        TheStorageManager.getInstance().setItem(StorageKey.try_auto_fight_remain, this.try_auto_ramain);\r\n        this.try_rate_ramain = Math.floor(this.try_rate_ramain)\r\n        TheStorageManager.getInstance().setItem(StorageKey.try_rate_fight_remain, this.try_rate_ramain);\r\n        // GameManager.getInstance().wall_data.changeHp(-GameManager.getInstance().wall_data.getMaxHp()*0.65);\r\n        GameManager.getInstance().showGamePause();//暂停\r\n        // GameManager.getInstance().showGameWin();//胜利\r\n        // GameManager.getInstance().showGameLose();//失败\r\n        //cc.log(cc.assetManager.assets.count);\r\n        // if(IsDebug){\r\n        //     UIManager.getInstance().showUiDialog(UIPath.RewardSSUI,UILayerLevel.One,{onCompleted:(uiNode)=> {\r\n        //         uiNode.getComponent(RewardSSUi).initData(1);\r\n        //     }});\r\n        // }\r\n    }\r\n\r\n    clickBtnTest1() {\r\n        //SkillManager.getInstance().releaseSkill();\r\n    }\r\n\r\n    clickBtnTest2() {\r\n        // let boss=BossManager.getInstance().node.getChildByName('boss1');\r\n        // if(boss){\r\n        //     boss.getComponent(BullDemon).startSkill();\r\n        // }\r\n        GameManager.getInstance().showBossWarning();\r\n    }\r\n\r\n    clickBtnReplay() {\r\n        // let posX=Math.random()*400-200;\r\n        // let posY=Math.random()*400-200;\r\n        // let pos=cc.v2(posX,posY);\r\n        // let bx=GameManager.getInstance().enemy_manager.createBaoXiangGuai(pos);\r\n        // bx.getComponent(BaoXiangGuai).init(new LevelBuff());        \r\n    }\r\n\r\n    clickBtnBattlepotion(event, type) {//战斗药水按钮   红   绿    蓝\r\n        let num = type\r\n        let battlepotionnumber = PropManager.getInstance().getPropNum(this.battlepotionPropId[num])\r\n\r\n        if (this.battlepotionstate[num] == 0) {//这局已经用过了   飘字\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(100130), 3);\r\n        } else {//如果没有用过\r\n            if (battlepotionnumber == 0) {//数量不够 弹窗购买弹窗        如果钻石的数量够，直接购买之后使用  \r\n                UIManager.getInstance().showUiDialog(UIPath.BuyBattlePotion, UILayerLevel.One, {\r\n                    onCompleted: (uiNode) => {\r\n                        uiNode.getComponent(BuyBattlePotion).init({\r\n                            onClose: () => {\r\n\r\n                            }\r\n                        });\r\n                        uiNode.getComponent(BuyBattlePotion).initUi(type)\r\n                    },\r\n                });\r\n                // if(PayManager.getInstance().getPayNum('c301')<=0){\r\n                //     //首充没有完成    如果首充没有购买就弹出首充\r\n                //     UIManager.getInstance().showUiDialog(UIPath.FirstCharge,UILayerLevel.Two,{onCompleted:(uiNode)=> {\r\n                //         uiNode.getComponent(PayFirstChargeUi).init({\r\n                //             onClose:() => {\r\n\r\n                //             }\r\n                //         });\r\n                //     },});\r\n                // }else{\r\n                //     //首充完成了   弹出钻石购买\r\n                //     UIManager.getInstance().showUiDialog(UIPath.CoinPop,UILayerLevel.Two,{onCompleted:(uiNode)=> {\r\n                //         uiNode.getComponent(CoinPop).init({\r\n                //             onClose:()=>{\r\n\r\n                //             }\r\n                //         })\r\n                //         uiNode.getComponent(CoinPop).initUi(PropId.Gem)\r\n                //     },});\r\n                // }\r\n\r\n            } else {\r\n                //console.log(\"使用道具:\",num)\r\n                if (num == 0) {\r\n                    this.clickBtnRed()\r\n                }\r\n                if (num == 1) {\r\n                    this.clickBtnGreen()\r\n                }\r\n                if (num == 2) {\r\n                    this.clickBtnBlue()\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    clickBtnRed() {\r\n        //console.log(\"道具：红\")\r\n    }\r\n    clickBtnGreen() {\r\n        //console.log(\"道具：绿\")\r\n    }\r\n    clickBtnBlue() {\r\n        //console.log(\"道具：蓝\")\r\n    }\r\n\r\n\r\n\r\n    setTryAutoLabel() {\r\n        this.try_auto_label.node.active = this.try_auto_ramain > 0 && LevelManager.getInstance().finish_level >= 5 && this.is_unlock_auto == false;\r\n        this.try_auto_label.string = MyTool.getTimeStr(Math.floor(this.try_auto_ramain))\r\n    }\r\n\r\n    setTryRateLabel() {\r\n        this.try_rate_label.node.active = this.try_rate_ramain > 0 && LevelManager.getInstance().finish_level >= 5 && this.is_unlock_rate == false;\r\n        this.try_rate_label.string = MyTool.getTimeStr(Math.floor(this.try_rate_ramain))\r\n    }\r\n\r\n    setBtnRateShow() {\r\n        let rate = cc.find('Canvas/Ui_Root/btnRate');\r\n        if (this.is_unlock_rate == true || this.try_rate_ramain > 0) {\r\n            let rateNum = GameManager.getInstance().getBtnSetupRate();\r\n            rate.getComponent(cc.Sprite).spriteFrame = this.sp_rate[rateNum - 1];\r\n        } else {\r\n            rate.getComponent(cc.Sprite).spriteFrame = this.sp_rate[0];\r\n        }\r\n        this.try_rate_ramain = Math.floor(this.try_rate_ramain)\r\n        TheStorageManager.getInstance().setItem(StorageKey.try_rate_fight_remain, this.try_rate_ramain);\r\n        rate.active = LevelManager.getInstance().finish_level >= 5;\r\n    }\r\n\r\n    setBtnAuto() {\r\n        let auto = cc.find('Canvas/Ui_Root/btnAuto');\r\n        let autoNum = GameManager.getInstance().auto_fighting ? 1 : 0;\r\n        auto.getComponent(cc.Sprite).spriteFrame = this.sp_auto[autoNum];\r\n        if (this.is_unlock_auto) {\r\n            TheStorageManager.getInstance().setItem(StorageKey.AutoFighting, autoNum);\r\n        }\r\n        auto.active = LevelManager.getInstance().finish_level >= 5;\r\n    }\r\n\r\n    showTime() {\r\n        let shi = Math.floor(this.start_time / 3600);\r\n        let shiStr = '0' + shi;\r\n        if (shi >= 10) {\r\n            shiStr = '' + shi;\r\n        }\r\n        let fen = Math.floor((this.start_time - shi * 3600) / 60);\r\n        let fenStr = '0' + fen;\r\n        if (fen >= 10) {\r\n            fenStr = '' + fen;\r\n        }\r\n        let miao = this.start_time % 60;\r\n        let miaoStr = '0' + miao;\r\n        if (miao >= 10) {\r\n            miaoStr = '' + miao;\r\n        }\r\n        this.time_label.string = shiStr + ':' + fenStr + ':' + miaoStr;\r\n        if (GameManager.getInstance().cur_game_mode == GameMode.Boss_Challenge) {\r\n            cc.find(\"Canvas/Ui_Root/top_ui/Boss/timeLabel\").getComponent(cc.Label).string = \"\" + shiStr + ':' + fenStr + ':' + miaoStr;\r\n        }\r\n    }\r\n\r\n    showRemainTime() {\r\n        let remainTime = 90 - this.start_time;\r\n        let shi = Math.floor(remainTime / 3600);\r\n        let shiStr = '0' + shi;\r\n        if (shi >= 10) {\r\n            shiStr = '' + shi;\r\n        }\r\n        let fen = Math.floor((remainTime - shi * 3600) / 60);\r\n        let fenStr = '0' + fen;\r\n        if (fen >= 10) {\r\n            fenStr = '' + fen;\r\n        }\r\n        let miao = remainTime % 60;\r\n        let miaoStr = '0' + miao;\r\n        if (miao >= 10) {\r\n            miaoStr = '' + miao;\r\n        }\r\n        this.time_label.string = shiStr + ':' + fenStr + ':' + miaoStr;\r\n        if (GameManager.getInstance().cur_game_mode == GameMode.Boss_Challenge) {\r\n            cc.find(\"Canvas/Ui_Root/top_ui/Boss/timeLabel\").getComponent(cc.Label).string = \"\" + shiStr + ':' + fenStr + ':' + miaoStr;\r\n        }\r\n        if (remainTime <= 0) {\r\n            GameManager.getInstance().showGameLose();\r\n        }\r\n    }\r\n\r\n    initLevelShow() {\r\n        let waveBg = cc.find('Canvas/Ui_Root/top_ui/waveBg');\r\n        this.cur_wave_node = waveBg.parent.getChildByName('cur_wave');\r\n        this.cur_wave_node.y = waveBg.y - 20;\r\n        this.cur_wave_node.x = -315;\r\n        this.dist_xx = -315;\r\n        this.wave_pos_x = new Array();\r\n        let waveTypes = GameManager.getInstance().fighting_info.getWaveTypes();\r\n        let len = waveTypes.length;\r\n        waveBg.removeAllChildren();\r\n        //算出每个的长度\r\n        let jiangeNum = len - 1;\r\n        let jiangeWidth = 4;\r\n        let jiangeTotalWidth = jiangeNum * jiangeWidth;\r\n        let waveTotalWidth = waveBg.width - 5 * 2 - jiangeTotalWidth;\r\n        let waveWidth = waveTotalWidth / len;\r\n        this.left_xx = -waveBg.width / 2 + 5;\r\n        let oneWidth = waveWidth + jiangeWidth;\r\n        this.one_width = oneWidth;\r\n        for (let i = 0; i < len; i++) {\r\n            let type = waveTypes[i];\r\n            let node: cc.Node = null;\r\n            switch (type) {\r\n                case 0: {\r\n                    node = cc.instantiate(this.prefab_normal_wave);\r\n                } break;\r\n                case 1: {\r\n                    node = cc.instantiate(this.prefab_boss_wave);\r\n                } break;\r\n            }\r\n            waveBg.addChild(node);\r\n            node.name = i.toString();\r\n            node.width = waveWidth;\r\n            node.x = this.left_xx + i * oneWidth;\r\n            node.y = 0;\r\n            node.getComponent(cc.Sprite).spriteFrame = this.sp_wave[0];\r\n            node.active = type > 0;\r\n            let jiangePosX = node.x + node.width + jiangeWidth / 2;\r\n            if (i != len - 1) {\r\n                let jiange = cc.instantiate(this.prefab_jiange);\r\n                jiange.x = jiangePosX;\r\n                jiange.y = 0;\r\n                waveBg.addChild(jiange);\r\n            }\r\n            this.wave_pos_x.push(jiangePosX);\r\n        }\r\n        this.showLevelProgress()\r\n    }\r\n\r\n    showLevelProgress() {\r\n        let gm = GameManager.getInstance();\r\n        switch (gm.cur_game_mode) {\r\n            case GameMode.Maze:\r\n            case GameMode.Tower:\r\n            case GameMode.Endless:\r\n            case GameMode.Main: {\r\n                // let allEnemyNum=MonsterManager.getInstance().total_monster_num;\r\n                // let killNum=MonsterManager.getInstance().killed_monster_num;\r\n                // let progress=(killNum/allEnemyNum);\r\n                // this.level_progress.progress=progress;\r\n                // this.level_label.string=killNum+'/'+allEnemyNum;    \r\n                //this.cur_wave_node.x=this.wave_pos_x[gm.cur_wave];\r\n                if (this.cur_wave_sp) {\r\n                    this.cur_wave_sp.width = this.one_width;\r\n                }\r\n                let waveBg = cc.find('Canvas/Ui_Root/top_ui/waveBg');\r\n                this.cur_wave_sp = waveBg.getChildByName(gm.cur_wave.toString());\r\n                let types = GameManager.getInstance().fighting_info.getWaveTypes();\r\n                this.cur_wave_sp.getComponent(cc.Sprite).spriteFrame = this.sp_wave[types[gm.cur_wave] + 1];\r\n                this.cur_wave_sp.active = true;\r\n                this.cur_wave_sp.width = 0;\r\n                let curWave = GameManager.getInstance().cur_wave;\r\n                //let prevWave=GameManager.getInstance().cur_wave-1;\r\n                let curXX = this.wave_pos_x[curWave];\r\n                //let prevXX=prevWave>=0?this.wave_pos_x[prevWave]:this.left_xx;\r\n                //let offsetXX=curXX-prevXX;        \r\n                this.dist_xx = curXX;\r\n                //waveBg.getC\r\n            } break;\r\n            case GameMode.Endless: {\r\n                if (this.endless_ts) {\r\n                    this.endless_ts.refreshData();\r\n                }\r\n            } break;\r\n            // case GameMode.Boss_Prsonal:{\r\n            //     if(this.boss_challenge_ts){\r\n            //         this.boss_challenge_ts.refreshData();\r\n            //     }\r\n            // }break;\r\n        }\r\n    }\r\n\r\n    showJianTouPos(per: number) {\r\n        // let curWave=GameManager.getInstance().cur_wave;\r\n        // let prevWave=GameManager.getInstance().cur_wave-1;\r\n        // let curXX=this.wave_pos_x[curWave];\r\n        // let prevXX=prevWave>=0?this.wave_pos_x[prevWave]:this.left_xx;\r\n        // let offsetXX=curXX-prevXX;        \r\n        // this.dist_xx=prevXX+offsetXX*per;\r\n    }\r\n\r\n    showCoin() {\r\n        // let allEnemyNum=MonsterManager.getInstance().total_monster_num;\r\n        // let killNum=MonsterManager.getInstance().killed_monster_num;\r\n        // this.coin_label.string=MyTool.getCoinDanwei(killNum/allEnemyNum*this.total_coin);\r\n    }\r\n\r\n    showDps() {\r\n        let total = 0;\r\n        let gg = GameManager.getInstance();\r\n        let len = gg.hero_skill_dps.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let skillDps = gg.hero_skill_dps[i];\r\n            let attackDps = gg.hero_attack_dps[i];\r\n            total += (skillDps + attackDps);\r\n        }\r\n        let dps = Math.round(total / this.start_time);\r\n        this.dps_label.string = MyTool.getCoinDanwei(dps);//        this.dps_label.string='DPS '+MyTool.getCoinDanwei(dps);\r\n        if (GameManager.getInstance().cur_game_mode == GameMode.Boss_Challenge) {\r\n            cc.find(\"Canvas/Ui_Root/top_ui/Boss/dpsLabel\").getComponent(cc.Label).string = \"\" + MyTool.getCoinDanwei(dps)\r\n        }\r\n\r\n\r\n        // if(IsDebug)\r\n        // {\r\n        //     let top=cc.find('Canvas/Ui_Root/top_ui');\r\n        //     let total=0;\r\n        //     let gg=GameManager.getInstance();\r\n        //     let len=gg.hero_skill_dps.length;\r\n        //     for(let i=0; i<len; i++)\r\n        //     {\r\n        //         let skillDps=gg.hero_skill_dps[i];\r\n        //         let attackDps=gg.hero_attack_dps[i];\r\n        //         total+=(skillDps+attackDps);\r\n        //         top.getChildByName('attLabel'+i).getComponent(cc.Label).string='攻击：'+attackDps;\r\n        //         top.getChildByName('skillLabel'+i).getComponent(cc.Label).string='技能：'+skillDps;\r\n        //     }\r\n        //     let dps=Math.round(total/this.start_time);\r\n        //     this.dps_label.string='DPS '+dps;\r\n        // }\r\n\r\n    }\r\n\r\n    targetX: number = 0;\r\n    easing: number = 0.2;\r\n    onTouchEndByJoy(event: cc.Event.EventTouch, data) {\r\n        this.targetX = (GameManager.getInstance().aniType - 2) * 150;\r\n    }\r\n\r\n\r\n    update(dt) {\r\n        if (GameManager.getInstance().cur_game_state == GameState.Game_Playing) {\r\n            this.time_jishu += dt;\r\n            if (this.time_jishu >= 1) {\r\n                this.time_jishu = 0;\r\n                this.start_time += 1;\r\n                switch (GameManager.getInstance().cur_game_mode) {\r\n                    case GameMode.Tower:\r\n                    case GameMode.Endless:\r\n                    case GameMode.Maze:\r\n                    case GameMode.Main: {\r\n                        this.showTime();\r\n                    } break;\r\n                    case GameMode.Boss_Challenge: {\r\n                        this.showRemainTime();\r\n                    } break;\r\n                }\r\n\r\n                this.showDps();\r\n            }\r\n            if (this.cur_wave_node.x < this.dist_xx) {\r\n                this.cur_wave_node.x += dt * 30;\r\n                this.cur_wave_sp.width = this.one_width - (this.dist_xx - this.cur_wave_node.x);\r\n                if (this.cur_wave_node.x > this.dist_xx) {\r\n                    this.cur_wave_node.x = this.dist_xx;\r\n                    this.cur_wave_sp.width = this.one_width;\r\n                }\r\n            }\r\n            let aDt = dt;\r\n            if (GameManager.getInstance().getGameRate() != 1) {\r\n                aDt = dt / 2;\r\n            }\r\n            if (aDt > 1) {\r\n                aDt = 1;\r\n            }\r\n            if (this.is_try_auto && this.try_auto_ramain > 0) {\r\n                this.try_auto_ramain -= aDt;\r\n                if (this.try_auto_ramain <= 0) {\r\n                    this.is_try_auto = false;\r\n                    this.try_auto_ramain = 0;\r\n                    GameManager.getInstance().setAutoFighting(false, false);\r\n                    this.setBtnAuto();\r\n                }\r\n                this.setTryAutoLabel();\r\n            }\r\n            if (this.is_try_rate && this.try_rate_ramain > 0) {\r\n                this.try_rate_ramain -= aDt;\r\n                if (this.try_rate_ramain <= 0) {\r\n                    this.is_try_rate = false;\r\n                    this.try_rate_ramain = 0;\r\n                    GameManager.getInstance().setBtnSetupRate(1, false);\r\n                    this.setBtnRateShow();\r\n                }\r\n                this.setTryRateLabel();\r\n            }\r\n            //背景循环\r\n            if (this.bg0 && this.bg1) {\r\n                this.bg1.y -= dt * this.bgSpeed;\r\n                this.bg0.y -= dt * this.bgSpeed;\r\n\r\n                if (this.bg0.y <= cc.winSize.height / 2 - this.bg0.height / 2 - cc.winSize.height) {\r\n                    this.bg0.y = this.bg1.y + this.bg0.height;\r\n                }\r\n\r\n                if (this.bg1.y <= cc.winSize.height / 2 - this.bg0.height / 2 - cc.winSize.height) {\r\n                    this.bg1.y = this.bg0.y + this.bg0.height;\r\n                }\r\n            }\r\n\r\n            if (this.bg2_wall) {\r\n                let vx: number = (this.targetX - this.bg2_wall.x) * this.easing;\r\n                this.bg2_wall.x += vx;\r\n            }\r\n\r\n        }\r\n       \r\n\r\n    }\r\n\r\n    // protected lateUpdate(dt: number): void {\r\n    //     if(this.cur_wave_node.x<this.dist_xx){\r\n\r\n    //     }\r\n\r\n    // }\r\n    /**教程 */\r\n    checkTutorails() {\r\n        this.scheduleOnce(() => {\r\n            if (TutorailsManager.getInstance().is_finish_game && LevelManager.getInstance().start_level == 1) {\r\n                if (TutorailsManager.getInstance().isShowTutorials(211)) {\r\n                    TutorailsManager.getInstance().is_tutorails_state = true;\r\n                    GameManager.getInstance().setGameRate(1 / JiaSu);\r\n                    TutorailsManager.getInstance().showTutorials(211, null, () => {\r\n                        TutorailsManager.getInstance().showTutorials(212, null, () => {\r\n                            TutorailsManager.getInstance().showTutorials(213, () => {\r\n                                TutorailsManager.getInstance().saveTutorials(211);\r\n                                TutorailsManager.getInstance().saveTutorials(212);\r\n                                TutorailsManager.getInstance().saveTutorials(213);\r\n                            }, () => {\r\n                                GameManager.getInstance().setGameRate(1);\r\n                            });\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        }, 1 * GameManager.getInstance().getGameRate());\r\n\r\n    }\r\n}\r\n"]}