{"version":3,"sources":["assets\\Scripts\\Tools\\RedTip.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ActivityManager, ActivityType } from \"../Activity/ActivityManager\";\r\nimport { FuncType, GameMode, IsDebug } from \"../Constants\";\r\nimport { EquipmentManager } from \"../Equipment/EquipmentManager\";\r\nimport GameData from \"../GameData\";\r\nimport GameManager from \"../GameManager\";\r\nimport { HeroManager } from \"../Hero/Data/HeroManager\";\r\nimport { FunctionDefinitionManager } from \"../JsonData/FunctionDefinition\";\r\nimport { OfflineRevenueManager } from \"../JsonData/OfflineRevenue\";\r\nimport { PayId, PayUiIndex } from \"../thirdParty/ThirdParty\";\r\nimport { EventManager, RedEventString, RedEventType } from \"./EventManager\";\r\nimport { EquipType } from \"../Equipment/EquipConfig\";\r\nimport { PayManager } from \"../Payment/PayManager\";\r\nimport { TheStorageManager } from \"../Storage/StorageManager\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport { MazeManager } from \"../Maze/MazeManager\";\r\nimport { StorageKey } from \"../Storage/StorageConfig\";\r\nimport { BattlePassDataManager } from \"../BattlePass/BattlePassData\";\r\nimport TaskManager from \"../Task/TaskManager\";\r\nimport { DingYueManager } from \"../Payment/DingYueManager\";\r\nimport { CumulativeRechargesManager } from \"../AccumulatedRecharge/CumulativeRecharges\";\r\nimport { PetManager } from \"../Pet/PetManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class RedTip extends cc.Component {\r\n    \r\n    @property({type:cc.Enum(RedEventType),tooltip:\"当前按钮自己的红点类型\"})\r\n    self_red_type:RedEventType=RedEventType.Btn_Main_SignIn;\r\n\r\n    @property({type:[cc.Enum(RedEventType)],tooltip:\"当前按钮所有上级的红点类型,静态节点挂载有redtip的\"})\r\n    super_red_type:RedEventType[]=[RedEventType.Btn_Main];\r\n\r\n    @property({type:[cc.Enum(RedEventType)],tooltip:\"当前按钮所有下级的红点类型,静态节点挂载有redtip的\"})\r\n    child_red_type:RedEventType[]=[RedEventType.Btn_Main];\r\n\r\n    //是否是广告按钮，广告按钮的话，红点展示一次就可以了\r\n    @property()\r\n    is_video_btn:boolean=false;\r\n    /**第一次显示时，是否自测 */\r\n    @property()\r\n    is_check_self:boolean=false;\r\n\r\n    show_num:number=0;\r\n    is_show_red:boolean=false;\r\n\r\n    //下级反馈false的次数\r\n    false_red_type:RedEventType[]=[];\r\n    //下级反馈的总次数\r\n    tip_num:RedEventType[]=[];\r\n\r\n    /**加载时，自注册事件，red_type需要在组件上预先设置 */\r\n    protected onLoad(): void {\r\n        this.registerEvent();\r\n    }\r\n\r\n    protected start(): void {\r\n        if(this.is_check_self){\r\n            this.checkSelf(true);\r\n            //this.tip_num=0;\r\n        }        \r\n    }\r\n    /**销毁时，删除事件，red_type需要在组件上预先设置 */\r\n    protected onDestroy(): void {\r\n        this.cancelEvent();\r\n    }\r\n    /**注册事件*/\r\n    registerEvent(){\r\n        EventManager.addRedEvent(RedEventString.RED_TIP,this.self_red_type,this.onChangeTip,this);\r\n        EventManager.addRedEvent(RedEventString.RED_CHECK,this.self_red_type,this.onCheck,this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this);\r\n        if(this.node._touchListener)\r\n        {\r\n            this.node._touchListener.setSwallowTouches(false);\r\n        }\r\n    }\r\n    /**取消事件*/\r\n    cancelEvent(){\r\n        EventManager.removeRedEvent(RedEventString.RED_TIP,this.self_red_type,this.onChangeTip,this);\r\n        EventManager.removeRedEvent(RedEventString.RED_CHECK,this.self_red_type,this.onCheck,this);\r\n        this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this);\r\n        // let tanhao=this.node.getChildByName('tanhao');\r\n        // if(tanhao)\r\n        // tanhao.removeFromParent();\r\n    }\r\n\r\n    onTouchEnd(){\r\n        if(this.is_show_red){\r\n            this.show_num++;\r\n            if(this.is_video_btn){\r\n                this.onChangeTip(false,this.self_red_type);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**更改红点事件类型,主要适用于同一个界面的同一个按钮，切换不同的关联类型时，比如角色页的升级按钮*/\r\n    changeRedType(redType:RedEventType){\r\n        if(redType!=this.self_red_type){\r\n            this.cancelEvent();\r\n            this.self_red_type=redType;\r\n            this.registerEvent();\r\n        }\r\n        \r\n    }\r\n    \r\n    /**当事件发生变化时回调\r\n     * isShow：是否显示红点，一般由下级通知\r\n     * redType:发送onChangeTip的红点类型红点类型\r\n     * */\r\n    onChangeTip(isShow:boolean,postRedType:RedEventType){\r\n        if(this.self_red_type==RedEventType.Btn_Main){\r\n            //cc.log('1::'+this.false_red_type.length);\r\n        }\r\n        this.is_show_red=isShow;\r\n        if(postRedType){\r\n            if(!this.tip_num.includes(postRedType)){\r\n                this.tip_num.push(postRedType);\r\n            }\r\n        }\r\n        if(isShow==true){\r\n            \r\n            this.addTip();\r\n            //如果显示红点，需要通知上级也要显示\r\n            this.super_red_type.forEach((redType)=>{\r\n                EventManager.postRedEvent(RedEventString.RED_TIP,redType,true);\r\n            })\r\n        }\r\n        else{\r\n            if(postRedType){\r\n                if(postRedType!=this.self_red_type){\r\n                    if(!this.false_red_type.includes(postRedType)){\r\n                        this.false_red_type.push(postRedType);\r\n                    }\r\n                    if(this.false_red_type.length>=this.child_red_type.length){                \r\n                        this.removeTip();\r\n                    }\r\n                }else{\r\n                    this.removeTip();                \r\n                }\r\n            }else{\r\n                this.removeTip();                \r\n            }        \r\n        }\r\n        //cc.log(\"我我我是\"+this.self_red_type+\",提示次数：:\"+this.tip_num);\r\n        if(this.tip_num.length>=this.child_red_type.length){\r\n            this.false_red_type=new Array();\r\n            this.tip_num=new Array();\r\n        }\r\n    }\r\n    /**主动检测一个红点事件是否能显示\r\n     *  如果有下级，则让下级进行检查，当没有自己下级的时候才开始检查自身\r\n     *  \r\n     *  一般由上级通知,也可主动调用\r\n     * */\r\n    onCheck(){\r\n        if(this.child_red_type.length>0){\r\n            this.false_red_type=new Array();\r\n            this.tip_num=new Array();\r\n            this.child_red_type.forEach((redType)=>{\r\n                EventManager.postRedEvent(RedEventString.RED_CHECK,redType,true);\r\n            })\r\n        }else{\r\n            //没有下级就检测自己，只有检查到为true时才上报\r\n            this.checkSelf(true);            \r\n        }\r\n        \r\n    }\r\n    /**\r\n     * 检测自己，基本所有的的类型都要有自测方案\r\n     * @param isPost 自测完毕后是否上报给自己的上级\r\n     * @param redType 红点类型ID。不传时，默认是自身id，传值时，用于上级向下级传达检测命令\r\n     * @returns 是否需要红点提示\r\n     */\r\n    checkSelf(isPost:boolean,redType:RedEventType=this.self_red_type):boolean{\r\n        let isTip=false;\r\n        switch(redType)\r\n        {\r\n            /**主城的 */\r\n            case RedEventType.Btn_Shop:{   \r\n                let gd=GameData.getInstance();      \r\n                isTip=gd.getHeroRecruitingRedTip()//||gd.getPetRecruitingRedTip()||gd.getEquipFreeRedTip()||gd.getGemFreeRedTip()||gd.getCoinFreeRedTip();\r\n            }break;\r\n            \r\n            // case RedEventType.Btn_City_Equip_1:{\r\n            //     isTip=EquipmentManager.getInstance().checkEquipMerge(EquipType.WuQi);\r\n            // }break;\r\n            // case RedEventType.Btn_City_Equip_2:{\r\n            //     isTip=EquipmentManager.getInstance().checkEquipMerge(EquipType.HuJia);\r\n            // }break;\r\n            // case RedEventType.Btn_City_Equip_3:{\r\n            //     isTip=EquipmentManager.getInstance().checkEquipMerge(EquipType.ShiPin);\r\n            // }break;\r\n            // case RedEventType.Btn_City_Equip_MergeAll:{\r\n            //     if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.ZhuangBeiHeCheng)){\r\n            //         isTip=false;\r\n            //         break;\r\n            //     }\r\n            //     for(let i=EquipType.WuQi; i<EquipType.Num; i++){\r\n            //         isTip=EquipmentManager.getInstance().checkEquipMerge(i);\r\n            //         if(isTip){\r\n            //             break;\r\n            //         }\r\n            //     }\r\n            // }break;\r\n            \r\n\r\n            case RedEventType.Btn_Task:{\r\n                this.child_red_type.forEach((redType)=>{\r\n                    let isT=this.checkSelf(false,redType);\r\n                    if(isT){\r\n                     isTip=true;\r\n                    }\r\n                 })\r\n            }break;\r\n            case RedEventType.Btn_Task_Daily:{\r\n                isTip=TaskManager.getInstance().getDailyTaskIsCanGet();                \r\n            }break;\r\n            case RedEventType.Btn_Task_Achievenment:{\r\n                isTip=TaskManager.getInstance().getAchievenmentTaskIsCanGet();\r\n            }break;\r\n            case RedEventType.Btn_Role:{\r\n                for(let i=0; i<this.child_red_type.length; i++){\r\n                    isTip=this.checkSelf(false,this.child_red_type[i]);\r\n                    if(isTip==true){\r\n                    break;\r\n                    }\r\n                }\r\n            }break;\r\n            case RedEventType.Btn_Role_List_1:\r\n            case RedEventType.Btn_Role_List_2:\r\n            case RedEventType.Btn_Role_List_3:\r\n            case RedEventType.Btn_Role_List_4:\r\n            case RedEventType.Btn_Role_List_5:\r\n            case RedEventType.Btn_Role_List_6:\r\n            case RedEventType.Btn_Role_List_7:\r\n            case RedEventType.Btn_Role_List_8:\r\n            case RedEventType.Btn_Role_List_9:\r\n            case RedEventType.Btn_Role_List_10:\r\n            case RedEventType.Btn_Role_List_11:\r\n            case RedEventType.Btn_Role_List_12:\r\n            {\r\n                let hm=HeroManager.getInstance();                \r\n                let heroType=HeroManager.getHeroTypeByRedType(redType);\r\n                let heroInfo=hm.getHeroInfo(heroType);\r\n                if(heroInfo!=null){                    \r\n                    //判断升级\r\n                    isTip=HeroManager.getInstance().checkUpgrade(heroType).is_can_up;               \r\n                    //判断升星\r\n                    if(!isTip){\r\n                        isTip=HeroManager.getInstance().checkUpStar(heroType);\r\n                    }\r\n                    //判断装备\r\n                    if(!isTip){\r\n                        for(let i=1; i<EquipType.Num; i++){\r\n                            isTip=EquipmentManager.getInstance().checkWear(heroType,i)\r\n                            if(isTip){\r\n                                break;\r\n                            }\r\n                        }                        \r\n                    }\r\n                    //判断宠物\r\n                    if(!isTip){\r\n                        isTip=PetManager.getInstance().checkRedTip(heroType);\r\n                    }\r\n                    //判断专武\r\n                    if(!isTip){\r\n                        isTip=HeroManager.getInstance().checkExUp(heroType);\r\n                    }\r\n                }else{\r\n                    //判断解锁\r\n                    isTip=HeroManager.getInstance().checkUnlock(heroType);\r\n                }\r\n            }break;\r\n            case RedEventType.Btn_Role_Info_UpgradeAll:{\r\n                //升级\r\n                let hm=HeroManager.getInstance();\r\n                let heroList = HeroManager.getInstance().getHeroList();\r\n                for(let i=0; i<heroList.length; i++){                    \r\n                    // let upData=hm.checkUpgrade(heroList[i].hero_type);\r\n                    // if(upData.is_can_up){\r\n                    //     isTip=true;\r\n                    //     break;\r\n                    // }\r\n                }\r\n            }break;            \r\n            case RedEventType.Btn_Role_Equip_WearAll:{\r\n                let em=EquipmentManager.getInstance();\r\n                let heroList = HeroManager.getInstance().getHeroList();\r\n                for(let i=0; i<heroList.length; i++){\r\n                    if(HeroManager.getInstance().getHeroLevel(heroList[i].hero_type)>0){\r\n                        let isCanWear=em.checkQuickWear(heroList[i].hero_type,false);\r\n                        if(isCanWear){\r\n                            isTip=true;\r\n                            break;\r\n                        }\r\n                    }                    \r\n                }\r\n            }break;\r\n            case RedEventType.Btn_Main:{\r\n                this.child_red_type.forEach((redType)=>{\r\n                   let isT=this.checkSelf(false,redType);\r\n                   if(isT){\r\n                    isTip=true;\r\n                   }\r\n                })\r\n            }break;                        \r\n            case RedEventType.Btn_Main_Spin:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.ZhuanPan)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                isTip=TheStorageManager.getInstance().getNumber(StorageKey.TurmtableFreeYes, 0)==1\r\n                // || TheStorageManager.getInstance().getNumber(StorageKey.TurmtableAd,0) < 10;                \r\n            }break;\r\n            case RedEventType.Btn_Main_Task:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.MeiRiRenWu)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                //设置奖励物品\r\n                // isTip=TaskManger.getInstance().getIsHaveGet();\r\n                }break;\r\n            case RedEventType.Btn_Main_Rank:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.PaiHangBang)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                \r\n            }break;\r\n        \r\n            case RedEventType.Btn_Main_SignIn:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.QianDao)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                isTip=GameData.getInstance().getIsSignToday();\r\n            }break;\r\n            case RedEventType.Btn_Main_SignIn_BtnGet:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.QianDao)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                isTip=GameData.getInstance().getIsSignToday();\r\n            }break;\r\n            case RedEventType.Btn_Main_Guaji:{    \r\n                //挂机按钮\r\n                isTip=this.checkSelf(false,RedEventType.Btn_Main_Guaji_Btn_GuaJi)                \r\n                //快速挂机是否有广告机会\r\n                if(!isTip){\r\n                    isTip=this.checkSelf(false,RedEventType.Btn_Main_Guaji_Btn_Fast);\r\n                }\r\n            }break;\r\n            case RedEventType.Btn_Main_Guaji_Btn_Fast:{\r\n                isTip=OfflineRevenueManager.getInstance().isCanAdFastGuaJi();\r\n            }break;  \r\n            case RedEventType.Btn_Main_Guaji_Btn_Fast_Ad:{\r\n                isTip=OfflineRevenueManager.getInstance().isCanAdFastGuaJi();\r\n            }break;\r\n            case RedEventType.Btn_Main_Guaji_Btn_GuaJi:{\r\n                isTip=OfflineRevenueManager.getInstance().isCanGuaJiRedTip();\r\n            }break;                       \r\n            case RedEventType.Btn_Map_Team_0:\r\n            case RedEventType.Btn_Map_Team_1:\r\n            case RedEventType.Btn_Map_Team_2:\r\n            case RedEventType.Btn_Map_Team_3:\r\n            case RedEventType.Btn_Map_Team_4:\r\n            {\r\n                if(GameManager.getInstance().cur_game_mode!=GameMode.Main){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                let teamList=HeroManager.getInstance().getTeamList(GameMode.Main);\r\n                let mNum=0;\r\n                for(let i=0; i<teamList.length; i++){\r\n                    if(teamList[i]>0){\r\n                        mNum++;\r\n                    }\r\n                }\r\n                let unlockNum=0;\r\n                let heroList = HeroManager.getInstance().getHeroList();\r\n                for(let i=0; i<heroList.length; i++){\r\n                    if(HeroManager.getInstance().getHeroLevel(heroList[i].hero_type)>0){\r\n                        unlockNum++;\r\n                    }\r\n                }\r\n                //没满员，并且解锁的数量比成员数量大\r\n                if(mNum<teamList.length && mNum<unlockNum){\r\n                    let chechIndex=redType-RedEventType.Btn_Map_Team_0;                \r\n                    let heroType=teamList[chechIndex];\r\n                    if(heroType<=0){\r\n                        //该位置空了\r\n                        isTip=true;\r\n                    }\r\n                }else{\r\n                    isTip=false;\r\n                }\r\n            }break;\r\n            case RedEventType.Btn_Main_Vip:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.VIP)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                //判断是否可以在未购买的情况下，显示一次。\r\n                let VipIdentity=TheStorageManager.getInstance().getNumber(StorageKey.VipIdentity,0) \r\n                if(VipIdentity==0){\r\n                    if(PayManager.getInstance().getFuncTodayShow(FuncType.VIP)<=0){\r\n                        isTip=true;\r\n                        break;\r\n                    }\r\n                }\r\n                let AllActivityNum = TheStorageManager.getInstance().getNumber(StorageKey.AllActivityNum,0);//总活跃度   \r\n                for (let itmeindex = 0; itmeindex < 15; itmeindex++) {\r\n                    let id=itmeindex+1                    \r\n                    \r\n                    let RequiredEx=BattlePassDataManager.getInstance().getRequiredExp(id)//所需活跃度\r\n                    if(RequiredEx<=AllActivityNum){\r\n                        let VipFreeRewardStatus = TheStorageManager.getInstance().getNumber(StorageKey.VipFreeRewardStatus+id,0);//vip免费奖励状态    0未领取,1已领取     0-14\r\n                        let VipAdvancedRewardStatus = TheStorageManager.getInstance().getNumber(StorageKey.VipAdvancedRewardStatus+id,0);//vip高级奖励状态    0未领取,1已领\r\n                        if(VipFreeRewardStatus==0){\r\n                            isTip=true;\r\n                            break;\r\n                        }\r\n                        if(VipAdvancedRewardStatus==0&&VipIdentity==1){\r\n                            isTip=true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }                \r\n            }break;\r\n            \r\n            case RedEventType.Btn_Main_ShouChong:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.FirstCharge)||PayManager.getInstance().getPayNum('c301')>0){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                isTip=PayManager.getInstance().getFuncTodayShow(FuncType.FirstCharge)<=0;\r\n            }break;\r\n            case RedEventType.Btn_Main_WeekCard:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.WeekCard)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                isTip=PayManager.getInstance().getFuncTodayShow(FuncType.WeekCard)<=0||(DingYueManager.getInstance().getWeekInfo().is_buy&&TheStorageManager.getInstance().getInt(StorageKey.WeekCardIsReceiveToday,0)<=0);\r\n            }break;\r\n            case RedEventType.Btn_Main_LeiChong:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.AccumulatedRecharge)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                isTip=PayManager.getInstance().getFuncTodayShow(FuncType.AccumulatedRecharge)<=0;\r\n                if(!isTip){\r\n                    let isCanGet:boolean=false;\r\n                    let rewarMap=CumulativeRechargesManager.getInstance().rewardMap;\r\n                    rewarMap.forEach((v,k)=>{\r\n                        if(isCanGet==false && v == 1){\r\n                            isCanGet=true;\r\n                        }\r\n                    });\r\n                    isTip=isCanGet;\r\n                }                                \r\n            }break;\r\n            case RedEventType.Btn_Activity:{\r\n                isTip=(FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.WuJinTiaoZhan)&&TheStorageManager.getInstance().getInt(StorageKey.UnlimitedChallengeTimes,0)>0)||(FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.GeRenBoss)&&TheStorageManager.getInstance().getInt(StorageKey.BossChallengeTimes,0)>0);\r\n            }break;\r\n            case RedEventType.Btn_Activity_Endless:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.WuJinTiaoZhan)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                isTip=ActivityManager.getInstance().getTicket(ActivityType.Endless)>0;\r\n            }break;\r\n            case RedEventType.Btn_Activity_Boss:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.GeRenBoss)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                isTip=ActivityManager.getInstance().getTicket(ActivityType.Boss)>0;\r\n            }break;\r\n            case RedEventType.Btn_Activity_Maze:{\r\n                if(!FunctionDefinitionManager.getInstance().getIsUnlock(FuncType.MiGong)){\r\n                    isTip=false;\r\n                    break;\r\n                }\r\n                isTip=MazeManager.getInstance().checkDate();\r\n            }break;\r\n        }\r\n        //只有isPost为true时才发送\r\n        if(isPost){\r\n            EventManager.postRedEvent(RedEventString.RED_TIP,this.self_red_type,isTip);\r\n        }\r\n        return isTip;\r\n    }\r\n\r\n    addTip()\r\n    {\r\n        let tanhao=this.node.getChildByName('tanhao');\r\n        if(!tanhao)\r\n        {\r\n            tanhao=new cc.Node('tanhao');\r\n            tanhao.addComponent(cc.Sprite).spriteFrame=PropManager.getInstance().getSpByName('Common_Icon_RedDot');\r\n            this.node.addChild(tanhao);\r\n            tanhao.x=this.node.width/2;\r\n            tanhao.y=this.node.height/2;\r\n            tanhao.opacity=0;\r\n            if(this.node.scale<1)\r\n            tanhao.scale=1/this.node.scale;\r\n            cc.tween(tanhao).to(0.2,{opacity:255}).start();                \r\n        }\r\n            \r\n    }\r\n\r\n    removeTip()\r\n    {\r\n        this.super_red_type.forEach((redType)=>{\r\n            EventManager.postRedEvent(RedEventString.RED_TIP,redType,false,this.self_red_type);\r\n        })\r\n        let tanhao=this.node.getChildByName('tanhao');\r\n        if(tanhao)\r\n        tanhao.removeFromParent();\r\n        this.false_red_type=new Array();\r\n    }\r\n\r\n}\r\n"]}