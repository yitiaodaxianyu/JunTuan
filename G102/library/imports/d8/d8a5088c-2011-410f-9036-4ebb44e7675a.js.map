{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\MeiMo\\MeiMo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { GameState, IsDebug, JiaSu } from \"../../../Constants\";\r\nimport FightingManager from \"../../../Game/FightingManager\";\r\nimport { GameEffectId, GameEffectsManager} from \"../../../Game/GameEffectsManager\";\r\nimport GroundManager from \"../../../Game/GroundManager\";\r\nimport SkillManager from \"../../../Game/SkillManager\";\r\nimport SkyManager from \"../../../Game/SkyManager\";\r\nimport GameManager from \"../../../GameManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport { KeyFrameData } from \"../../../Monster/MonsterData\";\r\nimport MonsterManager from \"../../../Monster/MonsterManager\";\r\nimport { SoundIndex } from \"../../../Sound/AudioConstants\";\r\nimport { GongJiData } from \"../../Data/HeroData\";\r\nimport FullScreenDamage from \"../../Skill/FullScreenDamage\";\r\nimport { BuffData } from \"../BuffData\";\r\nimport Hero from \"../Hero\";\r\nimport { BuffId, BuffType, DamageType, GongJi_FangXiang, Hero_State, SkillType } from \"../HeroConfig\";\r\nimport MeiDan from \"./MeiDan\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MeiMo extends Hero {\r\n    \r\n    attack_num:number=0;\r\n    full_screen_damage:FullScreenDamage=null;\r\n    meihuo_node:cc.Node=null;\r\n//---------------------------------------------加载----------------------------------------------\r\n    onLoad()\r\n    {\r\n        super.onLoad();\r\n        //加载技能指示器\r\n        super.addLoadByGameEffectId(GameEffectId.mei_mo_attack,1);\r\n        super.addLoadByGameEffectId(GameEffectId.mei_mo_attack_hit,1);\r\n        super.addLoadByGameEffectId(GameEffectId.mei_mo_beidong_skill1_baozha,1);\r\n        super.addLoadByGameEffectId(GameEffectId.mei_mo_beidong_skill1_gongsu,1);\r\n        super.addLoadByGameEffectId(GameEffectId.mei_mo_beidong_skill2_hit,1);\r\n        super.addLoadByGameEffectId(GameEffectId.mei_mo_zhudong_skill_baozha,1);\r\n        super.addLoadByGameEffectId(GameEffectId.mei_mo_zhudong_skill_gound,1);\r\n        super.addLoadByGameEffectId(GameEffectId.mei_mo_zhudong_skill_hero,4);\r\n        super.addLoadByGameEffectId(GameEffectId.mei_mo_zhudong_skill_monster,4);\r\n        this.is_LoadLoad=true;\r\n        this.addSkillListen(this.useSkill);\r\n        this.addAttackListen(this.normalAttack);\r\n        this.addXuanYunListen(this.onXuanYunResult);\r\n        this.addHitListen(this.onHitMonster);\r\n        this.addLoadedListen(this.onLoadFinished);\r\n    }\r\n\r\n    start()\r\n    {\r\n        super.start();\r\n        this.is_need_check_distance=true;\r\n        let zhijing=this.hero_data.getSkillValue1(SkillType.Active)*2;\r\n        super.setSkillTipSize(zhijing,zhijing);\r\n    }\r\n\r\n    onLoadFinished(){\r\n        \r\n    }\r\n    \r\n    onXuanYunResult(isXuanYun:boolean){\r\n        if(isXuanYun){\r\n            this.unscheduleAllCallbacks();\r\n            if(this.meihuo_node){\r\n                GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.mei_mo_zhudong_skill_hero,this.meihuo_node);\r\n                this.meihuo_node=null;\r\n            }            \r\n        }else{\r\n            //根据上个状态判断需要做什么\r\n            this.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n        }\r\n    }\r\n\r\n    starteIdle(){\r\n        this.setHeroState(Hero_State.idle,this.cur_fangxiang);\r\n    }\r\n\r\n    //---------------------------------------------攻击-------------------------------------------------\r\n    /**暴击时产生100*200锥形范围的溅射效果，受攻击的敌人和被溅射的人额外受到{参数1}%伤害 */\r\n    onHitMonster(damageType:DamageType,isCrit:boolean,monster:cc.Node){\r\n        \r\n    }\r\n\r\n    createMeiDan(id:GameEffectId,jianshiPos:cc.Vec2,speed:number,dir:number,gjData:GongJiData):cc.Node{\r\n        this.attack_num++;\r\n        let node=FightingManager.getInstance().createGameEffectById(id,jianshiPos);\r\n        let md=node.getComponent(MeiDan);\r\n        md.init(id,speed,dir,gjData);\r\n        md.setIsExDamage(this,this.attack_num%5==0);\r\n        return node;\r\n    }\r\n    //获取射击方向\r\n    getSJFXByPos(pos:cc.Vec2,selfPos:cc.Vec2):GongJi_FangXiang\r\n    {\r\n        //对敌人单位进行方向判断，确定打击方向\r\n        let fangxiang=GongJi_FangXiang.zhong;\r\n        let offsetPos=pos.sub(selfPos);\r\n        let pi2=Math.PI*2;\r\n        let radian=(Math.atan2(offsetPos.y,offsetPos.x)+pi2)%pi2;\r\n        let angle=180*radian/Math.PI;\r\n        if(angle<=75)\r\n        {\r\n            fangxiang=GongJi_FangXiang.you;\r\n        }else if(angle>75 && angle<105)\r\n        {\r\n            fangxiang=GongJi_FangXiang.zhong;\r\n        }else if(angle>=105 && angle<=180)\r\n        {\r\n            fangxiang=GongJi_FangXiang.zuo;\r\n        }\r\n        return fangxiang;\r\n    }\r\n    \r\n    /**每次普通攻击有{参数1}%几率改为射出一波箭雨，箭雨含{参数2}支箭，每支箭造成{参数3}%伤害 */\r\n    normalAttack(monster:cc.Node)\r\n    {\r\n        if(GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n        return; \r\n        let monsterTs=monster.getComponent(Monster);\r\n        if(!monsterTs.isHaveDeBuff(BuffId.Hero_MeiMo_Active_MeiHuo)){\r\n            let monsters=MonsterManager.getInstance().getMonstersForNearest(-1,this.node.getPosition(),this.hero_data.gongji_fanwei);\r\n            if(monsters)\r\n            {\r\n                for(let i=0; i<monsters.length; i++){\r\n                    let monsterTTs=monsters[i].getComponent(Monster);\r\n                    if(monsterTTs.isHaveDeBuff(BuffId.Hero_MeiMo_Active_MeiHuo)){\r\n                        monster=monsters[i];\r\n                        break;\r\n                    }\r\n                }                \r\n            } \r\n        }\r\n        \r\n        this.startAttack(monster);  \r\n    }\r\n\r\n    startAttack(enemyNode:cc.Node)\r\n    {\r\n        this.is_can_gongji=false;\r\n        let fangxiang=this.getSJFXByPos(enemyNode.getPosition(),this.node.getPosition());\r\n        let data=new KeyFrameData();\r\n        data.name=\"Attack\";\r\n        data.callback=()=>{\r\n            //正中心            \r\n            let enemyPos=enemyNode.getComponent(Monster).getSheShouPos();\r\n            let jianshiPos=this.getCreateBulletPos();\r\n            let offsetPos=enemyPos.sub(jianshiPos);\r\n            let jianshiDir=Math.atan2(offsetPos.y,offsetPos.x);\r\n            let gjData=super.getGongJiData(DamageType.Skill,true,SkillType.Passive_1,1);\r\n            gjData.is_can_crit=true;\r\n            this.createMeiDan(GameEffectId.mei_mo_attack,jianshiPos,this.bullet_speed,jianshiDir,gjData);\r\n            GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_MMAttack);    \r\n            if(this.is_double_attack){\r\n                this.resetNormalAttack();\r\n            }else{\r\n                this.gongji_jishu=0;\r\n            }        \r\n        }\r\n        super.setHeroState(Hero_State.attack,fangxiang,[data],()=>{            \r\n            super.setHeroState(Hero_State.idle,fangxiang);\r\n        });\r\n    }\r\n\r\n    /**引爆敌人附加 */\r\n    startBomb(monsterTs:Monster){\r\n        //额外的技能伤害        \r\n        let nn=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.mei_mo_beidong_skill1_baozha,monsterTs.getCenterPos());        \r\n        nn.scale=this.hero_data.getSkillValue1(SkillType.Active)/180;\r\n        let zengshang=this.hero_data.getSkillValue4(SkillType.Active);\r\n        /**范围伤害，不包括这个怪 */\r\n        let monsters=MonsterManager.getInstance().getMonstersForCenterPos(-1,monsterTs.getCenterPos(),this.hero_data.getSkillValue1(SkillType.Passive_1));\r\n        if(monsters){\r\n            for(let i=0; i<monsters.length; i++){\r\n                let monsterTTs=monsters[i].getComponent(Monster);\r\n                if(monsterTTs.uuid!=monsterTs.uuid){\r\n                    let bzGjData=super.getGongJiData(DamageType.Skill,false,SkillType.Passive_1,this.hero_data.getSkillValue2(SkillType.Passive_1));\r\n                    if(monsterTTs.isHaveDeBuff(BuffId.Hero_MeiMo_Active_ZhengShang)){\r\n                        bzGjData.hero_data.all_increase_damage+=zengshang;\r\n                    }\r\n                    let data=monsterTTs.beFlashInjured(bzGjData);\r\n                    if(data.getDamageNum()>0){\r\n                        GameEffectsManager.getInstance().createGameEffectById(GameEffectId.mei_mo_attack_hit,monsterTTs.getCenterPos());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //攻速buff\r\n        let buffData=new BuffData();\r\n        buffData.buff_id=BuffId.Hero_MeiMo_GongSu;\r\n        buffData.buff_type=BuffType.Gain;\r\n        buffData.buff_value=[this.hero_data.getSkillValue3(SkillType.Passive_1)];\r\n        buffData.remain_time=5;\r\n        buffData.game_effect_id=GameEffectId.mei_mo_beidong_skill1_gongsu;\r\n        buffData.fade_time=1;\r\n        super.addBuff(buffData);\r\n    }\r\n    \r\n    useSkill(pos:cc.Vec2):number\r\n    {        \r\n        SkillManager.getInstance().releaseSkill(()=>{\r\n            this.startSelfXuLi(pos);\r\n        },this.node);\r\n        return 2;\r\n    }\r\n\r\n    startSelfXuLi(pos:cc.Vec2){\r\n        //蓄力帧监听\r\n        let heroRoot=cc.find('Canvas/Hero_Root');\r\n        this.meihuo_node=GameEffectsManager.getInstance().createGameEffectForParent(GameEffectId.mei_mo_zhudong_skill_hero,this.node.getPosition(),cc.find(\"Canvas/Hero_Shadow_Root\"));\r\n        //state.speed=JiaSu;\r\n        //发射帧监听\r\n        let fasheData=new KeyFrameData();\r\n        fasheData.name=\"FaShe\";\r\n        fasheData.callback=()=>{\r\n            //可以发射\r\n            SkillManager.getInstance().setTimeStop(false);\r\n            this.node.parent=heroRoot;\r\n            this.node.zIndex=2;\r\n            this.startLaunch(pos);\r\n        }\r\n        //英雄动作播放\r\n        this.setHeroState(Hero_State.skill,GongJi_FangXiang.zhong,[fasheData],()=>{\r\n            //动作完毕后状态还是技能状态，动画要播放待机的\r\n            this.resetGongJiJiShu();\r\n            this.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n            if(this.meihuo_node){\r\n                GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.mei_mo_zhudong_skill_hero,this.meihuo_node);\r\n                this.meihuo_node=null;\r\n            }            \r\n        });\r\n        this.spine.timeScale=JiaSu;\r\n    }\r\n    /**在半径{参数1}的目标区域内造成{参数2}%伤害并施加“魅惑”效果，受到魅惑的敌人移速会降低至30且无法攻击和使用技能（控制对BOSS无效）\r\n\r\n    此外魅魔会受到魅惑的敌人施加持续{参数3}秒的增伤buff，魅魔对具有该buff的敌人额外造成{参数4}伤害 */\r\n    startLaunch(pos:cc.Vec2){\r\n        super.setAttSpineScale();\r\n        this.resetGongJiJiShu();\r\n        SkillManager.getInstance().setIsSkillState(false);\r\n        let radius=this.hero_data.getSkillValue1(SkillType.Active);\r\n        let monsters=MonsterManager.getInstance().getMonstersForCenterPos(-1,pos,radius);\r\n        let gjData=super.getGongJiData(DamageType.Skill,false,SkillType.Active,this.hero_data.getSkillValue2(SkillType.Active));\r\n        let zsTime=this.hero_data.getSkillValue3(SkillType.Active);\r\n        let gound=GroundManager.getInstance().createGameEffectById(GameEffectId.mei_mo_zhudong_skill_gound,pos);\r\n        gound.scale=radius/90;\r\n        let baozha=GroundManager.getInstance().createGameEffectById(GameEffectId.mei_mo_zhudong_skill_baozha,pos);\r\n        baozha.scale=radius/90;\r\n        if(monsters){\r\n            for(let i=0; i<monsters.length; i++){\r\n                let monsterTs=monsters[i].getComponent(Monster);\r\n                let data=monsterTs.beFlashInjured(gjData);\r\n                if(data.getDamageNum()>0&&data.is_die==false){\r\n                    /**魅惑 */\r\n                    let buffData=new BuffData();\r\n                    buffData.buff_id=BuffId.Hero_MeiMo_Active_MeiHuo;\r\n                    buffData.remain_time=4;\r\n                    buffData.game_effect_id=GameEffectId.mei_mo_zhudong_skill_monster;\r\n                    buffData.buff_type=BuffType.Vertigo;\r\n                    monsterTs.addDeBuff(buffData,gjData);\r\n                    /**增伤 */\r\n                    let exData=new BuffData();\r\n                    exData.buff_id=BuffId.Hero_MeiMo_Active_ZhengShang;\r\n                    exData.remain_time=zsTime;\r\n                    monsterTs.addDeBuff(exData,gjData);\r\n                }\r\n            }\r\n        }\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_MMSkill);  \r\n    }\r\n}\r\n"]}