{"version":3,"sources":["assets\\Scripts\\Game\\BigMap.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport MapManager from \"../GuaJi/MapManager\";\r\nimport { LevelManager } from \"../Level/LevelManager\";\r\nimport { MissionLevelManager } from \"../Level/MissionLevel\";\r\nimport TextLanguage from \"../multiLanguage/TextLanguage\";\r\nimport ChapterPop from \"./ChapterPop\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BigMap extends cc.Component {\r\n\r\n    // @property(cc.Label)\r\n    // label: cc.Label = null;\r\n\r\n    // @property\r\n    // text: string = 'hello';\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n    @property(cc.Node)\r\n    Btn_Close:cc.Node = null;//关闭按钮\r\n\r\n    @property(cc.Node)\r\n    Flag:cc.Node= null;//状态\r\n    @property(cc.Node)\r\n    txt:cc.Node= null;//文字\r\n    @property(cc.Node)\r\n    Frame:cc.Node= null;//文字背景\r\n\r\n    @property(cc.SpriteFrame)\r\n    spriteFrame:cc.SpriteFrame[]= [];//状态图片   0:打过了   1:还没打过\r\n    @property(cc.Node)\r\n    Chapter:cc.Node= null;//地图\r\n\r\n    @property(cc.Node)\r\n    Map_Sword:cc.Node= null;//剑\r\n\r\n    @property(cc.Node)\r\n    ChapterPop:cc.Node= null;//大地图弹窗\r\n    \r\n    // @property(cc.Node)\r\n    // Trascina:cc.Node= null;//大地图弹窗\r\n    \r\n    start () {\r\n        this.Btn_Close.on(cc.Node.EventType.TOUCH_END,this.onBtn_Close,this);\r\n        for (let index = 0; index < this.Flag.children.length; index++) {\r\n            this.Flag.children[index].on(cc.Node.EventType.TOUCH_END,(()=>{\r\n                this.onBtn_Chapter(index);\r\n            }),this);\r\n            this.Frame.children[index].on(cc.Node.EventType.TOUCH_END,(()=>{\r\n                this.onBtn_Chapter(index);\r\n            }),this);\r\n            \r\n            // let clickEvent=new cc.Component.EventHandler();\r\n            // clickEvent.target=this.node;\r\n            // clickEvent.component='BigMap';\r\n            // clickEvent.handler='onBtn_Chapter';\r\n            // clickEvent.customEventData = \"\"+index;\r\n            // this.Chapter.children[index].getComponent(cc.Button).clickEvents.push(clickEvent);\r\n        }\r\n        // this.Trascina.on(cc.Node.EventType.TOUCH_START,((e:cc.Event.EventTouch)=>{//当手指触摸到屏幕时\r\n        //     this.onBtnTOUCH_START(e)\r\n        // }),this);\r\n        // this.Trascina.on(cc.Node.EventType.TOUCH_MOVE,((e:cc.Event.EventTouch)=>{//当手指在屏幕上移动时\r\n        //     this.onBtnTOUCH_MOVE(e)\r\n        // }),this);\r\n        // this.Trascina.on(cc.Node.EventType.TOUCH_END,((e:cc.Event.EventTouch)=>{//当手指在目标节点区域内离开屏幕时\r\n        //     this.onBtnTOUCH_END(e)\r\n        // }),this);\r\n        // this.Trascina.on(cc.Node.EventType.TOUCH_CANCEL,((e:cc.Event.EventTouch)=>{//当手指在目标节点区域外离开屏幕时\r\n        //     this.onBtnTOUCH_CANCEL(e)\r\n        // }),this);\r\n        \r\n    }\r\n    // onBtnTOUCH_START(e:cc.Event.EventTouch) {\r\n    //     throw new Error(\"Method not implemented.\");\r\n    // }\r\n    // onBtnTOUCH_MOVE(e:cc.Event.EventTouch) {\r\n    //     throw new Error(\"Method not implemented.\");\r\n    // }\r\n    // onBtnTOUCH_END(e:cc.Event.EventTouch) {\r\n    //     throw new Error(\"Method not implemented.\");\r\n    // }\r\n    // onBtnTOUCH_CANCEL(e:cc.Event.EventTouch) {\r\n    //     throw new Error(\"Method not implemented.\");\r\n    // }\r\n\r\n    protected onEnable(): void {\r\n        this.ChapterPop.active=false\r\n        let myCurrentlevel=LevelManager.getInstance().finish_level+1;//当前最大关卡\r\n        if(MapManager.Currentlevel==0){\r\n\r\n        }else{\r\n            myCurrentlevel=MapManager.Currentlevel;//当前点击的关卡\r\n        }\r\n        if(myCurrentlevel>=MissionLevelManager.getMaxLevel()){\r\n            myCurrentlevel=LevelManager.getInstance().finish_level\r\n            // GameManager.getInstance().showMessage(\"你太厉害啦，测试版本暂时没有了，敬请期待后续版本！记得加id\",3);\r\n        }\r\n        // console.log(\"++++++++\",myCurrentlevel,MissionLevelManager.getMaxLevel())\r\n        let Chapter=MissionLevelManager.getInstance().getChapter(myCurrentlevel)//当前关卡的章节\r\n        for (let index = 0; index < this.Flag.children.length; index++) {\r\n            let myChapter=0\r\n            if(LevelManager.getInstance().finish_level<MissionLevelManager.getMaxLevel()){\r\n                myChapter=MissionLevelManager.getInstance().getChapter(LevelManager.getInstance().finish_level+1)\r\n            }else{\r\n                myChapter=MissionLevelManager.getInstance().getChapter(LevelManager.getInstance().finish_level)\r\n            }\r\n\r\n            if((index+1)>myChapter){\r\n                this.Flag.children[index].getComponent(cc.Sprite).spriteFrame=this.spriteFrame[1]\r\n                this.Chapter.children[index].getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"));\r\n                this.txt.children[index].getComponent(TextLanguage).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"));\r\n                this.Frame.children[index].getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"));\r\n                \r\n            }\r\n            if((index+1)<=myChapter){\r\n                this.Flag.children[index].getComponent(cc.Sprite).spriteFrame=this.spriteFrame[0]\r\n                this.Chapter.children[index].getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-sprite\"));\r\n\r\n                this.txt.children[index].getComponent(TextLanguage).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-sprite\"));\r\n                this.Frame.children[index].getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-sprite\"));\r\n                if((index+1)==Chapter){\r\n                    this.Map_Sword.setPosition(this.Flag.children[index].getPosition().x,this.Flag.children[index].getPosition().y+60,0)\r\n                }\r\n            }\r\n            this.txt.children[index].getComponent(TextLanguage).setReplaceValue('~',(index+1) + '');\r\n        }\r\n        // this.ScrollView.getComponent(cc.ScrollView).scrollToBottom(2)\r\n    }\r\n    onBtn_Close(){\r\n        MapManager.getInstance().instantiatelevelnode();\r\n        this.node.active=false\r\n    }\r\n    onBtn_Chapter(level){\r\n        this.ChapterPop.getComponent(ChapterPop).parent=this.node\r\n        this.ChapterPop.getComponent(ChapterPop).level=Number(level)\r\n        this.ChapterPop.active=true\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}