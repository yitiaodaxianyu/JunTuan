{"version":3,"sources":["assets\\Scripts\\Payment\\PayManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AccessName, HttpManager } from \".././NetWork/HttpManager\";\r\nimport ApkManager from \"../Ads/ApkManager\";\r\nimport { IsDebug } from \"../Constants\";\r\nimport { StorageKey } from \"../Storage/StorageConfig\";\r\nimport { TheStorageManager } from \"../Storage/StorageManager\";\r\nimport { PayInfo, PayId, PayUiIndex } from \"../thirdParty/ThirdParty\";\r\nimport UserData from \"../UserData\";\r\nimport { CrystalRechargeManager } from \"./Data/CrystalRecharge\";\r\nimport { CumulativeRechargeManager } from \"./Data/CumulativeRecharge\";\r\nimport { CyclePackManager } from \"./Data/CyclePack\";\r\nimport { PaidItemManager } from \"./Data/PaidItem\";\r\nimport { PrivilegedCardInformationManager } from \"./Data/PrivilegedCardInformation\";\r\nimport { DingYueManager } from \"./DingYueManager\";\r\n\r\nexport class PayManager{\r\n\r\n    private static _instance:PayManager=null;\r\n    private pay_info:Map<string,PayInfo>=null;\r\n\r\n    public static getInstance():PayManager\r\n    {\r\n        if(this._instance==null)\r\n        {\r\n            this._instance=new PayManager();\r\n            this._instance.init();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    private init(){\r\n        DingYueManager.getInstance();\r\n        CrystalRechargeManager.getInstance();\r\n        CumulativeRechargeManager.getInstance();\r\n        PrivilegedCardInformationManager.getInstance();\r\n        PaidItemManager.getInstance();\r\n        this.pay_info=new Map<string,PayInfo>();\r\n        this.setLocalInfo();\r\n        ApkManager.getInstance().getPayInfos({info:(payInfos:PayInfo[])=>{\r\n            let len=payInfos.length;\r\n            for(let i=0; i<len; i++){\r\n                let payInfo=payInfos[i];\r\n                this.setPayInfo(payInfo.pay_id,payInfo);\r\n            }\r\n        },});\r\n    }\r\n    /**游戏启动先设置本地表的价格数据 */\r\n    setLocalInfo(){\r\n        PaidItemManager.getInstance().loadJson(()=>{\r\n            //如果android返回了就不要管了\r\n            if(this.pay_info.size<=0){\r\n                let dyInfos=new Array<PayInfo>();\r\n                let data=PaidItemManager.getInstance().getData();                            \r\n                data.forEach((v,k)=>{\r\n                    let payInfo=new PayInfo();\r\n                    payInfo.price=v.Price+'';\r\n                    payInfo.des='Prop';\r\n                    payInfo.currency=\"$\";\r\n                    payInfo.is_buy=IsDebug;\r\n                    payInfo.pay_id=v.PaidItemId;\r\n                    if(v.PurchaseType==1){\r\n                        //订阅类型\r\n                        payInfo.is_buy=this.getPayNum(v.PaidItemId)>0;\r\n                        dyInfos.push(payInfo);                        \r\n                    }\r\n                    this.setPayInfo(v.PaidItemId,payInfo);\r\n                });\r\n                DingYueManager.getInstance().setCardInfo(dyInfos);\r\n            }else{\r\n                let dyInfos=new Array<PayInfo>();\r\n                let data=PaidItemManager.getInstance().getData();                            \r\n                data.forEach((v,k)=>{                    \r\n                    if(v.PurchaseType==1){\r\n                        //订阅类型\r\n                        let payInfo=new PayInfo();\r\n                        payInfo.price=v.Price+'';\r\n                        payInfo.des='Prop';\r\n                        payInfo.currency=\"$\";\r\n                        payInfo.is_buy=IsDebug;\r\n                        payInfo.pay_id=v.PaidItemId;\r\n                        payInfo.is_buy=this.getPayNum(v.PaidItemId)>0;\r\n                        dyInfos.push(payInfo);\r\n                    }\r\n                });\r\n                // if(!DingYueManager.getInstance().getMonthCardInfo()){\r\n                //     DingYueManager.getInstance().setCardInfo(dyInfos);\r\n                // }\r\n                \r\n            }\r\n        });        \r\n        if(IsDebug){\r\n            let dyInfos=new Array<PayInfo>();\r\n            let payInfo=new PayInfo();\r\n            payInfo.price='123456';\r\n            payInfo.des='Prop';\r\n            payInfo.currency=\"$\";\r\n            payInfo.pay_id=\"c502\";\r\n            payInfo.is_buy=this.getPayNum(payInfo.pay_id)>0;\r\n            dyInfos.push(payInfo);\r\n            payInfo=new PayInfo();\r\n            payInfo.price='654321';\r\n            payInfo.des='Prop';\r\n            payInfo.currency=\"$\";\r\n            payInfo.pay_id=\"c504\";\r\n            payInfo.is_buy=this.getPayNum(payInfo.pay_id)>0;\r\n            dyInfos.push(payInfo);\r\n            if(!DingYueManager.getInstance().getWeekInfo()){\r\n                DingYueManager.getInstance().setCardInfo(dyInfos);\r\n            }\r\n        }\r\n    }\r\n\r\n    setPayInfos(payInfos:PayInfo[]){\r\n        let len=payInfos.length;\r\n        for(let i=0; i<len; i++){\r\n            let payInfo=payInfos[i];\r\n            this.setPayInfo(payInfo.pay_id,payInfo);\r\n        } \r\n    }\r\n\r\n    public setPayInfo(type:string,payInfo:PayInfo){\r\n        this.pay_info.set(type,payInfo);\r\n    }\r\n\r\n    public getPayInfo(type:string):PayInfo{\r\n        return this.pay_info.get(type);\r\n    }\r\n    /**\r\n     * \r\n     * @param type 计费点类型\r\n     * @returns 该计费的的购买次数\r\n     */\r\n     public getPayNum(type:string):number{\r\n        let num=TheStorageManager.getInstance().getInt(StorageKey.PayNum+type,0);        \r\n        return num;\r\n    }\r\n\r\n    \r\n    /**是否首次充值 */\r\n    public getIsFirstPay():boolean{        \r\n        let isPay=false;\r\n        let cDate=CrystalRechargeManager.getInstance().getData();\r\n        cDate.forEach((v,k)=>{\r\n            if(!isPay&&this.getPayNum(v.ProductId)>0){\r\n                isPay=true;\r\n            }\r\n        });\r\n        let pDate=PrivilegedCardInformationManager.getInstance().getData();\r\n        pDate.forEach((v,k)=>{\r\n            if(!isPay&&this.getPayNum(v.ProductId)>0){\r\n                isPay=true;\r\n            }\r\n        });\r\n        let lData=CyclePackManager.getInstance().getData();\r\n        lData.forEach((v,k)=>{\r\n            if(!isPay&&v.AdReward==0&&this.getPayNum(v.ProductId)>0){\r\n                isPay=true;\r\n            }\r\n        });\r\n        return isPay&&!this.getIsGetFirstReward();\r\n    }\r\n\r\n    public getIsGetFirstReward():boolean{\r\n        return TheStorageManager.getInstance().getInt(StorageKey.FirstPayGetState,0)>0; \r\n    }\r\n\r\n    public setIsGetFirstReward(isGet:boolean){\r\n        TheStorageManager.getInstance().setItem(StorageKey.FirstPayGetState,isGet?1:0);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param type 添加一次购买次数\r\n     */\r\n     public addPayNum(type:string){\r\n        this.savePayNum(type,this.getPayNum(type)+1);\r\n        let price=1.99;\r\n        this.HttpAddPayPrice(price);\r\n    }\r\n    /**\r\n     * \r\n     * @param type 计费点类型\r\n     * @param num 次数\r\n     */\r\n     public savePayNum(type:string,num:number){\r\n        TheStorageManager.getInstance().setItem(StorageKey.PayNum+type,num);\r\n    }\r\n\r\n    public getSelectIds(type:string):number[]{\r\n        let idsList=TheStorageManager.getInstance().getJson(StorageKey.PaySelectIds+type);        \r\n        return idsList;\r\n    }\r\n\r\n    public saveSelectIds(type:string,ids:number[])\r\n    {\r\n        TheStorageManager.getInstance().setJson(StorageKey.PaySelectIds+type,ids);\r\n    }\r\n\r\n    public getRewardById(payId:number){\r\n        //this.addPayNum(payId);\r\n        \r\n    }\r\n    /**获得累计充值的龙晶数量 */\r\n    public getTotalLongJingNum():number{\r\n        let num=TheStorageManager.getInstance().getInt(StorageKey.TotalLongJingNum,0);        \r\n        return num;\r\n    }\r\n    /**添加累计充值的龙晶数量 */\r\n    public addTotalLongJingNum(num:number){\r\n        let total=num+this.getTotalLongJingNum()\r\n        TheStorageManager.getInstance().setItem(StorageKey.TotalLongJingNum,total);\r\n        //根据累计充值总额设置领取状态\r\n        let data=CumulativeRechargeManager.getInstance().getData();\r\n        data.forEach((v,k)=>{\r\n            let state=PayManager.getInstance().getTotalLongJingGetState(v.CumulativeRechargeID);\r\n            if(state!=2 && total>=v.CumulativeRechargePrice){\r\n                PayManager.getInstance().setTotalLongJingGetState(v.CumulativeRechargeID,1);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 累计充值龙晶的领取状态，0：未完成，1：可以领取，2：已经领取\r\n     * @param totalId 累计充值id\r\n     */\r\n    public getTotalLongJingGetState(totalId:number):number{\r\n        let num=TheStorageManager.getInstance().getInt(StorageKey.TotalLongJingGetState+totalId,0);\r\n        return num;\r\n    }\r\n\r\n    /**设置累计充值龙晶id的领取状态 0：未完成，1：可以领取，2：已经领取*/\r\n    public setTotalLongJingGetState(totalId:number,state:number){\r\n        TheStorageManager.getInstance().setItem(StorageKey.TotalLongJingGetState+totalId,state);\r\n    }\r\n\r\n    /**\r\n     * 是否有可以领取的，红点专用\r\n     * @param index 商城页的标签索引\r\n     * @returns 返回是否可以领取\r\n     */\r\n    public getIsCanGet(index:number):boolean{\r\n        let isHaveGet=false;\r\n        switch(index){\r\n            case PayUiIndex.ZuXiang:{\r\n                //月卡\r\n                // if(DingYueManager.getInstance().getMonthCardInfo().is_buy){\r\n                //     isHaveGet=!DingYueManager.getInstance().getTodayIsGet(1001)\r\n                // }\r\n                // if(!isHaveGet){\r\n                //     //季卡\r\n                //     if(DingYueManager.getInstance().getQuarterCardInfo().is_buy){\r\n                //         isHaveGet=!DingYueManager.getInstance().getTodayIsGet(2001)\r\n                //     }                    \r\n                // }\r\n            }break;\r\n            case PayUiIndex.LongJing:\r\n            case PayUiIndex.Total:{\r\n                //累计充值的\r\n                let CRM=CumulativeRechargeManager.getInstance();\r\n                let data=CRM.getData();\r\n                let isHaveNoGet=false;\r\n                data.forEach((v,k)=>{\r\n                    let state=this.getTotalLongJingGetState(v.CumulativeRechargeID);\r\n                    if(!isHaveNoGet&&state==1){\r\n                        isHaveNoGet=true;\r\n                        isHaveGet=true;\r\n                    }\r\n                });                \r\n            }break;\r\n            case PayUiIndex.Gift:{\r\n                //礼包的                \r\n                for(let i=1; i<=3; i++){\r\n                    let dataList = CyclePackManager.getInstance().getDataByType(i);\r\n                    dataList.forEach((v,k) => {\r\n                        if(v.AdReward == 1){\r\n                            let isSoldOut = cc.sys.localStorage.getItem(\"pay_git_bag_item_\" + v.GiftID) || 0;\r\n                            isSoldOut = Number(isSoldOut)                        \r\n                            if (isSoldOut < v.AdPlayableTimes && isHaveGet==false){\r\n                                isHaveGet=true;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            }break;\r\n\r\n        }\r\n        \r\n        return isHaveGet;\r\n    }\r\n\r\n    public getTodayShow(index:number):number{\r\n        return TheStorageManager.getInstance().getInt(StorageKey.PayUiShowNum+index,0);\r\n    }\r\n\r\n    public addTodayShow(index:number){\r\n        TheStorageManager.getInstance().setItem(StorageKey.PayUiShowNum+index,1+this.getTodayShow(index));\r\n    }\r\n\r\n    public getFuncTodayShow(funcType:number):number{\r\n        return TheStorageManager.getInstance().getInt(StorageKey.FuncUiShowNum+funcType,0);\r\n    }\r\n\r\n    public addFuncTodayShow(funcType:number){\r\n        TheStorageManager.getInstance().setItem(StorageKey.FuncUiShowNum+funcType,1+this.getFuncTodayShow(funcType));\r\n    }\r\n\r\n    public resetAllTodayShow(){\r\n        for(let i=1; i<=6; i++){\r\n            TheStorageManager.getInstance().setItem(StorageKey.PayUiShowNum+i,0);\r\n        }\r\n        \r\n    }\r\n\r\n    HttpAddPayPrice(price:number){\r\n        HttpManager.post(AccessName.updateUserInfo,this.getPayJsonString(price),false)\r\n    }\r\n\r\n    private getPayJsonString(price:number):string{\r\n        let uid=UserData.getInstance().getUserID();\r\n        return JSON.stringify({\r\n            type:6,\r\n            uid:uid,\r\n            value:price,\r\n        });\r\n    }\r\n}\r\n"]}