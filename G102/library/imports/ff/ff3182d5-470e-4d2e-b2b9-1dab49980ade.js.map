{"version":3,"sources":["assets\\Scripts\\GuaJi\\Ui\\FastGuaJiUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WXManagerEX, { WXADEnvnt } from \"../../../startscene/WXManagerEX\";\r\nimport ApkManager from \"../../Ads/ApkManager\";\r\nimport { VipManager } from \"../../Ads/VipManager\";\r\nimport CoinPop from \"../../CoinPop\";\r\nimport { VIDEO_TYPE } from \"../../Constants\";\r\nimport GameData from \"../../GameData\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { OfflineRevenueManager } from \"../../JsonData/OfflineRevenue\";\r\nimport { Follow_Type } from \"../../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../../multiLanguage/FollowManager\";\r\nimport { LanguageIndex } from \"../../multiLanguage/LanguageConstants\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\nimport { PropId } from \"../../Prop/PropConfig\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport { StorageKey } from \"../../Storage/StorageConfig\";\r\nimport { TheStorageManager } from \"../../Storage/StorageManager\";\r\nimport { TaskItem } from \"../../Task/TaskEnum\";\r\nimport TaskManager from \"../../Task/TaskManager\";\r\nimport { EventManager, RedEventString, RedEventType } from \"../../Tools/EventManager\";\r\nimport UIComponent from \"../../UI/UIComponent\";\r\nimport { UIPath, UILayerLevel } from \"../../UI/UIConfig\";\r\nimport { UiAction } from \"../../UI/UiInterface\";\r\nimport { UIManager } from \"../../UI/UIManager\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class FastGuaJiUi extends UIComponent {\r\n\r\n    time_label:cc.Label=null;\r\n\r\n    init(uiAc: UiAction) {\r\n        super.init(uiAc);\r\n        this.time_label=this.node.getChildByName('time').getComponent(cc.Label);\r\n        this.node.getChildByName('Reward_Bg_1').getComponentInChildren(cc.RichText).string = LanguageManager.getInstance().getStrByTextId(100119);\r\n        // this.showRemainingNum();\r\n        this.schedule(this.showRemainTime,1);\r\n        this.showRemainTime();\r\n\r\n        if(TheStorageManager.getInstance().getNumber(StorageKey.CanAdFastOffline,0) == 1){\r\n            this.node.getChildByName(\"btnRoot\").getChildByName(\"ad\").active = false;\r\n        }else{\r\n            this.node.getChildByName(\"btnRoot\").getChildByName(\"ad\").active = true;\r\n        }\r\n\r\n        let bg=this.node.getChildByName('bg');\r\n        bg.off(cc.Node.EventType.TOUCH_START);\r\n        bg.on(cc.Node.EventType.TOUCH_START,()=>{\r\n            this.clickBtnClose();\r\n        },this);\r\n\r\n\r\n        cc.director.on(WXADEnvnt.KUAISUGUAJISHIPIN, this.onShipinComp, this);\r\n    }\r\n\r\n    // onLoad(): void {\r\n    //     super.onLoad();\r\n        \r\n    // }\r\n\r\n    showRemainingNum(){\r\n        // let lm=LanguageManager.getInstance();\r\n        // let freeNum=GameData.getInstance().getFreeFastGuaJiNum();\r\n        // let gemNum=GameData.getInstance().getFastGuaJiNum();\r\n        // let totalNum=freeNum+gemNum;\r\n        // let costGem=150-(gemNum*50);\r\n        // let gem=PropManager.getInstance().getPropNum(PropId.Gem);\r\n\r\n        // let gemIcon=this.node.getChildByName('btnRoot').getChildByName(\"btnFast\").getChildByName(\"gemIcon\");\r\n        // let gemText=gemIcon.getChildByName('gemNum').getComponent(cc.Label);\r\n        // let useText=this.node.getChildByName('useText');\r\n\r\n        // let btnFast=this.node.getChildByName('btnFast').getComponent(cc.Button);\r\n        // this.node.getChildByName('remainText').getComponent(cc.Label).string=lm.getString(LanguageIndex.UsesRemainingToday)+totalNum;\r\n        // this.node.getChildByName('text1').getComponent(cc.RichText).string=\"<b><color=#253147 size=24>\"+lm.getStrByTextId(220002)+\": </c><color=#F9E06E><outline color=#865B2C width=3><size=30>120 min</></outline></c></b>\";\r\n        // this.node.getChildByName('text2').getComponent(cc.RichText).string=\"<b><outline color=#33203F width=3><color=#EBD9B1>\"+lm.getStrByTextId(930001)+\": 2</c></outline></b>\";\r\n\r\n        // gemText.string=costGem+'';\r\n        \r\n        // if(freeNum>0){\r\n            // gemIcon.active=false;\r\n            // useText.x=btnFast.node.x;\r\n        // }else{\r\n            // gemIcon.active=gemNum>0;\r\n            // gemText.node.color=gem>=costGem?cc.Color.WHITE:cc.Color.RED;\r\n            // useText.x=gemNum>0?18:btnFast.node.x;\r\n        // }\r\n        // btnFast.interactable=totalNum>0;\r\n        // useText.color=totalNum>0?cc.color(124,82,13):cc.Color.WHITE;\r\n        // if(totalNum > 0){\r\n            // useText.color = cc.color(63, 45, 33);\r\n        // }else{\r\n            // useText.getComponent(cc.LabelOutline).color = cc.color(138,138,138);\r\n            // this.node.getChildByName(\"btnFast\").getComponent(cc.Button).interactable = false;\r\n        // }\r\n    }\r\n\r\n    showRemainTime()\r\n    {\r\n        let s:string;\r\n        let nowTime = Date.now() / 1000;\r\n        let residueTime = TheStorageManager.getInstance().getNumber(StorageKey.TomorowZeroTimeStamp,0) - nowTime;\r\n        if(residueTime < 0){\r\n            residueTime = ((new Date(new Date().toLocaleDateString()).getTime()+8640000)/ 1000) - nowTime;\r\n        }\r\n        let hh = Math.floor(residueTime / (60*60));\r\n        if(hh < 10){\r\n            s = '0' + hh + ':';\r\n        }else{\r\n            s = hh +':';\r\n        }\r\n        let mm = Math.floor(residueTime % (60*60)/60);\r\n        if(mm < 10){\r\n            s += '0' + mm + ':'\r\n        }else{\r\n            s += mm + ':'\r\n        }\r\n        let ss = Math.floor(residueTime % (60*60)%60)\r\n        if(ss < 10){\r\n            s += '0' + ss\r\n        }else{\r\n            s += ss\r\n        }\r\n        this.time_label.string=s;\r\n        // if(TheStorageManager.getInstance().getNumber(StorageKey.CanFastOffline,0) == 1){\r\n        //     this.showRemainingNum();\r\n        // }\r\n        //获取当前时间\r\n        // let date=new Date();\r\n        // let curHours=date.getHours();\r\n        // let curMin=date.getMinutes();\r\n        // let curSec=date.getSeconds();\r\n        // let remainHours=24-curHours-1;\r\n        // let remainMin=60-curMin;\r\n        // let remainSec=60-curSec;\r\n        // let shiStr='0'+remainHours;\r\n        // if(remainHours>=10)\r\n        // {\r\n        //     shiStr=''+remainHours;\r\n        // }\r\n        // let fenStr='0'+remainMin;\r\n        // if(remainMin>=10)\r\n        // {\r\n        //     fenStr=''+remainMin;\r\n        // }\r\n        // let miaoStr='0'+remainSec;\r\n        // if(remainSec>=10)\r\n        // {\r\n        //     miaoStr=''+remainSec;\r\n        // }\r\n        // if(GameData.getInstance().checkIsNewDay())\r\n        // {\r\n        // }\r\n        // if(remainSec%5==0)\r\n        // {\r\n        //     GameData.getInstance().saveIsSignToday(false);\r\n        //     this.showSignDay();\r\n        // }\r\n    }\r\n\r\n    clickBtnAd(){\r\n        if (cc.sys.platform === cc.sys.BYTEDANCE_GAME) {\r\n\r\n \r\n\r\n\r\n            WXManagerEX.getInstance().kuaisuGuajiShipin= tt.createRewardedVideoAd({\r\n                adUnitId: '3iifgrgt8f2515m1sg'\r\n            });\r\n            WXManagerEX.getInstance().kuaisuGuajiShipin.offError();\r\n                    WXManagerEX.getInstance().kuaisuGuajiShipin.onError(err => {\r\n                        console.log(err)\r\n                    });\r\n            WXManagerEX.getInstance().kuaisuGuajiShipin.offClose();\r\n            WXManagerEX.getInstance().kuaisuGuajiShipin.show().catch(() => {\r\n                // 失败重试\r\n                WXManagerEX.getInstance().kuaisuGuajiShipin.load()\r\n                    .then(() => WXManagerEX.getInstance().kuaisuGuajiShipin.show())\r\n                    .catch(err => {\r\n                        GameManager.getInstance().showMessage(\"广告拉取失败\");\r\n                    })\r\n            })\r\n            WXManagerEX.getInstance().kuaisuGuajiShipin.onClose(res => {\r\n                // 用户点击了【关闭广告】按钮\r\n                // 小于 2.1.0 的基础库版本，res 是一个 undefined\r\n                if (res && res.isEnded || res === undefined) {\r\n                  // 正常播放结束，可以下发游戏奖励\r\n                  this.onShipinComp();\r\n                }\r\n                else {\r\n                    // 播放中途退出，不下发游戏奖励\r\n                }\r\n                WXManagerEX.getInstance().kuaisuGuajiShipin.destroy();\r\n            })\r\n\r\n        }else{\r\n            this.onShipinComp();\r\n        }\r\n       \r\n    }\r\n    private onShipinComp(): void {\r\n        FollowManager.getInstance().followEvent(Follow_Type.快速挂机广告按钮点击);\r\n                GameManager.getInstance().refreshGemShow();\r\n                TaskManager.getInstance().emitTask(TaskItem.领取挂机奖励2次);\r\n                TaskManager.getInstance().emitTask(TaskItem.领取快速挂机1次);\r\n                // TheStorageManager.getInstance().setItem(StorageKey.CanFastOffline,1);\r\n                // GameData.getInstance().saveFastGuaJiNum(gemNum-1);\r\n                this.showRemainingNum();\r\n                let rewardDatas=OfflineRevenueManager.getInstance().getRewards(5*60);\r\n                let rewardMap = new Map<number,number>();\r\n                rewardDatas.forEach((v,k)=>{\r\n                    if(rewardMap.has(v.reward_id)){\r\n                        let num = rewardMap.get(v.reward_id);\r\n                        num += v.reward_num;\r\n                        rewardMap.set(v.reward_id,num);\r\n                    }else{\r\n                        rewardMap.set(v.reward_id,v.reward_num);\r\n                    }\r\n                })\r\n                let rdNodes=new Array();\r\n                rewardMap.forEach((num,id)=>{\r\n                    let item=PropManager.getInstance().createPropItem(id,num);\r\n                    PropManager.getInstance().changePropNum(id,num);\r\n                    rdNodes.push(item);\r\n                });\r\n                // for(let i=0; i<rewardDatas.length; i++){\r\n                //     let rd=rewardDatas[i];\r\n                //     let item=PropManager.getInstance().createPropItem(rd.reward_id,rd.reward_num);\r\n                //     PropManager.getInstance().changePropNum(rd.reward_id,rd.reward_num);\r\n                //     rdNodes.push(item);\r\n                // }\r\n                GameManager.getInstance().showMultipleGetTip(rdNodes);\r\n                TheStorageManager.getInstance().setItem(StorageKey.CanAdFastOffline,1);\r\n                this.node.getChildByName(\"btnRoot\").getChildByName(\"ad\").active = false;\r\n                EventManager.postRedEvent(RedEventString.RED_TIP,RedEventType.Btn_Main_Guaji_Btn_Fast,false);\r\n    }\r\n    clickBtnFast(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        if(TheStorageManager.getInstance().getNumber(StorageKey.CanFastOffline,0) == 0){\r\n            if(PropManager.getInstance().changePropNum(PropId.Gem,-200)){\r\n                // FollowManager.getInstance().addTotal(Follow_Type.快速挂机消耗的钻石数量,costGem);\r\n                TheStorageManager.getInstance().setItem(StorageKey.CanFastOffline,1);\r\n                TaskManager.getInstance().emitTask(TaskItem.领取快速挂机1次);\r\n                TaskManager.getInstance().emitTask(TaskItem.领取挂机奖励2次);\r\n                // GameData.getInstance().saveFastGuaJiNum(gemNum-1);\r\n                this.showRemainingNum();\r\n                let rewardDatas=OfflineRevenueManager.getInstance().getRewards(5*60);\r\n                let rewardMap = new Map<number,number>();\r\n                rewardDatas.forEach((v,k)=>{\r\n                    if(rewardMap.has(v.reward_id)){\r\n                        let num = rewardMap.get(v.reward_id);\r\n                        num += v.reward_num;\r\n                        rewardMap.set(v.reward_id,num);\r\n                    }else{\r\n                        rewardMap.set(v.reward_id,v.reward_num);\r\n                    }\r\n                })\r\n                let rdNodes=new Array();\r\n                rewardMap.forEach((num,id)=>{\r\n                    let item=PropManager.getInstance().createPropItem(id,num);\r\n                    PropManager.getInstance().changePropNum(id,num);\r\n                    rdNodes.push(item);\r\n                });\r\n                // let rdNodes=new Array();\r\n                // for(let i=0; i<rewardDatas.length; i++){\r\n                //     let rd=rewardDatas[i];\r\n                //     let item=PropManager.getInstance().createPropItem(rd.reward_id,rd.reward_num);\r\n                //     PropManager.getInstance().changePropNum(rd.reward_id,rd.reward_num);\r\n                //     rdNodes.push(item);\r\n                // }\r\n                GameManager.getInstance().showMultipleGetTip(rdNodes);\r\n                // GameManager.getInstance().refreshGemShow();\r\n            }else{\r\n                // GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(100041));\r\n                UIManager.getInstance().showUiDialog(UIPath.CoinPop,UILayerLevel.Two,{onCompleted:(uiNode)=> {\r\n                    uiNode.getComponent(CoinPop).initUi(PropId.Gem)\r\n                },});\r\n            }  \r\n        }else{\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(100120));\r\n        }\r\n        // TaskManger.getInstance().setTaskItem(TaskItem.快速挂机1次);\r\n        // TaskManger.getInstance().setTaskItem(TaskItem.收取挂机奖励2次);\r\n        // FollowManager.getInstance().followEvent(Follow_Type.快速挂机使用次数);\r\n        // let freeNum=GameData.getInstance().getFreeFastGuaJiNum();\r\n        // let gemNum=GameData.getInstance().getFastGuaJiNum();\r\n        // if(freeNum>0){\r\n        //     GameData.getInstance().saveFreeFastGuaJiNum(freeNum-1);\r\n        //     this.showRemainingNum();\r\n        //     let rewardDatas=OfflineRevenueManager.getInstance().getRewards(2*60);\r\n        //     let rdNodes=new Array();\r\n        //     for(let i=0; i<rewardDatas.length; i++){\r\n        //         let rd=rewardDatas[i];\r\n        //         let item=PropManager.getInstance().createPropItem(rd.reward_id,rd.reward_num);\r\n        //         PropManager.getInstance().changePropNum(rd.reward_id,rd.reward_num);\r\n        //         rdNodes.push(item);\r\n        //     }\r\n        //     GameManager.getInstance().showMultipleGetTip(rdNodes);\r\n        //     EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_Fast);\r\n        // }else{\r\n        //     if(gemNum>0){\r\n        //         let costGem=150-(gemNum*50);\r\n        //         if(PropManager.getInstance().changePropNum(PropId.Gem,-costGem)){\r\n        //             FollowManager.getInstance().addTotal(Follow_Type.快速挂机消耗的钻石数量,costGem);\r\n        //             GameManager.getInstance().refreshGemShow();\r\n        //             GameData.getInstance().saveFastGuaJiNum(gemNum-1);\r\n        //             this.showRemainingNum();\r\n        //             let rewardDatas=OfflineRevenueManager.getInstance().getRewards(2*60);\r\n        //             let rdNodes=new Array();\r\n        //             for(let i=0; i<rewardDatas.length; i++){\r\n        //                 let rd=rewardDatas[i];\r\n        //                 let item=PropManager.getInstance().createPropItem(rd.reward_id,rd.reward_num);\r\n        //                 PropManager.getInstance().changePropNum(rd.reward_id,rd.reward_num);\r\n        //                 rdNodes.push(item);\r\n        //             }\r\n        //             GameManager.getInstance().showMultipleGetTip(rdNodes);\r\n        //         }else{\r\n        //             GameManager.getInstance().showMessage(LanguageManager.getInstance().getString(LanguageIndex.Insufficient_gems));\r\n        //         }                \r\n        //     }else{\r\n                \r\n        //     }\r\n        // }\r\n        \r\n    }\r\n\r\n    clickBtnVip(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        UIManager.getInstance().showPayUi({onClose:()=>{\r\n            this.showRemainTime();\r\n        }},0);\r\n    }\r\n\r\n    clickBtnClose(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.unschedule(this.showRemainTime);\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n        cc.director.on(WXADEnvnt.KUAISUGUAJISHIPIN, this.onShipinComp, this);\r\n    }\r\n\r\n    \r\n}\r\n"]}