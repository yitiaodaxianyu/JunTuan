{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\ChangMaoShou\\ChangMao.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,uEAAgE;AAEhE,wCAAuC;AACvC,sCAAiC;AACjC,4CAAwE;AAElE,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAO;IAA7C;;IA8CA,CAAC;IA3CG,yBAAM,GAAN;QACI,iBAAM,MAAM,WAAE,CAAC;QACf,iBAAM,yBAAyB,YAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAC7D,CAAC;IAED,kGAAkG;IAClG,qCAAkB,GAAlB,UAAmB,SAAiB;QAChC,IAAG,SAAS,EAAC;YACT,IAAI,IAAI,GAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACpD,IAAG,IAAI,CAAC,YAAY,EAAE,GAAC,CAAC,EAAC;gBACrB,IAAG,IAAI,CAAC,MAAM,IAAE,KAAK,EAAC;oBAClB,IAAI,QAAQ,GAAC,IAAI,mBAAQ,EAAE,CAAC;oBAC5B,QAAQ,CAAC,OAAO,GAAC,mBAAM,CAAC,uBAAuB,CAAC;oBAChD,QAAQ,CAAC,WAAW,GAAC,EAAE,CAAC;oBACxB,QAAQ,CAAC,SAAS,GAAC,qBAAQ,CAAC,MAAM,CAAC;oBACnC,QAAQ,CAAC,UAAU,GAAC,CAAC,CAAC,CAAC,CAAC;oBACxB,QAAQ,CAAC,cAAc,GAAC,iCAAY,CAAC,2BAA2B,CAAC;oBACjE,QAAQ,CAAC,SAAS,GAAC,CAAC,CAAC;oBACrB,SAAS,CAAC,SAAS,CAAC,QAAQ,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;oBAC/C,WAAW;oBACX,IAAI,SAAS,GAAC,SAAS,CAAC,SAAS,CAAC,mBAAM,CAAC,uBAAuB,CAAC,CAAC;oBAClE,IAAI,QAAQ,GAAC,CAAC,CAAC;oBACf,IAAG,SAAS,EAAC;wBACT,QAAQ,GAAC,SAAS,CAAC,WAAW,EAAE,CAAC;wBACjC,IAAG,QAAQ,GAAC,EAAE,EAAC;4BACX,QAAQ,GAAC,EAAE,CAAC;yBACf;wBACD,UAAU;wBACV,IAAI,QAAQ,GAAC,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBAC9C,QAAQ,CAAC,WAAW,GAAC,uBAAU,CAAC,KAAK,CAAC;wBACtC,IAAI,WAAW,GAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAA;wBAC/C,IAAI,UAAU,GAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,sBAAS,CAAC,SAAS,CAAC,GAAC,WAAW,CAAC,CAAA,aAAa;wBAC/F,IAAI,YAAY,GAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,sBAAS,CAAC,SAAS,CAAC,GAAC,QAAQ,GAAC,WAAW,CAAC,CAAA,oBAAoB;wBACjH,IAAI,WAAW,GAAC,UAAU,GAAC,YAAY,CAAC,CAAA,UAAU;wBAClD,IAAG,WAAW,GAAC,CAAC,EAAC;4BACb,SAAS,CAAC,YAAY,CAAC,QAAQ,EAAC,WAAW,CAAC,CAAC;yBAChD;qBACJ;iBACJ;aACJ;YACD,iBAAM,WAAW,WAAE,CAAC;SACvB;IACL,CAAC;IA7CgB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA8C5B;IAAD,eAAC;CA9CD,AA8CC,CA9CqC,iBAAO,GA8C5C;kBA9CoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { GameEffectId } from \"../../../Game/GameEffectsManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport { BuffData } from \"../BuffData\";\r\nimport Bullect from \"../Bullect\";\r\nimport { BuffId, BuffType, SkillType, DamageType } from \"../HeroConfig\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ChangMao extends Bullect {\r\n\r\n\r\n    onLoad(): void {\r\n        super.onLoad();\r\n        super.addCollisionMonsterListen(this.onCollisionMonster);\r\n    }\r\n    \r\n    ////--------------------------------------碰撞开始----------------------------------------------------\r\n    onCollisionMonster(monsterTs:Monster) {\r\n        if(monsterTs){            \r\n            let data=monsterTs.beFlashInjured(this.gongji_data);\r\n            if(data.getDamageNum()>0){                            \r\n                if(data.is_die==false){\r\n                    let buffData=new BuffData();\r\n                    buffData.buff_id=BuffId.Hero_ChangMaoShow_Skill;\r\n                    buffData.remain_time=60;\r\n                    buffData.buff_type=BuffType.Normal;\r\n                    buffData.buff_value=[5];\r\n                    buffData.game_effect_id=GameEffectId.chang_mao_shou_skill_zhuazi;\r\n                    buffData.add_floor=1;\r\n                    monsterTs.addDeBuff(buffData,this.gongji_data);\r\n                    //判断有几层buff\r\n                    let buffFloor=monsterTs.getDeBuff(BuffId.Hero_ChangMaoShow_Skill);\r\n                    let floorNum=0;\r\n                    if(buffFloor){\r\n                        floorNum=buffFloor.getFloorNum();\r\n                        if(floorNum>10){\r\n                            floorNum=10;\r\n                        }\r\n                        /**额外真伤 */\r\n                        let realData=cc.instantiate(this.gongji_data);\r\n                        realData.damage_type=DamageType.Skill;\r\n                        let totalAttack=realData.hero_data.total_attack\r\n                        let realDamage=realData.hero_data.getSkillValue1(SkillType.Passive_1)*totalAttack;//0.2*100==20\r\n                        let exRealDamage=realData.hero_data.getSkillValue2(SkillType.Passive_1)*floorNum*totalAttack;//0.05,5=0.25*100=25\r\n                        let finalDamage=realDamage+exRealDamage;//20+25=45\r\n                        if(finalDamage>0){\r\n                            monsterTs.beRealDamage(realData,finalDamage);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            super.destroySelf();\r\n        }\r\n    }\r\n}\r\n"]}