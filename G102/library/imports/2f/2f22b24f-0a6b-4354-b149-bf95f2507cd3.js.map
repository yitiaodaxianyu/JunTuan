{"version":3,"sources":["assets\\Scripts\\Pet\\Ui\\PetSetFreeUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ApkManager from \"../../Ads/ApkManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { RewardData } from \"../../JsonData/LevelJsonData\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport UIComponent from \"../../UI/UIComponent\";\r\nimport { UiAction } from \"../../UI/UiInterface\";\r\nimport { PetInfo } from \"../PetConfig\";\r\nimport { PetManager } from \"../PetManager\";\r\nimport BtnPet from \"./BtnPet\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PetSetFreeUi extends UIComponent {\r\n\r\n    private pet_info_list:PetInfo[] = [];\r\n    private reward_list:RewardData[] =[];\r\n\r\n    @property(cc.Prefab)\r\n    pet_item:cc.Prefab = null;\r\n    \r\n    init(uiAc: UiAction): void {\r\n        super.init(uiAc);\r\n    }\r\n\r\n    initData(petInfoList:PetInfo[]){\r\n        this.pet_info_list = petInfoList;\r\n        this.refreshUi();\r\n    }\r\n\r\n    refreshUi(){\r\n        let content1 = this.node.getChildByName(\"petScroll\").getComponent(cc.ScrollView).content;\r\n        let content2 = this.node.getChildByName(\"rewardScroll\").getComponent(cc.ScrollView).content;\r\n\r\n        this.pet_info_list.forEach((v,k) =>{\r\n            // let data:JsonSpiritRelease = SpiritReleaseManager.getInstance().getDataByQualityAndRarity(v.pet_quality,SpiritMessageManager.getInstance().getSpiritRarity(v.pet_id));\r\n            // let rewardData:RewardData = new RewardData();\r\n            // rewardData.reward_id = data.GetItem;\r\n            // rewardData.reward_num = data.GetNum;\r\n            // let isAdd = false;\r\n            // this.reward_list.find((v,i,a) => {\r\n            //     if(v.reward_id == data.GetItem){\r\n            //         v.reward_num += data.GetNum;\r\n            //         isAdd = true\r\n            //     }\r\n            // });\r\n            // if(isAdd == false){\r\n            //     this.reward_list.push(rewardData);\r\n            // }\r\n        });\r\n\r\n        this.pet_info_list.forEach((v,k) =>{\r\n            let petItem = cc.instantiate(this.pet_item);\r\n            petItem.getComponent(BtnPet).init(v);\r\n            content1.addChild(petItem);\r\n        });\r\n\r\n        this.reward_list.forEach((v,k) => {\r\n            let item = PropManager.getInstance().createPropItem(v.reward_id,v.reward_num);\r\n            content2.addChild(item);\r\n        });\r\n    }\r\n\r\n    onClickSureBtn(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.pet_info_list.forEach((v,k) =>{\r\n        //    PetManager.getInstance().removePet(v);\r\n        });\r\n\r\n        this.reward_list.forEach((v,k) =>{\r\n            PropManager.getInstance().changePropNum(v.reward_id,v.reward_num);\r\n        });\r\n        let rewardList:cc.Node[] = [];\r\n        this.reward_list.forEach((v,k) => {\r\n            let item = PropManager.getInstance().createPropItem(v.reward_id,v.reward_num);\r\n            rewardList.push(item);\r\n        });\r\n        GameManager.getInstance().showMultipleGetTip(rewardList,(() => {\r\n            this.destroySelf();\r\n        }).bind(this));\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_Fangsheng);\r\n    }\r\n\r\n    clickBtnClose()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.destroySelf();\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n        // EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_SignIn);\r\n    }\r\n\r\n}\r\n"]}