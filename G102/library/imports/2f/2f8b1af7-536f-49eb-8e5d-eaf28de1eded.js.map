{"version":3,"sources":["assets\\Scripts\\Maze\\MazeFightingUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameManager from \"../GameManager\";\r\nimport { MonsterConfigureManager } from \"../Monster/Data/MonsterConfigure\";\r\nimport { MonsterIconManager } from \"../Monster/MonsterIconManager\";\r\nimport { Follow_Type } from \"../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../multiLanguage/FollowManager\";\r\nimport LanguageManager from \"../multiLanguage/LanguageManager\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport ToPlayMainUi from \"../UI/home/ToPlayMainUi\";\r\nimport UIComponent from \"../UI/UIComponent\";\r\nimport { UIPath, UILayerLevel } from \"../UI/UIConfig\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport { RogueHexagonTypesManager } from \"../copy/voidcrack/RogueHexagonTypes\";\r\nimport { RogueRewardManager } from \"./Data/RogueReward\";\r\nimport { RogueTextManager } from \"./Data/RogueText\";\r\nimport { MazeManager } from \"./MazeManager\";\r\nimport MazeUi from \"./MazeUi\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MazeFightingUi extends UIComponent {\r\n    /**格子id */\r\n    box_id:number=10032;\r\n    @property([cc.SpriteFrame])\r\n    sp_icon:cc.SpriteFrame[]=[];\r\n    is_can_go:boolean=false;    \r\n\r\n    initData(id:number,isCanGo:boolean){\r\n        this.box_id=id;\r\n        this.is_can_go=isCanGo;  \r\n        this.initUi();\r\n    }\r\n    \r\n    initUi(){\r\n        this.node.getChildByName('btnYes').active=this.is_can_go;\r\n        //标题\r\n        let type=RogueHexagonTypesManager.getInstance().getHexagonType(this.box_id);\r\n        let jsonData=RogueTextManager.getInstance().getJsonRogueText(type);\r\n        let titleLabel=this.node.getChildByName('titleLabel');\r\n        titleLabel.getComponent(cc.Label).string=LanguageManager.getInstance().getStrByTextId(jsonData.Roguetitle_ID);\r\n        let iconIndex=0;\r\n        switch(type){\r\n            case 1:{\r\n                iconIndex=0;\r\n            }break;\r\n            case 2:{\r\n                iconIndex=1;\r\n            }break;\r\n            case 6:{\r\n                iconIndex=2;\r\n            }break;\r\n        }\r\n        let icon=this.node.getChildByName('icon').getComponent(cc.Sprite);\r\n        icon.spriteFrame=this.sp_icon[iconIndex];\r\n        this.initItemList();\r\n        this.initMonsterList();\r\n    }\r\n\r\n    initItemList(){        \r\n        let rewadDatas=RogueRewardManager.getInstance().getRewardDatas(this.box_id);\r\n        let content=this.node.getChildByName('rewardsScrollView').getComponent(cc.ScrollView).content;\r\n        for(let i=0; i<rewadDatas.length; i++){\r\n            let rd=rewadDatas[i];\r\n            let item=PropManager.getInstance().createPropItem(rd.reward_id,rd.reward_num);\r\n            content.addChild(item);\r\n        }\r\n    }\r\n\r\n    initMonsterList(){\r\n        let content=this.node.getChildByName('monsterScrollView').getComponent(cc.ScrollView).content;\r\n        //获得关卡信息,怪物种类\r\n        let monsterInfoList=MazeManager.getInstance().getFightingInfo(this.box_id).getOnlyMonsterDataList();\r\n        monsterInfoList.sort((a,b)=>{\r\n            let aType=MonsterConfigureManager.getInstance().getStrengthType(a.id);\r\n            let bType=MonsterConfigureManager.getInstance().getStrengthType(b.id);\r\n            return bType-aType\r\n        })\r\n        monsterInfoList.forEach((data,key)=>{\r\n            //cc.log(data.id);\r\n            let icon=MonsterIconManager.getInstance().createMonsterIcon(data.id,data.level);\r\n            icon.anchorY=0;\r\n            content.addChild(icon);\r\n        })\r\n    }\r\n\r\n    clickBtnYes(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        if(this.is_can_go){\r\n            if(MazeManager.getInstance().getMazeHp()>0){\r\n                if(MazeManager.getInstance().getFightingId()!=this.box_id){\r\n                    FollowManager.getInstance().followEvent(Follow_Type.rogue玩法战斗事件);\r\n                    MazeManager.getInstance().setFightingId(this.box_id);\r\n                    MazeUi.getInstance().refreshFloor();\r\n                    // UIManager.getInstance().showMapUi({onRefresh:()=>{\r\n                    //     MazeUi.getInstance().node.removeFromParent();\r\n                    // }});\r\n                    UIManager.getInstance().showUiDialog(UIPath.ToPlay,UILayerLevel.One,{onCompleted:(uiNode)=> {\r\n                        uiNode.getComponent(ToPlayMainUi).init({onRefresh:()=>{\r\n                            MazeUi.getInstance().node.removeFromParent();\r\n                        }});\r\n                    },})\r\n                }else{\r\n                    // UIManager.getInstance().showMapUi({onRefresh:()=>{\r\n                    //     MazeUi.getInstance().node.removeFromParent();\r\n                    // }});\r\n                    UIManager.getInstance().showUiDialog(UIPath.ToPlay,UILayerLevel.One,{onCompleted:(uiNode)=> {\r\n                        uiNode.getComponent(ToPlayMainUi).init({onRefresh:()=>{\r\n                            MazeUi.getInstance().node.removeFromParent();\r\n                        }});\r\n                    },})\r\n                    //MazeManager.getInstance().setPassingId(this.box_id);\r\n                }\r\n            }else{\r\n                GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(830024));\r\n            }            \r\n        }\r\n        super.onClose();\r\n    }\r\n\r\n    clickBtnNo(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        super.onClose();\r\n    }\r\n    \r\n}\r\n"]}