{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\PaoShou\\TouDan.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GameEffectId, GameEffectsManager } from \"../../../Game/GameEffectsManager\";\r\nimport GameManager from \"../../../GameManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport MonsterManager from \"../../../Monster/MonsterManager\";\r\nimport { SoundIndex } from \"../../../Sound/AudioConstants\";\r\nimport MyTool from \"../../../Tools/MyTool\";\r\nimport { GongJiData } from \"../../Data/HeroData\";\r\nimport GongJi from \"../GongJi\";\r\nimport { PaoDan_Type } from \"../HeroConfig\";\r\nimport PaoDanBaoZha from \"./PaoDanBaoZha\";\r\n\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TouDan extends GongJi {\r\n\r\n    @property({type:cc.Enum(PaoDan_Type)})\r\n    paodan_type:PaoDan_Type=PaoDan_Type.skill;\r\n\r\n    game_effect_id:GameEffectId=GameEffectId.Null;    \r\n    //目标地点，到达后爆炸\r\n    target_pos:cc.Vec2=null;\r\n\r\n    init(id:GameEffectId,targetPos:cc.Vec2,gjData:GongJiData)\r\n    {\r\n        super.initData(gjData);\r\n        this.game_effect_id=id;\r\n        this.target_pos=targetPos;\r\n        //距离\r\n        let jtTime=0.6;\r\n        this.node.scale=3;\r\n        this.node.x=targetPos.x;\r\n        let yy=GameManager.getInstance().enemy_att_y;\r\n        let disScale=1.5-(this.target_pos.y-yy)/1000;\r\n        //this.node.y=cc.winSize.height/2+200;\r\n        cc.tween(this.node).then(cc.spawn(cc.scaleTo(jtTime,disScale),cc.moveTo(jtTime,targetPos))).call(this.destroySelf,this).start();        \r\n        // let node=GroundManager.getInstance().createGameEffectById(GameEffectId.paoshou_paodan_luodi,this.target_pos);\r\n        // cc.tween(node).delay(jtTime).call(()=>{\r\n        //     GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.paoshou_paodan_luodi,node);\r\n        // }).start();\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        //判断是否是分裂出来的,分裂过就不能分裂了\r\n        this.createBomb();\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_PaoShouSkill2);\r\n        GameEffectsManager.getInstance().destroyGameEffectById(this.game_effect_id,this.node);\r\n    }\r\n\r\n    createBomb(){\r\n        let baozha=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.paoshou_paodan_hit,this.target_pos);\r\n        // baozha.getComponent(PaoDanBaoZha).init(GameEffectId.paoshou_active_skill_2,PaoDan_Type.super,this.gongji_data);\r\n        // //baozha.scale=this.gongji_data.hero_data.SkillValue_2/100;\r\n        let sheshouEx1=this.gongji_data.hero_data.ExclusiveWeaponSkillValue_1;\r\n        let aoe=0;\r\n        if(sheshouEx1&&sheshouEx1>0){\r\n            //范围提升\r\n            aoe=sheshouEx1;\r\n        }\r\n        MyTool.randomSceneShake(-5,5,0.02,6);\r\n        let monsters=MonsterManager.getInstance().getMonstersForCenterPos(-1,this.node.getPosition(),120*(1+aoe));\r\n        if(monsters){            \r\n            for(let i=0; i<monsters.length; i++){\r\n                let monsterTs=monsters[i].getComponent(Monster);\r\n                monsterTs.beFlashInjured(this.gongji_data);                \r\n            }\r\n        }\r\n        baozha.scale=1.75;\r\n    }\r\n}\r\n"]}