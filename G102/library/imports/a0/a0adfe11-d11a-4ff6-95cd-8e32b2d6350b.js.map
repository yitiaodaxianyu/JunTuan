{"version":3,"sources":["assets\\Scripts\\Boss\\Boss10\\BossSkill10.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GameState } from \"../../Constants\";\r\nimport { GameEffectId, GameEffectsManager } from \"../../Game/GameEffectsManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { BuffData } from \"../../Hero/Game/BuffData\";\r\nimport { BuffId, BuffType, Hero_Type } from \"../../Hero/Game/HeroConfig\";\r\nimport { MonsterAttData } from \"../../Monster/MonsterData\";\r\nimport Wall from \"../../Wall/Wall\";\r\nimport { WallType } from \"../../Wall/WallConfig\";\r\nimport BossBullet from \"../BossBullet\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BossSkill10 extends cc.Component {\r\n\r\n    @property()\r\n    acc_num:number=0;\r\n\r\n    game_effect_id:number=0;\r\n    move_speed:number=700;\r\n    move_direction:number=Math.PI/2;\r\n    offset_xx_angle:number=90;\r\n    is_att:boolean=true;\r\n    monster_att_data:MonsterAttData=null;\r\n    cur_acc_num:number=0;\r\n\r\n    collision_target_callback:Function=null;\r\n    is_can_move:boolean=true;\r\n    boss_yy:number=0;\r\n    /**碰撞器 */\r\n    collider:cc.Collider=null;\r\n\r\n    init(monsterAttData:MonsterAttData,gameEffectId:GameEffectId,speed:number,dir:number,bossY:number,angle:number=90)\r\n    {\r\n        this.monster_att_data=monsterAttData;\r\n        this.game_effect_id=gameEffectId;\r\n        this.move_speed=speed;\r\n        this.offset_xx_angle=angle;\r\n        this.is_att=false;\r\n        this.cur_acc_num=this.acc_num;\r\n        this.boss_yy=bossY;\r\n        this.setDirection(dir);\r\n        this.node.getComponent(cc.Animation).play(\"e51010\");\r\n        this.collider=this.getComponent(cc.Collider);\r\n    }\r\n\r\n    startFly(){\r\n        this.is_can_move=true;\r\n        this.node.getComponent(cc.Animation).play(\"e51011\");\r\n    }\r\n\r\n    update (dt) {\r\n        if(GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n        return;        \r\n        let prevPos=this.node.getPosition();\r\n        if(this.acc_num>0){            \r\n            this.cur_acc_num+=this.acc_num*dt;            \r\n        }\r\n        this.move_speed+=this.cur_acc_num;\r\n        if(this.move_speed>=10000){\r\n            this.move_speed=10000;\r\n        }\r\n        let xx=this.move_speed*dt*Math.cos(this.move_direction);\r\n        let yy=this.move_speed*dt*Math.sin(this.move_direction);\r\n        this.node.x+=xx;\r\n        this.node.y+=yy;\r\n        this.collider.enabled=this.node.y<=this.boss_yy;\r\n        if(this.node.y>cc.winSize.height){\r\n            this.destroySelf();\r\n        }\r\n        if(Math.abs(this.node.x)>cc.winSize.width){\r\n            this.destroySelf();\r\n        }        \r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        GameEffectsManager.getInstance().destroyGameEffectById(this.game_effect_id,this.node);\r\n    }\r\n\r\n    setDirection(dir:number)\r\n    {\r\n        this.move_direction=dir;\r\n        this.node.angle=180*dir/Math.PI-this.offset_xx_angle;\r\n    }\r\n    /**添加城墙碰撞的监听,指玩家召唤的城墙 */\r\n    addCollisionWallListen(callback:Function){\r\n        this.collision_target_callback=callback;\r\n    }\r\n\r\n    ////--------------------------------------碰撞开始----------------------------------------------------\r\n    onCollisionEnter(other:cc.Collider,self:cc.Collider) {\r\n        let gm=GameManager.getInstance();        \r\n        if(gm.cur_game_state==GameState.Game_Lose || this.is_att==true)\r\n            return;\r\n        let group=other.node.group;\r\n        switch(group){\r\n            case 'wall':{\r\n                let wall=other.node.getComponent(Wall);\r\n                if(wall){\r\n                    this.monster_att_data.is_big=false;\r\n                    let data=wall.beInjured(this.monster_att_data)\r\n                    this.destroySelf();\r\n                    if(data.getDamageNum()>0){                \r\n                        GameEffectsManager.getInstance().createGameEffectById(GameEffectId.boss10_skill2_hit,this.node.getPosition());                        \r\n                    }\r\n                    \r\n                }\r\n            }break;\r\n            // case 'wall':{                \r\n            //     this.collisionToWall(other.node.name);\r\n            // }break;\r\n        }\r\n    }\r\n\r\n    ////--------------------------------------碰撞开始----------------------------------------------------\r\n    onCollisionWall(wall:Wall) {\r\n        \r\n    }\r\n}\r\n"]}