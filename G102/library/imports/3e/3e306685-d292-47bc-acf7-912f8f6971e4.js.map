{"version":3,"sources":["assets\\Scripts\\GuaJi\\Ui\\GuaJiGift.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { OfflineRevenueManager } from \"../../JsonData/OfflineRevenue\";\r\nimport { Follow_Type } from \"../../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../../multiLanguage/FollowManager\";\r\nimport { EventManager, RedEventString, RedEventType } from \"../../Tools/EventManager\";\r\nimport { UILayerLevel, UIPath } from \"../../UI/UIConfig\";\r\nimport { UIManager } from \"../../UI/UIManager\";\r\nimport OfflineUi from \"./OfflineUi\";\r\n\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GuaJiGift extends cc.Component {\r\n\r\n    reward_num:number=0;\r\n    skeleton:sp.Skeleton=null;\r\n    icon_index:number=0;\r\n    is_press:boolean=false;\r\n\r\n    protected onLoad(): void {\r\n        this.skeleton=this.node.getComponent(sp.Skeleton);\r\n        // this.node.on(cc.Node.EventType.TOUCH_START,()=>{\r\n        //     this.skeleton.setAnimation(0,\"chest_start\"+this.icon_index,true);\r\n        //     this.is_press=true;\r\n        // },this);\r\n        // this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this);\r\n        // this.node.on(cc.Node.EventType.TOUCH_CANCEL,()=>{\r\n        //     this.skeleton.setAnimation(0,\"chest_idle\"+this.icon_index,true);\r\n        //     this.is_press=false;\r\n        // },this);\r\n    }\r\n\r\n    onEnable () {\r\n        this.cheak();\r\n        this.unschedule(this.cheak);\r\n        this.schedule(this.cheak,10);\r\n    }\r\n\r\n    cheak()\r\n    {\r\n        let offsetMin=OfflineRevenueManager.getGuaJiMin();\r\n        if(offsetMin>480)\r\n        {\r\n            offsetMin=480;\r\n        }\r\n        if(offsetMin<0)\r\n        {\r\n            offsetMin=0;\r\n        }\r\n        let iconIndex=0;\r\n        if(offsetMin<30){\r\n            iconIndex=0;\r\n        }else if(offsetMin<60){\r\n            iconIndex=1;\r\n        }else if(offsetMin<90){\r\n            iconIndex=2;\r\n        }else if(offsetMin<120){\r\n            iconIndex=3;\r\n        }else if(offsetMin<150){\r\n            iconIndex=4;            \r\n        }else{\r\n            iconIndex=5;\r\n        }\r\n        this.icon_index=iconIndex;        \r\n        if(this.is_press==false){\r\n            //this.skeleton.setAnimation(0,\"chest_idle\"+this.icon_index,true);\r\n        }        \r\n    }\r\n\r\n    onClick()\r\n    {        \r\n        // FollowManager.getInstance().followEvent(Follow_Type.挂机奖励点击用户数);\r\n        FollowManager.getInstance().followEvent(Follow_Type.离线奖励点击次数);\r\n        //this.skeleton.setAnimation(0,\"chest_idle\"+this.icon_index,true);        \r\n        UIManager.getInstance().showUiDialog(UIPath.Guaji,UILayerLevel.One,{onCompleted:(uiNode)=> {\r\n            uiNode.getComponent(OfflineUi).init({\r\n                onRefresh:()=>{\r\n                    this.cheak();\r\n                    EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_Guaji);\r\n                }\r\n            })\r\n        },})\r\n        this.is_press=false;\r\n        this.cheak();        \r\n    }\r\n\r\n\r\n\r\n    \r\n}\r\n"]}