{"version":3,"sources":["assets\\Scripts\\UI\\home\\LevelSelect.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameData from \"../../GameData\";\r\nimport { LevelManager } from \"../../Level/LevelManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LevelSelect extends cc.Component {\r\n\r\n    content:cc.Node=null;\r\n    level_scrollView:cc.ScrollView=null;\r\n    touch_action:cc.Tween=null;\r\n    click_action:cc.Tween=null;\r\n\r\n    onLoad () {\r\n        this.level_scrollView=this.node.getComponent(cc.ScrollView);\r\n        this.content=this.level_scrollView.content;\r\n    }\r\n\r\n    start () {        \r\n        let levelBtns=this.content.children;\r\n\r\n        this.content.x=-levelBtns[LevelManager.getInstance().start_level-1].x;\r\n    }\r\n\r\n    //--------------------------------------关卡按钮----------------------------------------------\r\n    update (dt) {\r\n        let levelBtns=this.content.children;\r\n        let len=this.content.childrenCount;\r\n        for(let i=0; i<len; i++)\r\n        {\r\n            let levelBtn=levelBtns[i];\r\n            let scale=0.9-Math.abs(levelBtn.x+this.content.x)/240*0.4;\r\n            if(scale<0.5)\r\n            {\r\n                scale=0.5;\r\n            }\r\n            levelBtn.scale=scale;\r\n        }\r\n    }\r\n\r\n    onTouchScrollView(e:cc.ScrollView,eventType:cc.ScrollView.EventType)\r\n    {\r\n        if(eventType==cc.ScrollView.EventType.SCROLL_ENDED)\r\n        {\r\n            this.onTouchEnd();\r\n        }else if(eventType==cc.ScrollView.EventType.SCROLL_BEGAN)\r\n        {\r\n            if(this.click_action)\r\n            {\r\n                this.click_action.stop();\r\n            }\r\n            if(this.touch_action)\r\n            {\r\n                this.touch_action.stop();\r\n            }\r\n            //this.content.stopAllActions();\r\n        }\r\n    }\r\n\r\n    onTouchEnd()\r\n    {\r\n        //算出levelBtn.x+this.content.x最靠近0的levelBtn\r\n        let minX=350;\r\n        let minIndex=0;\r\n        let levelBtns=this.content.children;\r\n        let len=this.content.childrenCount;\r\n        for(let i=0; i<len; i++)\r\n        {\r\n            let levelBtn=levelBtns[i];\r\n            let offsetX=Math.abs(levelBtn.x+this.content.x);\r\n            if(offsetX<minX)\r\n            {\r\n                minIndex=i;\r\n                minX=offsetX;\r\n            }\r\n        }\r\n        if(this.click_action)\r\n        {\r\n            this.click_action.stop();\r\n        }\r\n        if(this.touch_action)\r\n        {\r\n            this.touch_action.stop();\r\n        }\r\n        //然后让content滚动至levelBtn的坐标位置.\r\n        this.touch_action=cc.tween(this.content).to(0.2,{x:-levelBtns[minIndex].x}).start();\r\n    }\r\n\r\n    clickBtnLevel(b,strIndex:string)\r\n    {\r\n        let index=parseInt(strIndex);\r\n        let levelBtns=this.content.children;\r\n        if(this.click_action)\r\n        {\r\n            this.click_action.stop();\r\n        }\r\n        if(this.touch_action)\r\n        {\r\n            this.touch_action.stop();\r\n        }\r\n        this.click_action=cc.tween(this.content).to(0.2,{x:-levelBtns[index].x}).start();\r\n    }\r\n}\r\n"]}