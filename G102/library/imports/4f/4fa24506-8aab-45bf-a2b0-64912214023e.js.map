{"version":3,"sources":["assets\\Scripts\\Payment\\Data\\CumulativeRecharge.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { RewardData } from \"../../JsonData/LevelJsonData\";\r\nimport { LoadManager } from \"../../Loading/LoadManager\";\r\nimport { PropId } from \"../../Prop/PropConfig\";\r\n\r\nexport class JsonCumulativeRecharge {\r\n    /**累计充值ID */\r\n    public CumulativeRechargeID:number = 0 ;\r\n    /**显示顺序 */\r\n    public DisplayOrder:number = 0 ;\r\n    /**累计充值价格 */\r\n    public CumulativeRechargePrice:number = 0 ;\r\n    /**金币数量 */\r\n    public GetCoin:number = 0 ;\r\n    /**钻石数量 */\r\n    public GetGem:number = 0 ;\r\n    /**道具1ID */\r\n    public Item1_ID:number = 0 ;\r\n    /**道具1数量 */\r\n    public Item1_Num:number = 0 ;\r\n    /**道具2ID */\r\n    public Item2_ID:number = 0 ;\r\n    /**道具2数量 */\r\n    public Item2_Num:number = 0 ;\r\n    /**道具3ID */\r\n    public Item3_ID:number = 0 ;\r\n    /**道具3数量 */\r\n    public Item3_Num:number = 0 ;\r\n}\r\n\r\nexport class CumulativeRechargeManager {\r\n    private static _instance: CumulativeRechargeManager = null;\r\n    //把json数据转化成map数据\r\n    private data:Map<number,JsonCumulativeRecharge>=null;\r\n    private is_load_completed:boolean=false;\r\n\r\n    public static getInstance():CumulativeRechargeManager {\r\n        if(this._instance==null) {\r\n            this._instance=new CumulativeRechargeManager();\r\n            this._instance.init();\r\n        }\r\n        return this._instance;\r\n    }\r\n    //初始化游戏数据\r\n    private init() {\r\n        if(!this.data) {\r\n            this.loadJson();\r\n        }\r\n    }\r\n    //加载json\r\n    private loadJson() {\r\n        LoadManager.loadJson('CumulativeRecharge',LoadManager.load_mode,(error: Error, assets:cc.JsonAsset)=> {\r\n            if(error){\r\n                console.log(error);\r\n                return;\r\n            }\r\n            console.log('加载JsonCumulativeRecharge成功');\r\n            this.data=new Map();\r\n            let json=assets.json;\r\n            for(let i=0; i<json.length; i++){\r\n                let jsonData=new JsonCumulativeRecharge();\r\n                jsonData=json[i];\r\n                this.data.set(jsonData.CumulativeRechargeID,jsonData);\r\n            }\r\n            this.is_load_completed=true;\r\n        });\r\n    }\r\n\r\n    /**加载是否完成 */\r\n    public getIsLoadCompleted(): boolean{\r\n        return this.is_load_completed;\r\n    }\r\n    /**根据id号获取Json的各种数据 */\r\n    public getJsonCumulativeRecharge(id:number):JsonCumulativeRecharge {\r\n        return this.data.get(id);\r\n    }\r\n    /**根据累计充值ID获取显示顺序 */\r\n    public getDisplayOrder(id:number): number {\r\n        return this.data.get(id).DisplayOrder;\r\n    }\r\n    /**根据累计充值ID获取累计充值价格 */\r\n    public getCumulativeRechargePrice(id:number): number {\r\n        return this.data.get(id).CumulativeRechargePrice;\r\n    }\r\n    /**根据累计充值ID获取金币数量 */\r\n    public getGetCoin(id:number): number {\r\n        return this.data.get(id).GetCoin;\r\n    }\r\n    /**根据累计充值ID获取钻石数量 */\r\n    public getGetGem(id:number): number {\r\n        return this.data.get(id).GetGem;\r\n    }\r\n    /**根据累计充值ID获取道具1ID */\r\n    public getItem1_ID(id:number): number {\r\n        return this.data.get(id).Item1_ID;\r\n    }\r\n    /**根据累计充值ID获取道具1数量 */\r\n    public getItem1_Num(id:number): number {\r\n        return this.data.get(id).Item1_Num;\r\n    }\r\n    /**根据累计充值ID获取道具2ID */\r\n    public getItem2_ID(id:number): number {\r\n        return this.data.get(id).Item2_ID;\r\n    }\r\n    /**根据累计充值ID获取道具2数量 */\r\n    public getItem2_Num(id:number): number {\r\n        return this.data.get(id).Item2_Num;\r\n    }\r\n    /**根据累计充值ID获取道具3ID */\r\n    public getItem3_ID(id:number): number {\r\n        return this.data.get(id).Item3_ID;\r\n    }\r\n    /**根据累计充值ID获取道具3数量 */\r\n    public getItem3_Num(id:number): number {\r\n        return this.data.get(id).Item3_Num;\r\n    }\r\n\r\n    /** 静态方法，获取最大的 累计充值ID*/\r\n    public static getMaxCumulativeRechargeID():number {\r\n        return 80001;\r\n    }\r\n\r\n    //以上格式统一，以下写每个json数据的特殊需求\r\n    /**\r\n     * 获得奖励列表数据\r\n     * @param total 总共充值龙晶的数量\r\n     * @returns 奖励列表数据\r\n     */\r\n    getRewardData(id:number):RewardData[]{        \r\n        let rewardDatas=new Array();\r\n        let jsonData=this.getJsonCumulativeRecharge(id);\r\n        if(jsonData.GetCoin>0){\r\n            let rd=new RewardData();\r\n            rd.reward_id=PropId.Coin;\r\n            rd.reward_num=jsonData.GetCoin;\r\n            rewardDatas.push(rd);\r\n        }\r\n        if(jsonData.GetGem>0){\r\n            let rd=new RewardData();\r\n            rd.reward_id=PropId.Gem;\r\n            rd.reward_num=jsonData.GetGem;\r\n            rewardDatas.push(rd);\r\n        }\r\n        for(let i=1; i<=3; i++){\r\n            let id='Item'+i+'_ID';\r\n            if(jsonData[id]>0){\r\n                let rd=new RewardData();\r\n                rd.reward_id=jsonData[id];\r\n                rd.reward_num=jsonData['Item'+i+'_Num'];\r\n                rewardDatas.push(rd);\r\n            }\r\n        }\r\n        return rewardDatas;\r\n    }\r\n\r\n    getId(total:number):number{\r\n        let id=0;\r\n        let isFind=false;\r\n        this.data.forEach((v,k)=>{\r\n            if(!isFind && total<v.CumulativeRechargePrice){\r\n                id=v.CumulativeRechargeID;\r\n                isFind=true;\r\n            }\r\n        });\r\n        return id;\r\n    }\r\n    \r\n    getData():Map<number,JsonCumulativeRecharge>{\r\n        return this.data;\r\n    }\r\n}\r\n"]}