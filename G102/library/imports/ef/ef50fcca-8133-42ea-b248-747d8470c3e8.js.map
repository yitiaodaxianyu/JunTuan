{"version":3,"sources":["assets\\Scripts\\multiLanguage\\LabelLanguage.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { LanguageIndex, LanguageType } from \"./LanguageConstants\";\r\nimport LanguageManager from \"./LanguageManager\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LabelLanguage extends cc.Label {\r\n\r\n    //enableBold:boolean=true;\r\n    @property({type:cc.Enum(LanguageIndex)})\r\n    private cur_language_index: LanguageIndex = LanguageIndex.NULL;\r\n    //保存原本设定的Index，方便修改后恢复\r\n    private original_index:LanguageIndex = LanguageIndex.NULL;\r\n    private cur_language_type: LanguageType = LanguageType.en;\r\n\r\n    @property\r\n    get str_translation () {\r\n        return this.string;\r\n    }\r\n\r\n    set str_translation (newValue) {\r\n        let oldValue = this.string;            \r\n            if (newValue !== oldValue) {\r\n                this.startTranslationByStr(newValue);\r\n            }\r\n    }\r\n    \r\n    onLoad () {\r\n        this.original_index=this.cur_language_index;\r\n        this.startTranslation();\r\n    }\r\n\r\n    setLanguageIndex(index :LanguageIndex){\r\n        this.cur_language_index=index;\r\n        this.startTranslation();\r\n    }\r\n\r\n    getOriginalIndex(){\r\n        return this.original_index;\r\n    }\r\n\r\n    //开始翻译 \r\n    startTranslation () {\r\n        this.cur_language_type=LanguageManager.getInstance().getCurLanguageType();\r\n         //2.根据当前的字符串索引设置，如果为Null即没有预设,那么则开始查找，找不到就不翻译，维持原样\r\n         if(this.cur_language_index!=LanguageIndex.NULL)\r\n         {\r\n             this.string=LanguageManager.getInstance().getString(this.cur_language_index);\r\n         }else\r\n         {\r\n             if(this.string!='')\r\n             {\r\n                 let str=LanguageManager.getInstance().getStringByStr(this.string);\r\n                 if(str!='')\r\n                 {\r\n                     this.string=str;\r\n                 }\r\n             }                \r\n         }\r\n    }\r\n    //开始翻译 \r\n    startTranslationByStr(newStr:string)\r\n    {\r\n        //2.根据当前的字符串开始查找，找不到就不翻译，维持原样\r\n        if(newStr!='')\r\n        {\r\n            let str=LanguageManager.getInstance().getStringByStr(newStr);\r\n            if(str!='')\r\n            {\r\n                this.string=str;\r\n            }else\r\n            {\r\n                this.string=newStr;\r\n            }\r\n        }           \r\n    }\r\n    //如果需要动态切换语言就开启以下代码\r\n    update(dt)\r\n    {\r\n        if(this.cur_language_type!=LanguageManager.getInstance().getCurLanguageType())\r\n        {\r\n            this.startTranslation();\r\n        }\r\n    }\r\n\r\n    onDestroy()\r\n    {\r\n        super.onDestroy();\r\n    }\r\n}\r\n"]}