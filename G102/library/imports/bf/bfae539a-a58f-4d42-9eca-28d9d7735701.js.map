{"version":3,"sources":["assets\\Scripts\\Pet\\Ui\\PetListUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameManager from \"../../GameManager\";\r\nimport { Follow_Type } from \"../../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../../multiLanguage/FollowManager\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\nimport { MusicIndex } from \"../../Sound/AudioConstants\";\r\nimport TakeEggUi from \"../../TakeEgg/TakeEggUi\";\r\nimport { UILayerLevel, UIPath } from \"../../UI/UIConfig\";\r\nimport { UIManager } from \"../../UI/UIManager\";\r\nimport { PetInfo, PetType } from \"../PetConfig\";\r\nimport { PetManager } from \"../PetManager\";\r\nimport BtnPet from \"./BtnPet\";\r\n// import PetItem from \"./PetItem\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nenum PetListState{\r\n    List = 0,\r\n    SetFree = 1\r\n}\r\n\r\n@ccclass\r\nexport default class PetListUi extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    item:cc.Prefab = null;\r\n    @property(cc.SpriteAtlas)\r\n    pet_list_ui:cc.SpriteAtlas = null;\r\n    \r\n    private state: PetType = PetType.All;\r\n    private all_list: PetInfo[] = null;\r\n    private power_list: PetInfo[] = null;\r\n    private agile_list: PetInfo[] = null;\r\n    private intelligence_list: PetInfo[] = null;\r\n    private pet_list_state:PetListState = PetListState.List;\r\n    private choose_list : Map<number,PetInfo> = null;\r\n\r\n    private content: cc.Node = null;\r\n\r\n    onLoad() {\r\n        this.node.on(cc.Node.EventType.POSITION_CHANGED,this.onPositionChange,this);\r\n    }\r\n\r\n    protected onDestroy(): void {\r\n        this.node.off(cc.Node.EventType.POSITION_CHANGED,this.onPositionChange,this);\r\n    }\r\n\r\n    onPositionChange(){\r\n        if(this.node.x==0){\r\n            this.onEnable();\r\n        }\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        this.content = this.node.getChildByName(\"scroll0\").getComponent(cc.ScrollView).content;\r\n        this.choose_list = new Map<number,PetInfo>();\r\n        this.refreshUi();\r\n        this.refreshScroll();\r\n        //GameManager.getInstance().music_manager.playMusic(MusicIndex.BGM_Pets);\r\n        FollowManager.getInstance().followEvent(Follow_Type.宠物界面点击次数);\r\n    }\r\n\r\n    refreshUi() {\r\n        // this.node.getChildByName(\"selectTypeBg\").getChildByName(\"selectTypeBg\").setPosition(this.node.getChildByName(\"type\" + this.state).position)\r\n        let bottom =  this.node.getChildByName(\"bottom\");\r\n        this.node.getChildByName(\"top\").getChildByName(\"titleLabel\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(640002);\r\n        bottom.getChildByName(\"Sprite_Btn_Tab_0\").getComponentInChildren(cc.Label).string = LanguageManager.getInstance().getStrByTextId(640008);\r\n        bottom.getChildByName(\"Sprite_Btn_Tab_1\").getComponentInChildren(cc.Label).string = LanguageManager.getInstance().getStrByTextId(640002);\r\n        bottom.getChildByName(\"Sprite_Btn_Tab_2\").getComponentInChildren(cc.Label).string = LanguageManager.getInstance().getStrByTextId(640017);\r\n        bottom.getChildByName(\"Release_Bg_1\").getChildByName(\"num\").getComponent(cc.Label).string = this.choose_list.size + \"/100\";\r\n    }\r\n\r\n    refreshScroll() {\r\n        this.all_list = new Array<PetInfo>();\r\n        this.power_list = new Array<PetInfo>();\r\n        this.agile_list = new Array<PetInfo>();\r\n        this.intelligence_list = new Array<PetInfo>();\r\n        this.content.removeAllChildren();\r\n\r\n        // this.all_list = PetManager.getInstance().getPetList();\r\n        for (let i = 0; i < this.all_list.length; i++) {\r\n            // let type = SpiritMessageManager.getInstance().getSpiritType(this.all_list[i].pet_id);\r\n            // if (type == PetType.Power) {\r\n            //     this.power_list.push(this.all_list[i]);\r\n            // } else if (type == PetType.Agile) {\r\n            //     this.agile_list.push(this.all_list[i]);\r\n            // } else {\r\n            //     this.intelligence_list.push(this.all_list[i]);\r\n            // }\r\n        }\r\n        let tempList:PetInfo[];\r\n        switch (this.state) {\r\n            case PetType.All:\r\n                tempList = this.all_list;\r\n                break;\r\n            case PetType.Power:\r\n                tempList = this.power_list;\r\n                break;\r\n            case PetType.Agile:\r\n                tempList = this.agile_list;\r\n                break;\r\n            case PetType.Intelligence:\r\n                tempList = this.intelligence_list\r\n                break;\r\n        }\r\n        for (let i = 0; i < tempList.length; i++) {\r\n             if(this.pet_list_state == PetListState.List){\r\n                let item = cc.instantiate(this.item);\r\n                // item.getComponent(PetItem).init(tempList[i]);\r\n                item.setParent(this.content);\r\n                item.on(cc.Node.EventType.TOUCH_END,() => {\r\n                    UIManager.getInstance().showPetUpgradeUi({\r\n                        onClose:()=>{\r\n                            this.refreshScroll();\r\n                        }\r\n                    },tempList[i]);\r\n                });\r\n             }else{\r\n                let item = cc.instantiate(this.item);\r\n                // item.getComponent(PetItem).init(tempList[i]);\r\n                let kuang = new cc.Node();\r\n                kuang.addComponent(cc.Sprite).spriteFrame = this.pet_list_ui.getSpriteFrame(\"Release_Checkmark_Bg\");\r\n                kuang.setPosition(cc.v2(-item.width/2,item.height/2))\r\n                item.addChild(kuang);\r\n                if(this.choose_list.has(tempList[i].sequence_id)){\r\n                    let gou = new cc.Node();\r\n                    gou.addComponent(cc.Sprite).spriteFrame = this.pet_list_ui.getSpriteFrame(\"Release_Checkmark\");\r\n                    gou.setPosition(cc.v2(-item.width/2,item.height/2))\r\n                    item.addChild(gou);\r\n                }\r\n                item.setParent(this.content);\r\n                item.on(cc.Node.EventType.TOUCH_END,this.onClickSetFreePet.bind(this));\r\n             }\r\n        }\r\n\r\n    }\r\n\r\n    onSelectBtnClick(e,type:number){\r\n        this.state = Number(type)\r\n        this.refreshUi();\r\n        for (let i = 0; i < 4; i++) {\r\n            let scroll = this.node.getChildByName(\"scroll\" + i);\r\n            scroll.active = false;\r\n            if (i == this.state) {\r\n                scroll.active = true;\r\n                this.content = scroll.getComponent(cc.ScrollView).content;\r\n            }\r\n        }\r\n        let tempList;\r\n        switch (this.state) {\r\n            case PetType.All:\r\n                tempList = this.all_list;\r\n                break;\r\n            case PetType.Power:\r\n                tempList = this.power_list;\r\n                break;\r\n            case PetType.Agile:\r\n                tempList = this.agile_list;\r\n                break;\r\n            case PetType.Intelligence:\r\n                tempList = this.intelligence_list\r\n                break;\r\n        }\r\n        if(this.content.childrenCount != tempList.length){\r\n            this.refreshScroll();\r\n        }\r\n    }\r\n\r\n    onClickSetFreePet(e:cc.Event.EventTouch){\r\n        // if (this.choose_list.has(e.target.getComponent(PetItem).pet_info.sequence_id)) {\r\n        //         this.choose_list.delete(e.target.getComponent(PetItem).pet_info.sequence_id)\r\n        // }\r\n        // else{\r\n        //     this.choose_list.set(e.target.getComponent(PetItem).pet_info.sequence_id,e.target.getComponent(PetItem).pet_info);\r\n        // }\r\n        this.refreshScroll();\r\n    }\r\n\r\n    onClickGetBtn(){\r\n        FollowManager.getInstance().followEvent(Follow_Type.从宠物界面点击获取的次数);\r\n        // UIManager.getInstance().showTakeEggUi(null);\r\n        UIManager.getInstance().showUiDialog(UIPath.TakeEgg,UILayerLevel.One,{onCompleted:(uiNode)=> {\r\n            uiNode.getComponent(TakeEggUi).init(null);\r\n        },})\r\n    }\r\n\r\n    onClickSetFreePetBtn(){\r\n        let bottom = this.node.getChildByName(\"bottom\")\r\n        this.pet_list_state = PetListState.SetFree;\r\n        bottom.getChildByName(\"Release_Bg_1\").active = true;\r\n        bottom.getChildByName(\"Sprite_Btn_Tab_1\").getComponent(cc.Sprite).spriteFrame = this.pet_list_ui.getSpriteFrame(\"Sprite_Btn_Tab_0\");\r\n        bottom.getChildByName(\"Sprite_Btn_Tab_0\").getComponent(cc.Sprite).spriteFrame = this.pet_list_ui.getSpriteFrame(\"Sprite_Btn_Tab_1\");\r\n        this.refreshUi();\r\n        this.refreshScroll();\r\n    }\r\n\r\n    onClickPetBtn(){\r\n        let bottom = this.node.getChildByName(\"bottom\")\r\n        this.pet_list_state = PetListState.List;\r\n        bottom.getChildByName(\"Release_Bg_1\").active = false;\r\n        bottom.getChildByName(\"Sprite_Btn_Tab_1\").getComponent(cc.Sprite).spriteFrame = this.pet_list_ui.getSpriteFrame(\"Sprite_Btn_Tab_1\");\r\n        bottom.getChildByName(\"Sprite_Btn_Tab_0\").getComponent(cc.Sprite).spriteFrame = this.pet_list_ui.getSpriteFrame(\"Sprite_Btn_Tab_0\");\r\n        this.refreshUi();\r\n        this.refreshScroll();\r\n    }\r\n\r\n    onClickSetFreeBtn(){\r\n        if(this.choose_list.size == 0) return;\r\n        let tempList : PetInfo[] = [];\r\n        this.choose_list.forEach((v,k) => {\r\n            tempList.push(v);\r\n        });\r\n        UIManager.getInstance().showPetSetFreeUi({\r\n            onClose:(() =>{\r\n                this.refreshUi();\r\n                this.refreshScroll();\r\n            }).bind(this),\r\n        },tempList);\r\n    }\r\n\r\n}\r\n"]}