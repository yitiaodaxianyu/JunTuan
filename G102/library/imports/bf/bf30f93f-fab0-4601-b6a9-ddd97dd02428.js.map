{"version":3,"sources":["assets\\Scripts\\copy\\endlesschallenges\\MoppingUp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { BossChallengeManager } from \"../../Activity/BossChallenge\";\r\nimport { BossRewardManager } from \"../../Activity/BossReward\";\r\nimport { EndlessLevelsManager } from \"../../Activity/EndlessLevels\";\r\nimport { EndlessRewardManager } from \"../../Activity/EndlessReward\";\r\nimport GameManager from \"../../GameManager\";\r\nimport TextLanguage from \"../../multiLanguage/TextLanguage\";\r\nimport { PropId } from \"../../Prop/PropConfig\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport { StorageKey } from \"../../Storage/StorageConfig\";\r\nimport { TheStorageManager } from \"../../Storage/StorageManager\";\r\nimport { EventManager, RedEventString, RedEventType } from \"../../Tools/EventManager\";\r\nimport UIComponent from \"../../UI/UIComponent\";\r\nimport endlesschallenges from \"./endlesschallenges\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MoppingUp extends UIComponent {    \r\n    @property(cc.Node)\r\n    item: cc.Node[] = []\r\n\r\n    @property(cc.Node)\r\n    bttxt: cc.Node = null\r\n    @property(cc.Node)\r\n    text: cc.Node = null\r\n    @property(cc.Node)\r\n    num: cc.Node = null\r\n    RewardItem:number=0\r\n    RewardNum:number=0\r\n\r\n    RewardItem1:number=0\r\n    RewardNum1:number=0\r\n    type: number = 0//2:无尽挑战   3：boss挑战\r\n\r\n    othernode:cc.Node=null//刷新父节点的排行榜\r\n    initUi(type,othernode?) {//2:无尽挑战   3：boss挑战\r\n        this.type=type\r\n        this.othernode=othernode\r\n        // GameManager.getInstance().music_manager.playMusic(MusicIndex.BGM_TJP);\r\n        // FollowManager.getInstance().followEvent(Follow_Type.铁匠铺打开次数);\r\n        if (type == 2) {\r\n            let damage=EndlessLevelsManager.getInstance().getMaxWave()//TheStorageManager.getInstance().getNumber(StorageKey.UnlimitedChallengeDamage,0);\r\n            if(damage>EndlessRewardManager.getMaxRewardLevel()){\r\n                damage=EndlessRewardManager.getMaxRewardLevel()\r\n            }\r\n            let RewardItem=EndlessRewardManager.getInstance().getRewardItem(damage)\r\n            let RewardNum=EndlessRewardManager.getInstance().getRewardNum(damage)\r\n            this.RewardItem=RewardItem\r\n            this.RewardNum=RewardNum\r\n            let items=PropManager.getInstance().createPropItem(RewardItem,RewardNum);\r\n            this.item[0].x=0\r\n            items.parent=this.item[0]\r\n            this.text.getComponent(TextLanguage).setTextId(800016)//上次波数\r\n            this.bttxt.getComponent(TextLanguage).setTextId(800015)//上次波数\r\n            let mynum=damage\r\n            this.num.getComponent(cc.Label).string=\"\"+mynum\r\n        } else if (type == 3) {\r\n            let damage=TheStorageManager.getInstance().getNumber(StorageKey.BossChallengeDamage,-1);//BossChallengeManager.getInstance().getMaxDamageNumber()//S\r\n            let RewardLevel=BossRewardManager.getInstance().getRewardLevel(damage)\r\n            let RewardItem=BossRewardManager.getInstance().getRewardItem(RewardLevel)\r\n            let RewardNum=BossRewardManager.getInstance().getRewardNum(RewardLevel)\r\n            this.RewardItem=RewardItem\r\n            this.RewardNum=RewardNum\r\n            let items=PropManager.getInstance().createPropItem(RewardItem,RewardNum);\r\n            this.item[0].x=-80\r\n            items.parent=this.item[0]\r\n\r\n            let RewardItem1=BossRewardManager.getInstance().getRewardItem_2(RewardLevel)\r\n            let RewardNum1=BossRewardManager.getInstance().getRewardNum_2(RewardLevel)\r\n            this.RewardItem1=RewardItem1\r\n            this.RewardNum1=RewardNum1\r\n            let items1=PropManager.getInstance().createPropItem(RewardItem1,RewardNum1);\r\n            this.item[1].x=80\r\n            items1.parent=this.item[1]\r\n\r\n            this.text.getComponent(TextLanguage).setTextId(820015)//上次伤害\r\n            this.bttxt.getComponent(TextLanguage).setTextId(820014)//上次伤害\r\n            let mynum=damage\r\n            this.num.getComponent(cc.Label).string=\"\"+mynum\r\n        }\r\n    }\r\n    clickBtnYes(){//确认扫荡\r\n        let num\r\n        let totalnum\r\n        if (this.type == 2) {\r\n            totalnum=TheStorageManager.getInstance().getNumber(StorageKey.TotalUnlimitedChallengeTimes,0);\r\n            num = TheStorageManager.getInstance().getNumber(StorageKey.UnlimitedChallengeTimes,3);\r\n            num--;\r\n            totalnum++\r\n            TheStorageManager.getInstance().setItem(StorageKey.TotalUnlimitedChallengeTimes,totalnum);\r\n            TheStorageManager.getInstance().setItem(StorageKey.UnlimitedChallengeTimes,num);\r\n\r\n            PropManager.getInstance().changePropNum(this.RewardItem,this.RewardNum);\r\n            let items=PropManager.getInstance().createPropItem(this.RewardItem,this.RewardNum);\r\n            GameManager.getInstance().showGetTip(items);\r\n        } else if (this.type == 3) {\r\n            let damage=TheStorageManager.getInstance().getNumber(StorageKey.BossChallengeDamage,-1);\r\n            let zon=damage+BossChallengeManager.getInstance().getMaxDamageNumber()\r\n            BossChallengeManager.getInstance().setDamageNumber(zon)//游戏胜利之后保存\r\n            \r\n            totalnum=TheStorageManager.getInstance().getNumber(StorageKey.TotalBossChallengeTimes,0);\r\n            num = TheStorageManager.getInstance().getNumber(StorageKey.BossChallengeTimes,3);\r\n            num--;\r\n            totalnum++\r\n            TheStorageManager.getInstance().setItem(StorageKey.TotalBossChallengeTimes,totalnum);\r\n            TheStorageManager.getInstance().setItem(StorageKey.BossChallengeTimes,num);\r\n\r\n            this.othernode.getComponent(endlesschallenges).initUi(3)\r\n\r\n            PropManager.getInstance().changePropNum(this.RewardItem,this.RewardNum);\r\n            PropManager.getInstance().changePropNum(this.RewardItem1,this.RewardNum1);\r\n            let items=PropManager.getInstance().createPropItem(this.RewardItem,this.RewardNum);\r\n            let items1=PropManager.getInstance().createPropItem(this.RewardItem1,this.RewardNum1);\r\n            GameManager.getInstance().showMultipleGetTip([items,items1]);\r\n        }\r\n\r\n        this.clickBtnClose()\r\n        EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Activity);\r\n    }\r\n    shanchu(){\r\n        for (let index = 0; index < this.item.length; index++) {\r\n            if(this.item[index].childrenCount>0){\r\n                this.item[index].children[0].destroy()  \r\n            }\r\n        }\r\n    }\r\n\r\n    clickBtnClose()//关闭\r\n    {\r\n        this.shanchu()\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.onClose();\r\n    }\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    // start () {\r\n\r\n    // }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}