{"version":3,"sources":["assets\\Scripts\\Payment\\QuarterCard.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ActivityManager, ActivityType } from \"../Activity/ActivityManager\";\r\nimport ApkManager from \"../Ads/ApkManager\";\r\nimport { DingYue_Type } from \"../Ads/VipManager\";\r\nimport GameManager from \"../GameManager\";\r\nimport { Follow_Type } from \"../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../multiLanguage/FollowManager\";\r\nimport TextLanguage from \"../multiLanguage/TextLanguage\";\r\nimport { PropId } from \"../Prop/PropConfig\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport { EventManager, RedEventString, RedEventType } from \"../Tools/EventManager\";\r\nimport { PrivilegedCardInformationManager } from \"./Data/PrivilegedCardInformation\";\r\nimport { DingYueManager } from \"./DingYueManager\";\r\nimport { PayManager } from \"./PayManager\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class QuarterCard extends cc.Component {\r\n\r\n    car_id:number=2001;\r\n\r\n    start () {\r\n        this.initUi();\r\n    }\r\n\r\n    initUi(){        \r\n        let jsonData=PrivilegedCardInformationManager.getInstance().getJsonPrivilegedCardInformation(this.car_id);\r\n        let nowGem=jsonData.GetDiamondsNowNum;\r\n        let dailyNum=jsonData.ReceiveDiamondsEveryDayNum;\r\n        let totalNum=jsonData.CumulativeGetDiamonds;\r\n        let tequanIds=jsonData.GainPrivileges;\r\n        let parameters=jsonData.PrivilegeParameters;\r\n        let textIds=jsonData.PrivilegeText;\r\n        let content=this.node.getChildByName('textScrollView').getComponent(cc.ScrollView).content;\r\n        for(let i=0; i<textIds.length; i++){\r\n            let text=content.children[i].getComponent(TextLanguage);            \r\n            text.setPrefix(tequanIds[i]+'. ');\r\n            text.setTextId(textIds[i]);\r\n            text.setReplaceValue('~',this.getParametersStr(tequanIds[i],parameters[i]));\r\n        }\r\n        //立即获得\r\n        this.node.getChildByName('nowNumLabel').getComponent(cc.Label).string=''+nowGem;\r\n        //每日获得\r\n        let item1=PropManager.getInstance().createPropItem(PropId.Gem,dailyNum);\r\n        item1.scale=0.8;\r\n        this.node.getChildByName('dailyRoot').addChild(item1);\r\n        //累计\r\n        let item2=PropManager.getInstance().createPropItem(PropId.Gem,totalNum)\r\n        item2.scale=0.8;\r\n        this.node.getChildByName('totalRoot').addChild(item2);\r\n        //let info=DingYueManager.getInstance().getQuarterCardInfo();\r\n        //按钮\r\n        let btnGet=this.node.getChildByName('btnGet');\r\n        let btnBuy=this.node.getChildByName('btnBuy');        \r\n        //收益\r\n        let shouyiText=this.node.getChildByName('shouyiText').getComponent(TextLanguage);\r\n        shouyiText.setReplaceValue('~',\"50%\");\r\n        //文字\r\n        let stateText=this.node.getChildByName('stateText').getComponent(TextLanguage);\r\n        // if(info.is_buy){\r\n        //     btnBuy.active=false;\r\n        //     btnGet.active=true; \r\n        //     stateText.setTextId(1400009);\r\n        // }else{\r\n        //     btnBuy.active=true;\r\n        //     btnGet.active=false;\r\n        //     stateText.setTextId(1400005);\r\n        //     btnBuy.getChildByName('priceLabel').getComponent(cc.Label).string=info.price+info.currency;\r\n        // }\r\n        this.showBtnState();\r\n    }\r\n\r\n    getParametersStr(id:number,parameter:number):string{        \r\n        switch(id){\r\n            case 1:{\r\n                return (parameter*100)+'%';\r\n            }\r\n            case 2:{\r\n                return parameter+'';\r\n            }\r\n            case 3:{\r\n                return parameter+'';\r\n            }\r\n            case 4:{\r\n                return (parameter*100)+'%';\r\n            }\r\n            default:{\r\n                return parameter+'';\r\n            }\r\n        }\r\n    }\r\n\r\n    showBtnState(){\r\n        //按钮\r\n        let btnGet=this.node.getChildByName('btnGet');\r\n        let btnBuy=this.node.getChildByName('btnBuy');\r\n        //let info=DingYueManager.getInstance().getQuarterCardInfo();\r\n        //收益\r\n        let shouyiText=this.node.getChildByName('shouyiText').getComponent(TextLanguage);\r\n        shouyiText.setReplaceValue('~',\"500%\");\r\n        //文字\r\n        let stateText=this.node.getChildByName('stateText').getComponent(TextLanguage);\r\n        // if(info.is_buy){\r\n        //     btnBuy.active=false;\r\n        //     btnGet.active=true; \r\n        //     stateText.setTextId(1400009);\r\n        //     let btn=btnGet.getComponent(cc.Button);\r\n        //     let getText=btnGet.getChildByName('getText').getComponent(TextLanguage);\r\n        //     let labelOutline=getText.getComponent(cc.LabelOutline);\r\n        //     if(DingYueManager.getInstance().getTodayIsGet(this.car_id)){\r\n        //         getText.setTextId(100013);\r\n        //         btn.interactable=false;\r\n        //         labelOutline.color=cc.color(54,54,54);\r\n        //     }else{\r\n        //         getText.setTextId(100011);\r\n        //         btn.interactable=true;\r\n        //         labelOutline.color=cc.color(99,61,10);\r\n        //     }\r\n        //     //红点\r\n        //     let red=btnGet.getChildByName('red');\r\n        //     red.active=btn.interactable;\r\n        // }else{\r\n        //     btnBuy.active=true;\r\n        //     btnGet.active=false;\r\n        //     stateText.setTextId(1400005);\r\n        //     btnBuy.getChildByName('priceLabel').getComponent(cc.Label).string=info.price+info.currency;\r\n        // }\r\n    }\r\n\r\n    clickBtnBuy(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        FollowManager.getInstance().followEvent(Follow_Type.季卡点击购买次数);\r\n        ApkManager.getInstance().showDingYue({\r\n            result:(isDy:boolean)=>{\r\n                if(isDy){\r\n                    PayManager.getInstance().addPayNum(PrivilegedCardInformationManager.getInstance().getProductId(this.car_id));\r\n                    let num=PrivilegedCardInformationManager.getInstance().getGetDiamondsNowNum(this.car_id);\r\n                    PropManager.getInstance().changePropNum(PropId.Gem,num);\r\n                    //DingYueManager.getInstance().getQuarterCardInfo().is_buy=true;\r\n                    GameManager.getInstance().showGetTip(PropManager.getInstance().createPropItem(PropId.Gem,num),null);                    \r\n                    //EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_Shop_ZunXiang_QuarterCard);\r\n                    ActivityManager.getInstance().changeTicket(ActivityType.Endless,2);\r\n                    ActivityManager.getInstance().changeTicket(ActivityType.Boss,2);\r\n                    this.initUi();\r\n                }\r\n            }\r\n        },PrivilegedCardInformationManager.getInstance().getProductId(this.car_id));\r\n    }\r\n\r\n    clickBtnGet(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        if(!DingYueManager.getInstance().getTodayIsGet(this.car_id)){\r\n            DingYueManager.getInstance().saveTodayGet(this.car_id,true);\r\n            let num=PrivilegedCardInformationManager.getInstance().getReceiveDiamondsEveryDayNum(this.car_id);\r\n            PropManager.getInstance().changePropNum(PropId.Gem,num);\r\n            GameManager.getInstance().showGetTip(PropManager.getInstance().createPropItem(PropId.Gem,num),null);\r\n            this.showBtnState();\r\n            //EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_Shop_ZunXiang);\r\n        }        \r\n    }\r\n}\r\n"]}