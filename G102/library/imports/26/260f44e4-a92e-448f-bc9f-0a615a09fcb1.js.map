{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\ShouWang\\ShouWangJianShi.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,uEAAoF;AAGpF,sCAAiC;AACjC,4CAAwD;AAElD,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA6C,mCAAO;IAApD;QAAA,qEAwDC;QArDG,kBAAY,GAAc,yBAAY,CAAC,MAAM,CAAC;QAE9C,UAAU;QACV,qBAAe,GAAQ,CAAC,CAAC;QACzB,aAAa;QACb,oBAAc,GAAQ,CAAC,CAAC;;IAgD5B,CAAC;IA9CG,gCAAM,GAAN;QACI,iBAAM,MAAM,WAAE,CAAC;QACf,iBAAM,yBAAyB,YAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACzD,iBAAM,qBAAqB,YAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACrD,CAAC;IAED,wCAAc,GAAd;QACI,IAAI,CAAC,eAAe,GAAC,CAAC,CAAC;QACvB,IAAI,CAAC,cAAc,GAAC,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC;IAC3D,CAAC;IAED,kGAAkG;IAClG,4CAAkB,GAAlB,UAAmB,SAAiB;QAChC,IAAG,SAAS,EAAC;YACT,QAAO,IAAI,CAAC,YAAY,EAAC;gBACrB,KAAK,yBAAY,CAAC,MAAM;oBAAC;wBACrB,IAAI,IAAI,GAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBACpD,IAAG,IAAI,CAAC,YAAY,EAAE,GAAC,CAAC,EAAC;4BACrB,QAAQ;4BACR,IAAI,IAAI,GAAC,uCAAkB,CAAC,WAAW,EAAE,CAAC,oBAAoB,CAAC,iCAAY,CAAC,uBAAuB,EAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;4BACvH,2EAA2E;yBAC9E;wBACD,IAAI,CAAC,MAAM,GAAC,IAAI,CAAC;wBACjB,IAAI,CAAC,WAAW,EAAE,CAAC;qBACtB;oBAAA,MAAM;gBACP,KAAK,yBAAY,CAAC,MAAM;oBAAC;wBACrB,0BAA0B;wBAC1B,IAAG,IAAI,CAAC,eAAe,IAAE,CAAC,EAAC;4BACvB,IAAI,CAAC,WAAW,CAAC,iBAAiB,GAAC,CAAC,CAAC;yBACxC;6BAAI;4BACD,IAAI,CAAC,WAAW,CAAC,iBAAiB,GAAC,IAAI,CAAC,cAAc,CAAC;yBAC1D;wBACD,IAAI,CAAC,MAAM,GAAC,KAAK,CAAC;wBAClB,IAAI,CAAC,eAAe,EAAE,CAAC;wBACvB,IAAI,IAAI,GAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBACpD,IAAG,IAAI,CAAC,YAAY,EAAE,GAAC,CAAC,EAAC;4BACrB,QAAQ;4BACR,IAAI,IAAI,GAAC,uCAAkB,CAAC,WAAW,EAAE,CAAC,oBAAoB,CAAC,iCAAY,CAAC,4BAA4B,EAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;4BAC5H,+CAA+C;yBAClD;qBACJ;oBAAA,MAAM;aAEV;SAEJ;IACL,CAAC;IApDD;QADC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,IAAI,CAAC,yBAAY,CAAC,EAAC,CAAC;yDACO;IAH7B,eAAe;QADnC,OAAO;OACa,eAAe,CAwDnC;IAAD,sBAAC;CAxDD,AAwDC,CAxD4C,iBAAO,GAwDnD;kBAxDoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { GameEffectsManager, GameEffectId } from \"../../../Game/GameEffectsManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport { FeedBackType } from \"../../../Monster/MonsterData\";\r\nimport Bullect from \"../Bullect\";\r\nimport { JianShi_Type, SkillType } from \"../HeroConfig\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ShouWangJianShi extends Bullect {\r\n\r\n    @property({type:cc.Enum(JianShi_Type)})\r\n    jianshi_type:JianShi_Type=JianShi_Type.putong;    \r\n\r\n    /**穿透数量 */\r\n    penetration_num:number=0;\r\n    /**原来的增伤数值 */\r\n    old_skill_rate:number=0;\r\n\r\n    onLoad(): void {\r\n        super.onLoad();\r\n        super.addCollisionMonsterListen(this.onCollisionMonster);\r\n        super.addInitFinishedListen(this.onInitFinished);\r\n    }\r\n    \r\n    onInitFinished(){\r\n        this.penetration_num=0;\r\n        this.old_skill_rate=this.gongji_data.skill_damage_rate;\r\n    }\r\n\r\n    ////--------------------------------------碰撞开始----------------------------------------------------\r\n    onCollisionMonster(monsterTs:Monster) {\r\n        if(monsterTs){\r\n            switch(this.jianshi_type){\r\n                case JianShi_Type.putong:{\r\n                    let data=monsterTs.beFlashInjured(this.gongji_data);\r\n                    if(data.getDamageNum()>0){\r\n                        //本次攻击有效\r\n                        let node=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.sheshou_jianshi_att_hit,this.getHeadPos());\r\n                        //node.scale=monsterTs.getSheShouAttackScale();                            \r\n                    }\r\n                    this.is_att=true;\r\n                    this.destroySelf();\r\n                }break;\r\n                case JianShi_Type.jineng:{\r\n                    //被动技能1的箭矢，可以穿透，并且首个目标伤害增加\r\n                    if(this.penetration_num==0){\r\n                        this.gongji_data.skill_damage_rate=1;\r\n                    }else{\r\n                        this.gongji_data.skill_damage_rate=this.old_skill_rate;\r\n                    }\r\n                    this.is_att=false;\r\n                    this.penetration_num++;\r\n                    let data=monsterTs.beFlashInjured(this.gongji_data);\r\n                    if(data.getDamageNum()>0){\r\n                        //本次攻击有效\r\n                        let node=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.shou_wang_jianshi_skill1_hit,this.getHeadPos());\r\n                        //node.scale=monsterTs.getSheShouAttackScale();\r\n                    }\r\n                }break;\r\n                \r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n"]}