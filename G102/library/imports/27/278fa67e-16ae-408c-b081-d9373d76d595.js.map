{"version":3,"sources":["assets\\Scripts\\Tower\\TowerGift.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,8CAAyC;AACzC,oEAA+D;AAE/D,0DAAqD;AAI/C,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAuC,6BAAY;IAAnD;QAAA,qEAkDC;QAhDG,gBAAU,GAAQ,CAAC,CAAC;;IAgDxB,CAAC;IA9Ca,yBAAK,GAAf;QACI,IAAI,IAAI,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAC9C,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,yBAAe,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QACxF,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC,CAAC;QAChC,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,6BAAS,GAAT;QACI,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAG,IAAI,CAAC,UAAU,GAAC,CAAC,EAAC;YACjB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAChC;IACL,CAAC;IAED,iCAAa,GAAb;QACI,IAAI,IAAI,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QACrE,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,yBAAe,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,GAAC,GAAG,GAAC,IAAI,CAAC,UAAU,GAAC,GAAG,CAAC;IACpH,CAAC;IAED,iCAAa,GAAb;QACI,qBAAW,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,2BAAU,CAAC,KAAK,CAAC,CAAC;QACpE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAChC,yDAAyD;QACzD,kBAAkB;QAClB,oDAAoD;QACpD,wEAAwE;QACxE,4CAA4C;QAC5C,oCAAoC;QACpC,2CAA2C;QAC3C,YAAY;QACZ,sCAAsC;QACtC,uBAAuB;QACvB,6GAA6G;QAC7G,mGAAmG;QACnG,mCAAmC;QACnC,YAAY;QACZ,+CAA+C;QAC/C,4CAA4C;QAC5C,cAAc;QACd,aAAa;QACb,2CAA2C;QAC3C,QAAQ;QACR,gCAAgC;IACpC,CAAC;IAjDgB,SAAS;QAD7B,OAAO;OACa,SAAS,CAkD7B;IAAD,gBAAC;CAlDD,AAkDC,CAlDsC,EAAE,CAAC,SAAS,GAkDlD;kBAlDoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import ApkManager from \"../Ads/ApkManager\";\r\nimport { VIDEO_TYPE } from \"../Constants\";\r\nimport GameManager from \"../GameManager\";\r\nimport LanguageManager from \"../multiLanguage/LanguageManager\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport TowerManager from \"./TowerManager\";\r\nimport { TowerRewardManager } from \"./TowerReward\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TowerGift extends cc.Component {\r\n\r\n    remain_sec:number=5;\r\n\r\n    protected start(): void {\r\n        let text=this.node.getChildByName('jobLabel');\r\n        text.getComponent(cc.Label).string=LanguageManager.getInstance().getStrByTextId(810006);\r\n        this.schedule(this.countdown,1);\r\n        this.showCountdown();\r\n    }\r\n\r\n    countdown(){\r\n        this.remain_sec--;\r\n        this.showCountdown();\r\n        if(this.remain_sec<0){\r\n            this.unschedule(this.countdown);\r\n            this.node.removeFromParent();\r\n        }\r\n    }\r\n\r\n    showCountdown(){\r\n        let text=this.node.getChildByName('btnVideo').getChildByName('text');\r\n        text.getComponent(cc.Label).string=LanguageManager.getInstance().getStrByTextId(100030)+\"(\"+this.remain_sec+\")\";\r\n    }\r\n\r\n    clickBtnVideo(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.unschedule(this.countdown);\r\n        // ApkManager.getInstance().showVideo((isTrue:boolean)=>{\r\n        //     if(isTrue){\r\n        //         let level=TowerManager.getTowerLevel()-1;\r\n        //         let list=TowerRewardManager.getInstance().getAdReward(level);\r\n        //         let gm=GameManager.getInstance();\r\n        //         let itemList=new Array();\r\n        //         for(let i=0; i<list.length; i++)\r\n        //         {\r\n        //             let rewardData=list[i];\r\n        //             //可以获得奖品\r\n        //             let item=PropManager.getInstance().createPropItem(rewardData.reward_id,rewardData.reward_num);\r\n        //             PropManager.getInstance().changePropNum(rewardData.reward_id,rewardData.reward_num);\r\n        //             itemList.push(item);\r\n        //         }\r\n        //         gm.showMultipleGetTip(itemList,()=>{\r\n        //             this.node.removeFromParent();\r\n        //         });\r\n        //     }else{\r\n        //         this.schedule(this.countdown,1);\r\n        //     }\r\n        // },VIDEO_TYPE.Ziyuan);        \r\n    }\r\n}\r\n"]}