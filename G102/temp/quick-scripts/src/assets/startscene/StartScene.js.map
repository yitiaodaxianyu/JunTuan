{"version":3,"sources":["assets\\startscene\\StartScene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport WXManagerEX from \"./WXManagerEX\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class StartScene extends cc.Component {\r\n\r\n\r\n   \r\n    loadingBar: cc.ProgressBar = null;\r\n    \r\n    loadLabel: cc.Label = null;\r\n\r\n   \r\n    tipLabel: cc.Label = null;\r\n\r\n    private loadProGress:number=0;\r\n    onLoad() {\r\n        console.log(\"开始加载分包\");\r\n        // cc.director.loadScene(\"load\");\r\n        this.loadingBar=this.node.getChildByName('bg_loading').getChildByName('ProgressBar').getComponent(cc.ProgressBar);\r\n        console.log(\"1\");\r\n        \r\n        this.loadLabel=this.node.getChildByName('bg_loading').getChildByName('ProgressBar').getChildByName('loadLabel').getComponent(cc.Label);\r\n        console.log(\"2\");\r\n        this.tipLabel=this.node.getChildByName('bg_loading').getChildByName('load').getComponent(cc.Label);\r\n        console.log(\"3\");\r\n\r\n        this.loadingBar.progress = 0;\r\n        this.loadLabel.string = (0 * 100).toFixed(0) + '%';\r\n        WXManagerEX.getInstance().initData();\r\n        cc.loader.downloader.loadSubpackage('MainScript', function (err) {\r\n            if (err) {\r\n                console.error(\"加载分包失败\");\r\n                return console.error(err);\r\n            }\r\n            console.log('load subpackage successfully.');\r\n            cc.assetManager.loadBundle('resourcesBundle', (err, bundle) => {\r\n                if (err) {\r\n                    console.error(\"加载resourcesBundle失败\");\r\n                    return;\r\n                }\r\n                //因为加载代码引入的原因只能先放到这里\r\n                WXManagerEX.getInstance().resourcesBundle = cc.assetManager.getBundle('resourcesBundle');\r\n                cc.director.loadScene(\"load\");\r\n            });\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n    protected update(dt: number): void {\r\n        if(this.loadProGress<100){\r\n            this.loadProGress+=0.2;\r\n        }\r\n        if(this.loadProGress>80){\r\n            this.tipLabel.string=\"首次进入游戏可能耗时较长...\";\r\n        }\r\n        this.loadingBar.progress = this.loadProGress/100;\r\n        this.loadLabel.string = (this.loadProGress).toFixed(0) + '%';\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}