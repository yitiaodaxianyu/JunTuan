{"version":3,"sources":["assets\\Scripts\\Ads\\WXManager.ts"],"names":[],"mappings":";;;;;;;;;;;;AAEA,uBAAuB;AACvB,iDAAiD;AACjD,uDAAuD;AACvD,kDAAkD;AAE5C,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAA;QAGY,cAAS,GAAQ,wCAAwC,CAAC;QAC1D,oBAAe,GAAQ,wCAAwC,CAAC;QAChE,cAAS,GAAQ,wCAAwC,CAAC;QAG1D,mBAAc,GAAC,CAAC,CAAC;QACjB,oBAAe,GAAC,CAAC,CAAC;IAqF9B,CAAC;kBA9FoB,SAAS;IAWZ,qBAAW,GAAzB;QAEI,IAAG,IAAI,CAAC,SAAS,IAAE,IAAI,EACvB;YACI,IAAI,CAAC,SAAS,GAAC,IAAI,WAAS,EAAE,CAAC;SAClC;QACD,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IACD,SAAS;IACT,wBAAI,GAAJ;QACI,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,2BAAO,GAAP;QAEI,IAAG,EAAE,CAAC,GAAG,CAAC,QAAQ,KAAG,EAAE,CAAC,GAAG,CAAC,cAAc,EAC1C;SAEC;IACL,CAAC;IAAA,CAAC;IAEF,8BAAU,GAAV;IAGA,CAAC;IAAA,CAAC;IACF,oCAAgB,GAAhB;QAEI,IAAI,OAAO,GAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;QACjC,IAAI,OAAO,GAAC,KAAK,CAAC;QAClB,IAAG,OAAO,GAAC,IAAI,CAAC,cAAc,GAAC,IAAI,GAAC,EAAE,EACtC;YACI,OAAO,GAAC,IAAI,CAAC;YACb,IAAI,CAAC,cAAc,GAAC,OAAO,CAAC;SAC/B;QACD,IAAG,OAAO,IAAE,KAAK,EACjB;YACI,OAAO;SACV;IAEL,CAAC;IAAA,CAAC;IACF,wBAAwB;IACxB,6BAAS,GAAT,UAAU,QAAQ;QAEd,IAAI,OAAO,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,IAAI,OAAO,GAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QAC9B,IAAI,WAAW,GAAC,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAC3D,IAAG,WAAW,IAAE,EAAE,IAAE,WAAW,IAAE,IAAI,EACrC;YACI,WAAW,GAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAClC,IAAI,OAAO,GAAC,OAAO,GAAC,WAAW,CAAC;YAChC,IAAI,EAAE,GAAC,CAAC,GAAC,EAAE,GAAC,IAAI,CAAC;YACjB,IAAG,OAAO,IAAE,EAAE,EACd;gBACI,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACf,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,EAAC,OAAO,CAAC,CAAC;aACtD;iBACD;gBACI,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAChB,IAAI,EAAE,GAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,GAAC,OAAO,CAAC,GAAC,IAAI,CAAC,CAAC;gBACrC,oFAAoF;aACvF;SAEJ;aACD;YACI,QAAQ,CAAC,IAAI,CAAC,CAAC;YACf,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,EAAC,OAAO,CAAC,CAAC;SACtD;QAOD,oCAAoC;QACpC,qBAAqB;QACrB,kEAAkE;QAClE,qBAAqB;QACrB,IAAI;QACJ,oBAAoB;QACpB,oCAAoC;QACpC,IAAI;IAER,CAAC;IAAA,CAAC;;IA3Fa,mBAAS,GAAc,IAAI,CAAC;IAF1B,SAAS;QAD7B,OAAO;OACa,SAAS,CA8F7B;IAAD,gBAAC;CA9FD,AA8FC,IAAA;kBA9FoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import AdManager from \"./AdManager\";\r\n\r\n// Battle racing  65398\r\n// banner  ca-app-pub-2476175026271293/9535537102\r\n// interstitial  ca-app-pub-2476175026271293/5005582382\r\n// rewarded ca-app-pub-2476175026271293/3339478623\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class WXManager {\r\n\r\n    private static _instance: WXManager = null;\r\n    private banner_id:string='ca-app-pub-2476175026271293/9535537102';\r\n    private interstitial_id:string='ca-app-pub-2476175026271293/5005582382';\r\n    private reward_id:string='ca-app-pub-2476175026271293/3339478623';\r\n\r\n\r\n    private perv_inst_time=0;\r\n    private perv_video_time=0;\r\n\r\n    public static getInstance():WXManager\r\n    {\r\n        if(this._instance==null)\r\n        {\r\n            this._instance=new WXManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n    //初始化游戏数据\r\n    init () {\r\n        this.initAds();\r\n    }\r\n\r\n    initAds()\r\n    {\r\n        if(cc.sys.platform===cc.sys.BYTEDANCE_GAME)\r\n        {\r\n    \r\n        }\r\n    };\r\n    \r\n    showBanner()\r\n    {        \r\n           \r\n    };\r\n    showInterstitial()\r\n    {\r\n        let curTime=new Date().getTime();\r\n        let isCanAd=false;\r\n        if(curTime-this.perv_inst_time>1000*10)\r\n        {\r\n            isCanAd=true;\r\n            this.perv_inst_time=curTime;\r\n        }\r\n        if(isCanAd==false)\r\n        {\r\n            return;\r\n        }\r\n        \r\n    };\r\n    //callback，视频播放是否成功的回调函数\r\n    showVideo(callback)\r\n    {\r\n        let curDate = new Date();\r\n        let curTime=curDate.getTime();\r\n        let reward_time=cc.sys.localStorage.getItem('reward_time');                \r\n        if(reward_time!=\"\"&&reward_time!=null)\r\n        {\r\n            reward_time=parseInt(reward_time);\r\n            let offsetT=curTime-reward_time;\r\n            let tt=3*60*1000;\r\n            if(offsetT>=tt)\r\n            {\r\n                callback(true);\r\n                cc.sys.localStorage.setItem('reward_time',curTime);\r\n            }else\r\n            {\r\n                callback(false);\r\n                let sy=Math.round((tt-offsetT)/1000);\r\n                //AdManager.getInstance().showMessage('内测期间,暂无激励广告,每3分钟可以免费领取一次奖励，还差 '+sy+' 秒可以领取');\r\n            }    \r\n\r\n        }else\r\n        {\r\n            callback(true);\r\n            cc.sys.localStorage.setItem('reward_time',curTime);\r\n        }\r\n\r\n        \r\n        \r\n        \r\n        \r\n\r\n        // let curTime=new Date().getTime();\r\n        // let isCanAd=false;\r\n        // let offsetTime=Math.round((curTime-this.perv_video_time)/1000);\r\n        // if(offsetTime>120)\r\n        // {\r\n        //     isCanAd=true;\r\n        //     this.perv_video_time=curTime;\r\n        // }\r\n          \r\n    };\r\n}\r\n\r\n"]}