{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\ANuBiSi\\ShaDan.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\n\r\nimport FightingManager from \"../../../Game/FightingManager\";\r\nimport { GameEffectsManager, GameEffectId } from \"../../../Game/GameEffectsManager\";\r\nimport GameManager from \"../../../GameManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport { FeedBackType } from \"../../../Monster/MonsterData\";\r\nimport MonsterManager from \"../../../Monster/MonsterManager\";\r\nimport { SoundIndex } from \"../../../Sound/AudioConstants\";\r\nimport MyTool from \"../../../Tools/MyTool\";\r\nimport { BuffData } from \"../BuffData\";\r\nimport Bullect from \"../Bullect\";\r\nimport { BuffId, BuffType, DamageType, SkillType } from \"../HeroConfig\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ShaDan extends Bullect {\r\n\r\n\r\n    onLoad(): void {\r\n        super.onLoad();\r\n        super.addCollisionMonsterListen(this.onCollisionMonster);\r\n    }\r\n\r\n    onCollisionMonster(monsterTs:Monster) {\r\n        //普通弹\r\n        if(monsterTs){            \r\n            let data=monsterTs.beFlashInjured(this.gongji_data);\r\n            if(data.getDamageNum()>0){\r\n                GameEffectsManager.getInstance().createGameEffectById(GameEffectId.a_nu_bi_si_attack_hit,this.node.getPosition());\r\n                let rate=Math.random();\r\n                if(rate<this.gongji_data.hero_data.getSkillValue1(SkillType.Passive_1))//\r\n                {\r\n                    GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_ANBSAttack);\r\n                    //判断锥形范围的敌人\r\n                    let fanweiData=cc.instantiate(this.gongji_data);\r\n                    fanweiData.damage_type=DamageType.Skill;\r\n                    fanweiData.is_bullet=false;\r\n                    fanweiData.skill_damage_rate=this.gongji_data.hero_data.getSkillValue2(SkillType.Passive_1);\r\n                    let shanxing=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.a_nu_bi_si_beidong_skill_1,this.node.getPosition());\r\n                    shanxing.angle=this.node.angle;\r\n                    //减速\r\n                    let distance=260;\r\n                    let min=this.move_direction-Math.PI/4;//45°+90\r\n                    let max=min+Math.PI/2;//135°\r\n                    //cc.log(MyTool.radianToAngle(this.move_direction),MyTool.radianToAngle(min),MyTool.radianToAngle(max))\r\n                    // FightingManager.getInstance().node.getComponent(cc.Graphics).arc(this.getAPos(-50).x,this.getAPos(-50).y,distance,min,max);\r\n                    // FightingManager.getInstance().node.getComponent(cc.Graphics).stroke();\r\n                    let allMonsters=MonsterManager.getInstance().getMonstersForRadian(-1,this.node.getPosition(),distance,min,max);\r\n                    if(allMonsters){\r\n                        for(let i=0; i<allMonsters.length; i++){\r\n                            let monsterTTs=allMonsters[i].getComponent(Monster);\r\n                            let zuiData=monsterTTs.beFlashInjured(fanweiData);;\r\n                            if(zuiData.getDamageNum()>0){\r\n                                let buffData=new BuffData();\r\n                                buffData.buff_id=BuffId.Hero_ANuBiSi_Skill1_JianSu;\r\n                                buffData.buff_type=BuffType.Slowdown;\r\n                                buffData.buff_value=[0.3];\r\n                                buffData.remain_time=3;\r\n                                monsterTTs.addDeBuff(buffData,fanweiData);\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.destroySelf();\r\n        }\r\n    }\r\n\r\n}\r\n"]}