{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\NvWu\\NvWu.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { GameState, IsDebug, JiaSu } from \"../../../Constants\";\r\nimport FightingManager from \"../../../Game/FightingManager\";\r\nimport { GameEffectId, GameEffectsManager } from \"../../../Game/GameEffectsManager\";\r\nimport SkillManager from \"../../../Game/SkillManager\";\r\nimport SkyManager from \"../../../Game/SkyManager\";\r\nimport GameManager from \"../../../GameManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport { KeyFrameData } from \"../../../Monster/MonsterData\";\r\nimport MonsterManager from \"../../../Monster/MonsterManager\";\r\nimport { SoundIndex } from \"../../../Sound/AudioConstants\";\r\nimport MyTool from \"../../../Tools/MyTool\";\r\nimport WallManager from \"../../../Wall/WallManager\";\r\nimport { GongJiData } from \"../../Data/HeroData\";\r\nimport { HeroManager } from \"../../Data/HeroManager\";\r\nimport { BuffData } from \"../BuffData\";\r\nimport Hero from \"../Hero\";\r\nimport { BuffId, BuffType, DamageType, GongJi_FangXiang, Hero_State, Hero_Type, ShieldType, SkillType } from \"../HeroConfig\";\r\nimport NvWuDan from \"./NvWuDan\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NvWu extends Hero {\r\n    /**治疗计数 */\r\n    zhiliao_jishu:number=0;\r\n    zhiliao_time:number=0;\r\n    cur_release_skill:SkillType=SkillType.Null; \r\n\r\n    onLoad()\r\n    {\r\n        super.onLoad();\r\n        //加载技能指示器\r\n        super.addLoadByGameEffectId(GameEffectId.nvwu_attack_bullect,2);\r\n        super.addLoadByGameEffectId(GameEffectId.nvwu_attack_bullect_hit,2);\r\n        super.addLoadByGameEffectId(GameEffectId.nvwu_active_skill,1);    \r\n        this.is_LoadLoad=true;    \r\n        this.addSkillListen(this.useSkill);\r\n        this.addAttackListen(this.normalAttack);\r\n        this.addXuanYunListen(this.onXuanYunResult);\r\n        this.addGameWinListen(this.resetSkill);\r\n    }\r\n\r\n    start()\r\n    {\r\n        super.start();\r\n        this.is_need_check_distance=false;\r\n        super.setSkillTipSize(520,520);\r\n        this.zhiliao_time=this.hero_data.getSkillValue1(SkillType.Passive_1);\r\n    }\r\n\r\n    resetSkill(){\r\n        this.zhiliao_jishu=0;\r\n    }\r\n    \r\n    onXuanYunResult(isXuanYun:boolean){\r\n        if(isXuanYun){\r\n            this.unscheduleAllCallbacks();            \r\n        }else{\r\n            this.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n        }\r\n    }\r\n\r\n    //---------------------------------------------攻击----------------------------------------------\r\n    \r\n\r\n    createNvWuDan(id:GameEffectId,jianshiPos:cc.Vec2,speed:number,dir:number,gjData:GongJiData){\r\n        let node=FightingManager.getInstance().createGameEffectById(id,jianshiPos);\r\n        node.getComponent(NvWuDan).hero_lvl=this.hero_lvl;\r\n        node.getComponent(NvWuDan).init(id,speed,dir,gjData);\r\n    }   \r\n\r\n\r\n    normalAttack(monster:cc.Node)\r\n    {\r\n        if(GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n        return;\r\n        this.is_can_gongji=false;\r\n        this.startAttack(monster);\r\n    }\r\n\r\n    startAttack(enemyNode:cc.Node)\r\n    {\r\n        let enemyPos=enemyNode.getComponent(Monster).getSheShouPos();\r\n        let fangxiang=this.getFangXiangByPos(enemyPos);        \r\n        let data=new KeyFrameData();\r\n        data.name=\"Attack\";\r\n        data.callback=()=>{\r\n            GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_NWAttack);\r\n            let jianshiPos=this.getCreateBulletPos();\r\n            let offsetPos=enemyPos.sub(jianshiPos);\r\n            let jianshiDir=Math.atan2(offsetPos.y,offsetPos.x);\r\n            let gjData=super.getGongJiData(DamageType.Normal,true,SkillType.Null);\r\n            this.createNvWuDan(GameEffectId.nvwu_attack_bullect,jianshiPos,this.bullet_speed,jianshiDir,gjData);\r\n            if(this.is_double_attack){\r\n                this.resetNormalAttack();\r\n            }else{\r\n                this.gongji_jishu=0;\r\n            }        \r\n        }\r\n        super.setHeroState(Hero_State.attack,fangxiang,[data],()=>{\r\n            this.setHeroState(Hero_State.idle,this.cur_fangxiang);           \r\n        });\r\n    }\r\n\r\n    //---------------------------------------------技能----------------------------------------------    \r\n    useSkill(pos:cc.Vec2):number\r\n    {\r\n        /**如果有控制技能 */\r\n        this.removeAllDeBuff();\r\n        SkillManager.getInstance().releaseSkill(()=>{\r\n            this.startSelfXuLi(pos);\r\n        },this.node);\r\n        if(this.cur_release_skill!=SkillType.Null){\r\n            this.skill_queue.push(this.cur_release_skill);\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    startSelfXuLi(pos:cc.Vec2){\r\n        //蓄力帧监听\r\n        let heroRoot=cc.find('Canvas/Hero_Root');\r\n        //发射帧监听\r\n        let fasheData=new KeyFrameData();\r\n        fasheData.name=\"FaShe\";\r\n        fasheData.callback=()=>{\r\n            //可以发射\r\n            SkillManager.getInstance().setTimeStop(false);\r\n            this.node.parent=heroRoot;\r\n            this.node.zIndex=2;\r\n            this.startLaunch(pos);\r\n        }\r\n        //英雄动作播放\r\n        this.setHeroState(Hero_State.skill,GongJi_FangXiang.zhong,[fasheData],()=>{\r\n            //动作完毕后状态还是技能状态，动画要播放待机的\r\n            this.resetGongJiJiShu();\r\n            this.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n        });\r\n        this.spine.timeScale=JiaSu;       \r\n    }\r\n    /**对260半径范围内的敌人造成{参数1}%伤害并施加{参数2}层中毒和{参数3}%的重伤效果，持续5秒 */\r\n    startLaunch(pos:cc.Vec2){\r\n        super.setAttSpineScale();\r\n        let monsters=MonsterManager.getInstance().getMonstersForCenterPos(-1,pos,260);\r\n        if(monsters){\r\n            //伤害系数\r\n            let damageData=super.getGongJiData(DamageType.Skill,false,SkillType.Active,this.hero_data.getSkillValue1(SkillType.Active));\r\n            //重伤值\r\n            let zsValue=this.hero_data.getSkillValue3(SkillType.Active);\r\n            //减攻速\r\n            let exGs=0;\r\n            let ex1=this.hero_data.ExclusiveWeaponSkillValue_1;\r\n            if(ex1&&ex1>0){\r\n                exGs=ex1;\r\n            }\r\n            //毒数据\r\n            let duData=super.getGongJiData(DamageType.Skill,false,SkillType.Passive_2,0,this.hero_data.getSkillValue3(SkillType.Passive_1)); \r\n            duData.continuous_damage_rate=this.hero_data.getSkillValue3(SkillType.Passive_1);;           \r\n            for(let i=0; i<monsters.length; i++){\r\n                let monsterTTs=monsters[i].getComponent(Monster);\r\n                //立即造成参数2伤害\r\n                let data=monsterTTs.beFlashInjured(damageData);\r\n                if(data.getDamageNum()>0){\r\n                    GameEffectsManager.getInstance().createGameEffectById(GameEffectId.nvwu_attack_bullect_hit,monsterTTs.getCenterPos());\r\n                    if(!data.is_die){\r\n                        let buffData=new BuffData();\r\n                        buffData.buff_id=BuffId.Hero_NvWu_Skill1_Zhongdu;\r\n                        buffData.buff_type=BuffType.Normal;\r\n                        buffData.remain_time=5;\r\n                        buffData.add_floor=this.hero_data.getSkillValue2(SkillType.Active);\r\n                        buffData.max_floor=6;\r\n                        buffData.damage_jiange_time=1;\r\n                        monsterTTs.addDeBuff(buffData,duData);\r\n                        //重伤buff\r\n                        let zsData=new BuffData();\r\n                        zsData.buff_id=BuffId.Hero_NvWu_Skill1_ZhongShang;\r\n                        zsData.buff_type=BuffType.SeriouslyInjured;\r\n                        zsData.remain_time=5;\r\n                        zsData.buff_value=[zsValue];\r\n                        monsterTTs.addDeBuff(zsData,null);\r\n                        if(exGs>0){\r\n                            //专武的减攻速\r\n                            let gsData=new BuffData();\r\n                            gsData.buff_id=BuffId.Hero_NvWu_ExSkill_JianGongSu;\r\n                            gsData.buff_type=BuffType.Normal;\r\n                            gsData.remain_time=5;\r\n                            gsData.buff_value=[exGs];\r\n                            monsterTTs.addDeBuff(gsData,null);\r\n                        }                        \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        let node=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.nvwu_active_skill,pos);\r\n        node.scale=3;\r\n        SkillManager.getInstance().setIsSkillState(false);\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_NWSkill);\r\n    }\r\n\r\n}\r\n"]}