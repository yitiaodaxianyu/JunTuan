{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\PaoShou\\PaoDanBaoZha.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { GameState } from \"../../../Constants\";\r\nimport { Enemy_DeBuff_Type } from \"../../../Enemy/EnemyConfig\";\r\nimport { GameEffectId } from \"../../../Game/GameEffectsManager\";\r\nimport GameManager from \"../../../GameManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport { GongJiData } from \"../../Data/HeroData\";\r\nimport { BuffData } from \"../BuffData\";\r\nimport GongJi from \"../GongJi\";\r\nimport { BuffId, BuffType, PaoDan_Type, SkillType } from \"../HeroConfig\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PaoDanBaoZha extends GongJi {\r\n\r\n    game_effect_id:GameEffectId=GameEffectId.Null;    \r\n    paodan_type:PaoDan_Type=PaoDan_Type.skill;\r\n\r\n    init(id:GameEffectId,paodanType:PaoDan_Type,gjData:GongJiData){\r\n        super.initData(gjData);\r\n        this.game_effect_id=id;\r\n        this.paodan_type=paodanType;\r\n    }\r\n\r\n    ////--------------------------------------碰撞开始----------------------------------------------------\r\n    onCollisionEnter(other:cc.Collider,self:cc.Collider) {\r\n        let gm=GameManager.getInstance();        \r\n        if(gm.cur_game_state==GameState.Game_Lose)\r\n            return;\r\n        let group=other.node.group;\r\n        switch(group){\r\n            case 'enemy':{\r\n                let monsterTs=other.node.getComponent(Monster);\r\n                if(monsterTs){\r\n                    switch(this.paodan_type){\r\n                        case PaoDan_Type.skill:{                            \r\n                            let data=monsterTs.beFlashInjured(this.gongji_data);\r\n                            if(!data.is_die){\r\n                                    \r\n                            }\r\n                        }break;\r\n                        case PaoDan_Type.exclusive:{                            \r\n                            let data=monsterTs.beFlashInjured(this.gongji_data);\r\n                            if(!data.is_die){\r\n                                //眩晕概率\r\n                                // if(this.gongji_data.hero_data.hero_info.exclusive_equip_level>0){\r\n                                //     // monsterTs.addDeBuff(Enemy_DeBuff_Type.XuanYun,{\r\n                                //     //     remain_time: this.gongji_data.hero_data.ExclusiveWeaponSkillValue_2,\r\n                                //     //     damage_num: 0,\r\n                                //     //     jiange_time: 1,\r\n                                //     //     hero_type: this.gongji_data.hero_type,\r\n                                //     // },this.gongji_data)\r\n                                //     let buffData=new BuffData();\r\n                                //     buffData.buff_id=BuffId.Hero_XuanYun;\r\n                                //     buffData.buff_type=BuffType.Vertigo;\r\n                                //     buffData.buff_value=[0];\r\n                                //     buffData.remain_time=this.gongji_data.hero_data.ExclusiveWeaponSkillValue_2;\r\n                                //     buffData.game_effect_id=GameEffectId.xuanyun;\r\n                                //     monsterTs.addDeBuff(buffData,this.gongji_data);\r\n                                // }                                \r\n                            }\r\n                        }break;\r\n                        case PaoDan_Type.super:{\r\n                            let data=monsterTs.beFlashInjured(this.gongji_data);                            \r\n                            if(!data.is_die ){\r\n                                //被弹开\r\n                                // let monsterPos=monsterTs.node.getPosition();\r\n                                // let offsetPos=monsterPos.sub(this.node.getPosition());\r\n                                // let distance=150-(offsetPos.mag()+Math.random()*40-20);\r\n                                // if(distance<0){\r\n                                //     distance=0;\r\n                                // }\r\n                                // let dir=Math.atan2(offsetPos.y,offsetPos.x);\r\n                                // let xx=Math.cos(dir)*(distance);\r\n                                // let yy=Math.sin(dir)*(distance);\r\n                                // if(xx+monsterTs.node.x>192){\r\n                                //     xx=192-monsterTs.node.x;\r\n                                // }\r\n                                // if(xx+monsterTs.node.x<-192){\r\n                                //     xx=-192-monsterTs.node.x;\r\n                                // }\r\n                                // cc.tween(monsterTs.node).by(distance/150*0.3,{x:xx,y:yy},{easing:'sineIn'}).call(()=>{\r\n                                //     monsterTs.addDeBuff(Enemy_DeBuff_Type.XuanYun,{\r\n                                //         remain_time: 0.5,\r\n                                //         damage_num: 0,\r\n                                //         jiange_time: 1,\r\n                                //         hero_type: this.gongji_data.hero_type,\r\n                                //     },this.gongji_data)\r\n                                // }).start();\r\n                                // monsterTs.addDeBuff(Enemy_DeBuff_Type.XuanYun,{\r\n                                //     remain_time: 0.5,\r\n                                //     damage_num: 0,\r\n                                //     jiange_time: 1,\r\n                                //     hero_type: this.gongji_data.hero_type,\r\n                                // },this.gongji_data)\r\n                                let buffData=new BuffData();\r\n                                buffData.buff_id=BuffId.Hero_XuanYun;\r\n                                buffData.buff_type=BuffType.Vertigo;\r\n                                buffData.buff_value=[0];\r\n                                buffData.remain_time=0.5;\r\n                                buffData.game_effect_id=GameEffectId.xuanyun;\r\n                                monsterTs.addDeBuff(buffData,this.gongji_data);\r\n                            }\r\n                        }\r\n                    }                    \r\n                }\r\n            }break;           \r\n        }\r\n    }\r\n}\r\n"]}