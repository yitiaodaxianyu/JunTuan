{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\SheShou\\SheShou.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { GameState, JiaSu } from \"../../../Constants\";\r\nimport FightingManager from \"../../../Game/FightingManager\";\r\nimport { GameEffectId, GameEffectsManager } from \"../../../Game/GameEffectsManager\";\r\nimport SkillManager from \"../../../Game/SkillManager\";\r\nimport SkyManager from \"../../../Game/SkyManager\";\r\nimport GameManager from \"../../../GameManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport { KeyFrameData } from \"../../../Monster/MonsterData\";\r\nimport MonsterManager from \"../../../Monster/MonsterManager\";\r\nimport { SoundIndex } from \"../../../Sound/AudioConstants\";\r\nimport MyTool from \"../../../Tools/MyTool\";\r\nimport { GongJiData } from \"../../Data/HeroData\";\r\nimport { BuffData } from \"../BuffData\";\r\nimport Hero from \"../Hero\";\r\nimport { BuffId, BuffType, DamageType, GongJi_FangXiang, Hero_State,  SkillIndicatorType, SkillType } from \"../HeroConfig\";\r\nimport JianShi from \"./JianShi\";\r\nimport JianShiCrit from \"./JianShiCrit\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SheShou extends Hero {\r\n    \r\n    jianyu_num:number=0;\r\n    test_fenzhi:number=1;\r\n//---------------------------------------------加载----------------------------------------------\r\n    onLoad()\r\n    {\r\n        super.onLoad();\r\n        //加载技能指示器\r\n        super.addLoadByGameEffectId(GameEffectId.sheshou_jianshi_att,8);\r\n        super.addLoadByGameEffectId(GameEffectId.sheshou_jianshi_skill,8);\r\n        super.addLoadByGameEffectId(GameEffectId.sheshou_jianshi_att_hit,8);\r\n        super.addLoadByGameEffectId(GameEffectId.sheshou_attack_ctrl_hit,2);\r\n        super.addLoadByGameEffectId(GameEffectId.sheshou_jianshi_super_skill_1,16);\r\n        super.addLoadByGameEffectId(GameEffectId.sheshou_jianshi_super_skill_2,16);\r\n        super.addLoadByGameEffectId(GameEffectId.sheshou_jianshi_super_skill_3,16);  \r\n        this.addSkillListen(this.useSkill);\r\n        this.addAttackListen(this.normalAttack);\r\n        this.addXuanYunListen(this.onXuanYunResult);\r\n        this.addHitListen(this.onHitMonster);\r\n    }\r\n\r\n    start()\r\n    {\r\n        super.start();\r\n        this.is_need_check_distance=true;\r\n        let zhijing=this.hero_data.getSkillValue1(SkillType.Active)*2;\r\n        super.setSkillTipSize(zhijing,zhijing);\r\n    }\r\n\r\n    onXuanYunResult(isXuanYun:boolean){\r\n        if(isXuanYun){\r\n            this.unscheduleAllCallbacks();\r\n        }else{\r\n            //根据上个状态判断需要做什么\r\n            this.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n        }\r\n    }\r\n\r\n    starteIdle(){\r\n        this.setHeroState(Hero_State.idle,this.cur_fangxiang);\r\n    }\r\n\r\n    //---------------------------------------------攻击-------------------------------------------------\r\n    /**暴击时产生100*200锥形范围的溅射效果，受攻击的敌人和被溅射的人额外受到{参数1}%伤害 */\r\n    onHitMonster(damageType:DamageType,isCrit:boolean,monster:cc.Node){\r\n\r\n    }\r\n\r\n    createJianShi(id:GameEffectId,jianshiPos:cc.Vec2,speed:number,dir:number,gjData:GongJiData):cc.Node{\r\n        let node=FightingManager.getInstance().createGameEffectById(id,jianshiPos);\r\n        node.getComponent(JianShi).init(id,speed,dir,gjData);\r\n        return node;\r\n    }\r\n    //获取射击方向\r\n    getSJFXByPos(pos:cc.Vec2,selfPos:cc.Vec2):GongJi_FangXiang\r\n    {\r\n        //对敌人单位进行方向判断，确定打击方向\r\n        let fangxiang=GongJi_FangXiang.zhong;\r\n        let offsetPos=pos.sub(selfPos);\r\n        let pi2=Math.PI*2;\r\n        let radian=(Math.atan2(offsetPos.y,offsetPos.x)+pi2)%pi2;\r\n        let angle=180*radian/Math.PI;\r\n        if(angle<=75)\r\n        {\r\n            fangxiang=GongJi_FangXiang.you;\r\n        }else if(angle>75 && angle<105)\r\n        {\r\n            fangxiang=GongJi_FangXiang.zhong;\r\n        }else if(angle>=105 && angle<=180)\r\n        {\r\n            fangxiang=GongJi_FangXiang.zuo;\r\n        }\r\n        return fangxiang;\r\n    }\r\n    /**每次普通攻击有{参数1}%几率改为射出一波箭雨，箭雨含{参数2}支箭，每支箭造成{参数3}%伤害 */\r\n    normalAttack(monster:cc.Node)\r\n    {\r\n        if(GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n        return;\r\n        let enemyPos=monster.getComponent(Monster).getSheShouPos();\r\n        if(this.checkSkill1(enemyPos)==false){\r\n            this.startAttack(monster);\r\n        }        \r\n    }\r\n\r\n    startAttack(enemyNode:cc.Node)\r\n    {\r\n        this.is_can_gongji=false;\r\n        let fangxiang=this.getSJFXByPos(enemyNode.getPosition(),this.node.getPosition());\r\n        let data=new KeyFrameData();\r\n        data.name=\"Attack\";\r\n        data.callback=()=>{            \r\n            //正中心            \r\n            let enemyPos=enemyNode.getComponent(Monster).getSheShouPos();\r\n            let jianshiPos=this.getCreateBulletPos();\r\n            let offsetPos=enemyPos.sub(jianshiPos);\r\n            let jianshiDir=Math.atan2(offsetPos.y,offsetPos.x);\r\n            let gjData=super.getGongJiData(DamageType.Normal,true,SkillType.Null);\r\n            this.createJianShi(GameEffectId.sheshou_jianshi_att,jianshiPos,this.bullet_speed,jianshiDir,gjData);\r\n            GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_GongjianshouAttack);\r\n            if(this.is_double_attack){\r\n                this.resetNormalAttack();\r\n            }else{\r\n                this.gongji_jishu=0;\r\n            }\r\n        }\r\n        super.setHeroState(Hero_State.attack,fangxiang,[data],()=>{            \r\n            super.setHeroState(Hero_State.idle,fangxiang);\r\n        });\r\n    }\r\n    /**被动技能1触发判断-每次普通攻击有{参数1}%几率改为射出一波箭雨，箭雨含{参数2}支箭，每支箭造成{参数3}%伤害 */\r\n    checkSkill1(pos:cc.Vec2):boolean{\r\n        //概率\r\n        let rate=this.hero_data.getSkillValue1(SkillType.Passive_1);\r\n        if(this.jianyu_num>0){\r\n            rate=1;\r\n            this.jianyu_num--;\r\n        }\r\n        if(rate&&Math.random()<rate){\r\n            this.is_can_gongji=false;                    \r\n            let data=new KeyFrameData();\r\n            data.name=\"Attack\";\r\n            data.callback=()=>{\r\n                this.gongji_jishu=0; \r\n                let jianshiPos=super.getCreateBulletPos();\r\n                let offsetPos=pos.sub(jianshiPos);\r\n                let pi2=Math.PI*2;\r\n                //中心方向\r\n                let radian=(Math.atan2(offsetPos.y,offsetPos.x)+pi2)%pi2;\r\n                //let angle=MyTool.radianToAngle(radian);\r\n                //弧形范围,最大30°，间隔3°\r\n                let huduFanWei=Math.PI/60;\r\n                let allNum=this.hero_data.getSkillValue2(SkillType.Passive_1);\r\n                let waveNum=Math.floor(allNum/10)+1;\r\n                if(allNum%10==0){\r\n                    waveNum--;\r\n                }\r\n                //求平均数，第一波最多\r\n                let average=Math.floor(allNum/waveNum);\r\n                //第一波数量\r\n                let firstNum=average+allNum%waveNum;\r\n                let gjData=super.getGongJiData(DamageType.Skill,true,SkillType.Passive_1,this.hero_data.getSkillValue3(SkillType.Passive_1));\r\n                let jiange=0.2;\r\n                for(let i=0; i<waveNum; i++)\r\n                {\r\n                    let num=i==0?firstNum:average;\r\n                    this.scheduleOnce(()=>{                    \r\n                        for(let n=0; n<num; n++)\r\n                        {\r\n                            let jianshiDir=radian+(n-num/2)*huduFanWei;\r\n                            this.createJianShi(GameEffectId.sheshou_jianshi_skill,jianshiPos,this.bullet_speed,jianshiDir,gjData); \r\n                        }          \r\n                    },jiange*(i));\r\n                }\r\n                GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_GongjianshouSkill);\r\n            }\r\n            super.setHeroState(Hero_State.attack,GongJi_FangXiang.zhong,[data],()=>{\r\n                super.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n            });\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    useSkill(pos:cc.Vec2):number\r\n    {        \r\n        SkillManager.getInstance().releaseSkill(()=>{\r\n            this.startSelfXuLi(pos);\r\n        },this.node);\r\n        return 2;\r\n    }\r\n\r\n    startSelfXuLi(pos:cc.Vec2){\r\n        //蓄力帧监听\r\n        let heroRoot=cc.find('Canvas/Hero_Root');\r\n        // let xuliData=new KeyFrameData();\r\n        // xuliData.name='XuLi';\r\n        // xuliData.callback=()=>{\r\n        //     //创建英雄的蓄力动画特效。\r\n        //     let assemble=SkillManager.getInstance().createGameEffectById(GameEffectId.sheshou_jianshi_super_skill_1,super.getCreateBulletPos().add(cc.v2(0,50)));\r\n        //     assemble.scale=1;\r\n        //     assemble.opacity=255;\r\n        //     let xueliSpine=assemble.getComponent(sp.Skeleton);\r\n        //     xueliSpine.timeScale=JiaSu;\r\n        //     xueliSpine.setAnimation(0,'Skill_XuLi',false);\r\n        //     //监听蓄力动作完成\r\n        //     xueliSpine.setCompleteListener(()=>{\r\n        //         xueliSpine.setCompleteListener(null);\r\n        //         //蓄力完成，发射白光\r\n        //         SkillManager.getInstance().setTimeStop(false);\r\n        //         this.node.parent=heroRoot;\r\n        //         let anima=xueliSpine.setAnimation(0,'Skill_FaShe',false);\r\n        //         xueliSpine.timeScale=1;\r\n        //         //蓄力完成，监听白光帧\r\n        //         xueliSpine.setTrackEventListener(anima,(entry: sp.spine.TrackEntry, event)=>{\r\n        //             if(event.data.name=='Bai'){\r\n        //                 SkillManager.getInstance().startBaiPing();\r\n        //             }\r\n        //         })\r\n        //     })\r\n        // }\r\n        //发射帧监听\r\n        let fasheData=new KeyFrameData();\r\n        fasheData.name=\"FaShe\";\r\n        fasheData.callback=()=>{\r\n            //可以发射\r\n            SkillManager.getInstance().setTimeStop(false);\r\n            this.node.parent=heroRoot;\r\n            this.node.zIndex=2;\r\n            this.startLaunch(pos);\r\n        }\r\n        //英雄动作播放\r\n        this.setHeroState(Hero_State.skill,GongJi_FangXiang.zhong,[fasheData],()=>{\r\n            //动作完毕后状态还是技能状态，动画要播放待机的\r\n            this.resetGongJiJiShu();\r\n            this.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n        });\r\n        this.spine.timeScale=JiaSu;\r\n    }\r\n    /**蓄力后发射一波箭雨，对半径{参数1}范围内的敌人在3秒内造成15次{参数2}%伤害 */\r\n    startLaunch(pos:cc.Vec2){\r\n        super.setAttSpineScale();\r\n        this.resetGongJiJiShu();\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_GongjianshouSkill);\r\n        let gjData=super.getGongJiData(DamageType.Skill,false,SkillType.Active,this.hero_data.getSkillValue2(SkillType.Active));                \r\n        let pi2=Math.PI*2;\r\n        let radius=this.hero_data.getSkillValue1(SkillType.Active);\r\n        let createJianShi=()=>{\r\n            //半径随机\r\n            let r=Math.random()*radius;\r\n            //弧度随机\r\n            let hudu=Math.random()*pi2;\r\n            //求点\r\n            let posX=pos.x+Math.cos(hudu)*r;\r\n            let posY=pos.y+Math.sin(hudu)*r;                \r\n            let startPos=cc.v2(posX+Math.random()*radius*2-radius,1280+posY);\r\n            let endPos=cc.v2(posX,posY);\r\n            let offsetPos=endPos.sub(startPos);\r\n            let angle=MyTool.radianToAngle(Math.atan2(offsetPos.y,offsetPos.x))+90;\r\n            let jianshi=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.sheshou_jianshi_super_skill_2,startPos);\r\n            jianshi.scale=2;\r\n            jianshi.angle=angle;\r\n            cc.tween(jianshi).to(Math.random()*0.3+0.2,{x:endPos.x,y:endPos.y,scale:0.3}).call((node:cc.Node)=>{\r\n                GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.sheshou_jianshi_super_skill_2,jianshi);\r\n                let jiantou=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.sheshou_jianshi_super_skill_3,node.getPosition());\r\n                jiantou.opacity=255;\r\n                jiantou.angle=angle;\r\n                let hit=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.sheshou_jianshi_super_skill_1,node.getPosition());\r\n                hit.opacity=255;\r\n                hit.scale=0.4;\r\n                let hitSpine=hit.getComponent(sp.Skeleton);\r\n                hitSpine.setAnimation(0,'Skill_Hit',false);\r\n                cc.tween(hit).delay(0.9).to(0.5,{opacity:0}).call(()=>{\r\n                    GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.sheshou_jianshi_super_skill_1,hit);                        \r\n                }).start();\r\n                cc.tween(jiantou).by(0.1,{angle:Math.random()*10}).by(0.1,{angle:-(Math.random()*10)}).by(0.1,{angle:Math.random()*10}).by(0.1,{angle:-(Math.random()*10)}).delay(0.5).to(0.5,{opacity:0}).call(()=>{\r\n                    GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.sheshou_jianshi_super_skill_3,jiantou);\r\n            }).start();\r\n            }).start();\r\n        }\r\n        let exNum=0;\r\n        let ex1=this.hero_data.ExclusiveWeaponSkillValue_1;\r\n        if(ex1&&ex1>0){\r\n            exNum=ex1;\r\n        }\r\n        let totalNum=60+exNum*4;\r\n        //创建发射的箭矢\r\n        for(let i=0; i<(totalNum); i++){\r\n            this.scheduleOnce(()=>{\r\n                createJianShi();\r\n            },Math.random()*3);\r\n            this.scheduleOnce(()=>{\r\n                createJianShi();\r\n            },i*3/(totalNum));\r\n        }        \r\n        let num=0;\r\n        let damageNum=15+exNum;\r\n        this.schedule(()=>{\r\n            if(num==0){\r\n                MyTool.randomSceneShake(-5,5,0.02,6);\r\n            }\r\n            num++;//cc.log(num);\r\n            let monsters=MonsterManager.getInstance().getMonstersForCenterPos(-1,pos,radius);\r\n            if(monsters){\r\n                for(let i=0; i<monsters.length; i++){\r\n                    let monsterTs=monsters[i].getComponent(Monster);\r\n                    monsterTs.beFlashInjured(gjData);\r\n                }\r\n            }\r\n        },3/damageNum,damageNum-1);\r\n        SkillManager.getInstance().setIsSkillState(false);\r\n    }\r\n}\r\n"]}