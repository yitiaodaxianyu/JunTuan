{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\ShouWang\\ShouWangJianShi.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,uEAAoF;AAGpF,sCAAiC;AACjC,4CAAwD;AAElD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA6C,mCAAO;IAApD;QAAA,qEA8DC;QA3DG,kBAAY,GAAiB,yBAAY,CAAC,MAAM,CAAC;QAEjD,UAAU;QACV,qBAAe,GAAW,CAAC,CAAC;QAC5B,aAAa;QACb,oBAAc,GAAW,CAAC,CAAC;QAE3B,cAAQ,GAAW,CAAC,CAAC;;IAoDzB,CAAC;IAlDG,gCAAM,GAAN;QACI,iBAAM,MAAM,WAAE,CAAC;QACf,iBAAM,yBAAyB,YAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACzD,iBAAM,qBAAqB,YAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACrD,CAAC;IAED,wCAAc,GAAd;QACI,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC;IAC7D,CAAC;IAED,kGAAkG;IAClG,4CAAkB,GAAlB,UAAmB,SAAkB;QACjC,IAAI,SAAS,EAAE;YACX,QAAQ,IAAI,CAAC,YAAY,EAAE;gBACvB,KAAK,yBAAY,CAAC,MAAM;oBAAE;wBACtB,IAAI,IAAI,GAAG,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBACtD,IAAI,IAAI,CAAC,YAAY,EAAE,GAAG,CAAC,EAAE;4BACzB,QAAQ;4BACR,IAAI,IAAI,GAAG,uCAAkB,CAAC,WAAW,EAAE,CAAC,oBAAoB,CAAC,iCAAY,CAAC,uBAAuB,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;4BAC1H,2EAA2E;yBAC9E;wBACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;wBACnB,IAAI,CAAC,WAAW,EAAE,CAAC;qBACtB;oBAAC,MAAM;gBACR,KAAK,yBAAY,CAAC,MAAM;oBAAE;wBACtB,0BAA0B;wBAC1B,iBAAiB;wBACjB,IAAI,IAAI,CAAC,eAAe,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE;4BAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;yBACtB;wBACD,IAAI,IAAI,CAAC,eAAe,IAAI,CAAC,EAAE;4BAC3B,IAAI,CAAC,WAAW,CAAC,iBAAiB,GAAG,CAAC,CAAC;yBAC1C;6BAAM;4BACH,IAAI,CAAC,WAAW,CAAC,iBAAiB,GAAG,IAAI,CAAC,cAAc,CAAC;yBAC5D;wBACD,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;wBACpB,IAAI,CAAC,eAAe,EAAE,CAAC;wBACvB,IAAI,IAAI,GAAG,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBACtD,IAAI,IAAI,CAAC,YAAY,EAAE,GAAG,CAAC,EAAE;4BACzB,QAAQ;4BACR,IAAI,IAAI,GAAG,uCAAkB,CAAC,WAAW,EAAE,CAAC,oBAAoB,CAAC,iCAAY,CAAC,4BAA4B,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;4BAC/H,+CAA+C;yBAClD;qBACJ;oBAAC,MAAM;aAEX;SAEJ;IACL,CAAC;IA1DD;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,yBAAY,CAAC,EAAE,CAAC;yDACO;IAHhC,eAAe;QADnC,OAAO;OACa,eAAe,CA8DnC;IAAD,sBAAC;CA9DD,AA8DC,CA9D4C,iBAAO,GA8DnD;kBA9DoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { GameEffectsManager, GameEffectId } from \"../../../Game/GameEffectsManager\";\r\nimport Monster from \"../../../Monster/Monster\";\r\nimport { FeedBackType } from \"../../../Monster/MonsterData\";\r\nimport Bullect from \"../Bullect\";\r\nimport { JianShi_Type, SkillType } from \"../HeroConfig\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ShouWangJianShi extends Bullect {\r\n\r\n    @property({ type: cc.Enum(JianShi_Type) })\r\n    jianshi_type: JianShi_Type = JianShi_Type.putong;\r\n\r\n    /**穿透数量 */\r\n    penetration_num: number = 0;\r\n    /**原来的增伤数值 */\r\n    old_skill_rate: number = 0;\r\n\r\n    hero_lvl: number = 0;\r\n\r\n    onLoad(): void {\r\n        super.onLoad();\r\n        super.addCollisionMonsterListen(this.onCollisionMonster);\r\n        super.addInitFinishedListen(this.onInitFinished);\r\n    }\r\n\r\n    onInitFinished() {\r\n        this.penetration_num = 0;\r\n        this.old_skill_rate = this.gongji_data.skill_damage_rate;\r\n    }\r\n\r\n    ////--------------------------------------碰撞开始----------------------------------------------------\r\n    onCollisionMonster(monsterTs: Monster) {\r\n        if (monsterTs) {\r\n            switch (this.jianshi_type) {\r\n                case JianShi_Type.putong: {\r\n                    let data = monsterTs.beFlashInjured(this.gongji_data);\r\n                    if (data.getDamageNum() > 0) {\r\n                        //本次攻击有效\r\n                        let node = GameEffectsManager.getInstance().createGameEffectById(GameEffectId.sheshou_jianshi_att_hit, this.getHeadPos());\r\n                        //node.scale=monsterTs.getSheShouAttackScale();                            \r\n                    }\r\n                    this.is_att = true;\r\n                    this.destroySelf();\r\n                } break;\r\n                case JianShi_Type.jineng: {\r\n                    //被动技能1的箭矢，可以穿透，并且首个目标伤害增加\r\n                    //游戏中自身等级个数决定穿透几个\r\n                    if (this.penetration_num >= (3 + this.hero_lvl)) {\r\n                        this.destroySelf();\r\n                    }\r\n                    if (this.penetration_num == 0) {\r\n                        this.gongji_data.skill_damage_rate = 1;\r\n                    } else {\r\n                        this.gongji_data.skill_damage_rate = this.old_skill_rate;\r\n                    }\r\n                    this.is_att = false;\r\n                    this.penetration_num++;\r\n                    let data = monsterTs.beFlashInjured(this.gongji_data);\r\n                    if (data.getDamageNum() > 0) {\r\n                        //本次攻击有效\r\n                        let node = GameEffectsManager.getInstance().createGameEffectById(GameEffectId.shou_wang_jianshi_skill1_hit, this.getHeadPos());\r\n                        //node.scale=monsterTs.getSheShouAttackScale();\r\n                    }\r\n                } break;\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n"]}