{"version":3,"sources":["assets\\Scripts\\Hero\\Game\\Hero.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { BuffId, BuffStateType, BuffType, DamageType, GongJi_FangXiang, Hero_DeBuff, Hero_State, Hero_State_Name, Hero_Type, SkillIndicatorType, SkillTipType, SkillType} from \"./HeroConfig\";\r\nimport MpProgress from \"./MpProgress\";\r\nimport BuffState from \"./BuffState\";\r\nimport { GongJiData, HeroData } from \"../Data/HeroData\";\r\nimport Pet from \"../../Pet/Game/Pet\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { GameEffectId, GameEffectsManager } from \"../../Game/GameEffectsManager\";\r\nimport { HeroManager } from \"../Data/HeroManager\";\r\nimport MonsterManager from \"../../Monster/MonsterManager\";\r\nimport { GameMode, GameState } from \"../../Constants\";\r\nimport BuffStateManager from \"../../Game/BuffStateManager\";\r\nimport { InjuredData, KeyFrameData } from \"../../Monster/MonsterData\";\r\nimport SkillManager from \"../../Game/SkillManager\";\r\nimport BuffTimer from \"./BuffTimer\";\r\nimport { BuffData } from \"./BuffData\";\r\nimport SkillTip from \"./SkillTip\";\r\nimport SkyManager from \"../../Game/SkyManager\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\nimport TaskManager from \"../../Task/TaskManager\";\r\nimport { TaskItem } from \"../../Task/TaskEnum\";\r\nimport WallManager from \"../../Wall/WallManager\";\r\nimport { EndlessBuff, EndlessBuffType } from \"../../copy/endlesschallenges/EndlessConfig\";\r\nimport { SpiritAttributeManager } from \"../../Pet/Data/SpiritAttribute\";\r\nimport FirePet from \"../../Pet/Game/FirePet\";\r\nimport { HeroBaseInfoManager } from \"../Data/HeroBaseInfo\";\r\nimport IcePet from \"../../Pet/Game/IcePet\";\r\nimport WindPet from \"../../Pet/Game/WindPet\";\r\nimport RayPet from \"../../Pet/Game/RayPet\";\r\nimport Monster from \"../../Monster/Monster\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Hero extends cc.Component {\r\n    /**所有的英雄及其所需资源是否加载完毕 */\r\n    public static max_load_num:number=0;\r\n    public static cur_loaded_num:number=0;\r\n    /**所需的动画加载是否ok */\r\n    is_load_ok:boolean=false;\r\n    cur_load_num:number=0;\r\n    need_load_num:number=0;\r\n\r\n    @property({type:cc.Enum(Hero_Type)})\r\n    hero_type:Hero_Type=Hero_Type.ChangMaoShou;\r\n\r\n    @property(cc.Prefab)\r\n    prefab_skill_tip:cc.Prefab=null;\r\n\r\n    //骨骼动画\r\n    spine:sp.Skeleton=null;\r\n    /**当前英雄的面向 */\r\n    cur_fangxiang:GongJi_FangXiang=GongJi_FangXiang.zuo;\r\n    /**英雄的状态 */\r\n    hero_state:Hero_State=Hero_State.idle;\r\n    //攻击计数\r\n    gongji_jishu:number=1;\r\n    /**是否可以攻击 */\r\n    is_can_gongji:boolean=false;\r\n    /**是否可以攻击计数 */\r\n    is_can_jishu:boolean=true;\r\n    //最大的攻击次数\r\n    max_gongji_num=1;\r\n    //技能剩余的冷却时间\r\n    skill_cd_time:number=0;\r\n    /**主动技能技能最大冷却*/\r\n    skill_total_time:number=5;\r\n    /**施法距离 */\r\n    casting_distance:number=1000;\r\n    /**子弹速度 */\r\n    bullet_speed:number=1000;\r\n    //消耗的MP值\r\n    cost_mp:number=20;\r\n    mp_progress:MpProgress=null;\r\n    /**英雄当前拥有的buff */\r\n    protected hero_buff: Map<BuffId,BuffTimer>=null;\r\n    /**英雄当前拥有的debuff */\r\n    protected hero_debuff: Map<BuffId,BuffTimer>=null;\r\n    /**无尽buff */\r\n    protected map_endless_buff:Map<number,EndlessBuff>=null;\r\n    /**眩晕位置 */\r\n    xuanyun_pos:cc.Vec2=null;\r\n    /**子弹生成的位置 */\r\n    bullet_pos:cc.Vec2[]=[];\r\n    //英雄的数据\r\n    hero_data:HeroData=null;    \r\n    is_show_mp_hint:boolean=false;\r\n\r\n    /**当前的韧性 */\r\n    protected cur_toughness:number=0;\r\n    zhishiqi_type:SkillIndicatorType=SkillIndicatorType.beeline;\r\n    /**技能释放回调 */\r\n    skill_callback:Function=null;\r\n    /**攻击释放回调 */\r\n    attack_callback:Function=null;\r\n    /**眩晕回调 */;\r\n    xuanyun_callback:Function=null;\r\n    /**命中回调 */\r\n    hit_callback:Function=null;\r\n    /**重置回调 */\r\n    reset_callback:Function=null;\r\n    /**胜利回调 */\r\n    win_callback:Function=null;\r\n    /**加载完毕回调回调 */\r\n    loaded_callback:Function=null;\r\n    /**宠物 */\r\n    pet:Pet=null;\r\n    /**宠物技能的一些被动 */\r\n    /**此次伤害必定暴击 */\r\n    must_crit:number=0;\r\n    /**宠物21可以触发增伤次数 */\r\n    crit_increase_cd_3_num:number=0;\r\n    \r\n    setup_scale:number=1;\r\n    base_att_jiange:number=0;\r\n\r\n    /**buff状态 */\r\n    map_buff_state:Map<number,BuffState>=null;\r\n    /**debuff状态 */\r\n    map_debuff_state:Map<number,BuffState>=null;\r\n    /**是否需要检查技能释放距离 */\r\n    is_need_check_distance:boolean=true;\r\n    /**指示器类型 */\r\n    protected skill_tip_type:SkillTipType=SkillTipType.Full;\r\n    /**是否可以处理触摸事件，当技能CD完毕切按下了英雄时为true */\r\n    private is_can_touch:boolean=false;\r\n    private skill_tip:SkillTip=null;\r\n    /**是否触发自动释放逻辑 */\r\n    private is_auto_release:boolean=false;\r\n    private touch_rect:cc.Rect=null;\r\n    /**总共使用技能的次数 */\r\n    protected use_skill_num:number=0;\r\n    protected node_shadow:cc.Node=null;\r\n    /**点击剩余 */ \r\n    protected click_remain:number=0;\r\n    /**攻速记录值，不作判断 */\r\n    gongji_sudu:number=0;\r\n    /**技能队列 */\r\n    skill_queue:SkillType[]=[];\r\n    /**是否连续攻击 */\r\n    is_double_attack:boolean=false;\r\n\r\n    //----------------------------------------------LOAD---------------------------------------------\r\n    protected onLoad () {\r\n        GameManager.getInstance().all_hero.set(this.hero_type,this);\r\n        this.spine=this.node.getComponent(sp.Skeleton);\r\n        //this.setSkin();\r\n        this.touchListen();\r\n        this.initPos();\r\n        // if(this.hero_type==Hero_Type.DeLuYi){\r\n        //     this.setup_scale=0.22;\r\n        // }\r\n        // if(this.hero_type==Hero_Type.LeiShen||this.hero_type==Hero_Type.ShouWang){\r\n        //     this.setup_scale=1;\r\n        // }\r\n        this.node.scale=this.setup_scale;\r\n        this.node.scaleX=-this.setup_scale;\r\n        this.addLoadByGameEffectId(GameEffectId.hero_skill_common,2);\r\n        this.addLoadByGameEffectId(GameEffectId.skill_damage_record,2);\r\n        this.node.zIndex=1;\r\n        this.map_buff_state=new Map<number,BuffState>();\r\n        this.map_debuff_state=new Map<number,BuffState>();\r\n        this.hero_buff=new Map<BuffId,BuffTimer>();\r\n        this.hero_debuff=new Map<BuffId,BuffTimer>();\r\n        this.map_endless_buff=new Map<BuffId,EndlessBuff>();\r\n        this.addSkillTipType();\r\n    }\r\n\r\n    protected start()\r\n    {\r\n        //加载数据\r\n        this.hero_data=GameManager.getInstance().game_hero_data.get(this.hero_type);\r\n        this.bullet_speed=HeroBaseInfoManager.getInstance().getBaseBulletSpeed(this.hero_type);\r\n        this.gongji_jishu=this.hero_data.gongji_jiange;\r\n        this.gongji_sudu=this.getAttackSpeed();\r\n        this.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n        //this.playSpineAnimaton(Hero_State_Name.Idle,true,null,null);\r\n        //加载mp进度条\r\n        this.loadMpProgress();\r\n        this.loadPet();\r\n        let selfShadow=this.node.getChildByName('Monster_Shadow');\r\n        let pos=selfShadow.getPosition();\r\n        this.node_shadow=cc.instantiate(selfShadow);\r\n        this.node_shadow.parent=cc.find('Canvas/Hero_Shadow_Root');\r\n        this.node_shadow.scale=this.setup_scale;\r\n        this.node_shadow.setPosition(cc.v2(this.node.x+pos.x*this.setup_scale,this.node.y+pos.y*this.setup_scale));\r\n        selfShadow.removeFromParent();\r\n        if(this.getHeroState()==Hero_State.exit){\r\n            this.node_shadow.opacity=0;\r\n        }\r\n        this.node.zIndex=2;\r\n        this.casting_distance=this.hero_data.gongji_fanwei;\r\n        if(cc.winSize.height/cc.winSize.width>2){\r\n            this.casting_distance=this.hero_data.gongji_fanwei+200;\r\n        }\r\n        // if(this.hero_type==Hero_Type.NvWu){\r\n        //     this.casting_distance=192*3+GameManager.getInstance().enemy_att_y-this.node.y\r\n        // }\r\n        this.setTouchRect();\r\n    }\r\n\r\n    onDestroy()\r\n    {\r\n        //取消监听触摸事件\r\n        let touchNode=this.node.getChildByName('touchNode');\r\n        if(touchNode)\r\n        {\r\n            touchNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this);\r\n            touchNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this);\r\n            touchNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this);\r\n            touchNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this);\r\n        }\r\n        GameManager.getInstance().all_hero.delete(this.hero_type)\r\n    }\r\n\r\n    addSkillTipType(){\r\n        let node=cc.instantiate(this.prefab_skill_tip);                \r\n        this.skill_tip=node.getComponent(SkillTip);\r\n        this.skill_tip_type=this.skill_tip.getSkillTipType();\r\n        this.skill_tip.node.active=false;\r\n        switch(this.skill_tip_type){\r\n            case SkillTipType.Full:{\r\n                SkillManager.getInstance().node.addChild(node);\r\n            }break;\r\n            case SkillTipType.Circle:{\r\n                SkillManager.getInstance().node.addChild(node);\r\n            }break;\r\n            case SkillTipType.Rect:{\r\n                SkillManager.getInstance().node.addChild(node);\r\n            }break;\r\n            case SkillTipType.Dir:{\r\n                SkillManager.getInstance().node.addChild(node);\r\n            }break;\r\n        }\r\n    }\r\n\r\n    setTouchRect(){\r\n        let touchNode=this.node.getChildByName('touchNode');\r\n        this.touch_rect=cc.rect(this.node.x+touchNode.x*this.setup_scale-(touchNode.width*this.setup_scale/2),this.node.y+touchNode.y*this.setup_scale-(touchNode.height*this.setup_scale/2),touchNode.width*this.setup_scale,touchNode.height*this.setup_scale);\r\n        // let gg=cc.find('Canvas/Fighting_Root').getComponent(cc.Graphics);\r\n        // gg.rect(this.touch_rect.x,this.touch_rect.y,this.touch_rect.width,this.touch_rect.height);\r\n        // gg.stroke();\r\n    }\r\n\r\n    setSkillTipSize(width:number,height:number){\r\n        this.skill_tip.node.width=width;\r\n        this.skill_tip.node.height=height;\r\n    }\r\n\r\n    getSkillTipSize():cc.Size{\r\n        return this.skill_tip.node.getContentSize();\r\n    }\r\n\r\n    private touchListen(){\r\n        //监听触摸事件\r\n        let touchNode=this.node.getChildByName('touchNode');\r\n        if(touchNode)\r\n        {\r\n            touchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this);\r\n            touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this);\r\n            touchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this);\r\n            touchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this);\r\n        }        \r\n    }\r\n\r\n    private initPos(){\r\n        let xuanyun=this.node.getChildByName('xuanyun');\r\n        this.xuanyun_pos=xuanyun.getPosition();\r\n        xuanyun.removeFromParent();\r\n        this.bullet_pos=new Array();\r\n        let bullet1=this.node.getChildByName('bullet1');\r\n        let bullet2=this.node.getChildByName('bullet2');        \r\n        this.bullet_pos.push(bullet2.getPosition());\r\n        this.bullet_pos.push(bullet1.getPosition());\r\n        this.bullet_pos.push(bullet2.getPosition());\r\n        bullet1.removeFromParent();\r\n        bullet2.removeFromParent();\r\n    }\r\n\r\n    onGameWin(){\r\n        this.skill_queue=new Array();\r\n        this.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n        this.gongji_jishu=0;\r\n        if(this.win_callback){\r\n            this.win_callback();\r\n        }\r\n    }\r\n\r\n    protected addSkillListen(callBack:Function){\r\n        this.skill_callback=callBack;\r\n    }\r\n\r\n    protected addAttackListen(callBack:Function){\r\n        this.attack_callback=callBack;\r\n    }\r\n    \r\n    protected addHitListen(callBack:Function){\r\n        this.hit_callback=callBack;\r\n    }\r\n\r\n    protected addResetListen(callBack:Function){\r\n        this.reset_callback=callBack;\r\n    }\r\n\r\n    protected addGameWinListen(callBack:Function){\r\n        this.win_callback=callBack;\r\n    }\r\n\r\n    protected addLoadedListen(callBack:Function){\r\n        this.loaded_callback=callBack;\r\n    }\r\n\r\n    private loadMpProgress()\r\n    {\r\n        cc.resources.load('heros/skill_icon',cc.Prefab,(error: Error, assets:cc.Prefab)=>{\r\n            if(error)\r\n            {\r\n                console.log(error);\r\n                return;\r\n            }\r\n            let mpNode=cc.instantiate(assets);\r\n            mpNode.parent=cc.find('Canvas/Fighting_Ui');\r\n            mpNode.setPosition(cc.v2(this.node.x,this.node.y+15));\r\n            this.mp_progress=mpNode.getComponent(MpProgress);\r\n            this.mp_progress.init(this.hero_type);\r\n            this.changeCD(this.hero_data.getSkillColdDown(SkillType.Active)/3);\r\n            this.skill_total_time=this.hero_data.getSkillColdDown(SkillType.Active);\r\n            if(this.getHeroState()==Hero_State.exit){\r\n                this.mp_progress.hide();\r\n            }\r\n        });\r\n    }\r\n\r\n    protected loadZhiShiQi(zhishiqi:string,type:SkillIndicatorType)\r\n    {\r\n        this.zhishiqi_type=type;\r\n        cc.resources.load('heros/'+zhishiqi,cc.Prefab,(error: Error, assets:cc.Prefab)=>{\r\n            if(error)\r\n            {\r\n                console.log(error);\r\n                return;\r\n            }\r\n        });\r\n    }\r\n\r\n    addLoadByGameEffectId(id:GameEffectId,initCount:number){              \r\n        if(GameEffectsManager.getInstance().addEffectPoolById(id,initCount,()=>{\r\n            this.cur_load_num++;\r\n            if(this.cur_load_num>=this.need_load_num){\r\n                if(this.is_load_ok==false){\r\n                    this.is_load_ok=true;\r\n                    Hero.cur_loaded_num++;\r\n                    if(this.loaded_callback){\r\n                        this.loaded_callback();\r\n                    }\r\n                }                \r\n            }\r\n        })==true){\r\n            this.need_load_num++;  \r\n        }\r\n    }\r\n    \r\n    /**加载宠物 */\r\n    loadPet(){\r\n        if(this.hero_data.pet_id>0){\r\n            let type=SpiritAttributeManager.getInstance().getSpiritType(this.hero_data.pet_id);                \r\n            this.need_load_num++;\r\n            cc.resources.load('pet/pet'+type,cc.Prefab,(error: Error, assets:cc.Prefab)=>{\r\n                if(error)\r\n                {\r\n                    console.log(error);\r\n                    return;\r\n                }\r\n                let node=cc.instantiate(assets);\r\n                cc.find('Canvas/Pet_Root').addChild(node);                \r\n                switch(type){\r\n                    case 1:{\r\n                        this.pet=node.addComponent(IcePet);\r\n                    };break;\r\n                    case 2:{\r\n                        this.pet=node.addComponent(FirePet);\r\n                    };break;\r\n                    case 3:{\r\n                        this.pet=node.addComponent(WindPet);\r\n                    };break;\r\n                    case 4:{\r\n                        this.pet=node.addComponent(RayPet);\r\n                    };break;\r\n                }                \r\n                this.pet.init(this.hero_data.pet_id,this.hero_type,cc.v2(this.node.x-64,this.node.y+64));\r\n                this.pet.setHeroData(this.hero_data);\r\n                this.cur_load_num++;\r\n                node.zIndex=1000-node.y;\r\n                if(this.cur_load_num>=this.need_load_num){\r\n                    this.is_load_ok=true;\r\n                    Hero.cur_loaded_num++;\r\n                }                \r\n            });\r\n        }\r\n    }\r\n\r\n    /**隐藏英雄，此时英雄不能攻击或者释放技能 */\r\n    hideHero(){\r\n        this.hero_state=Hero_State.exit;\r\n        this.node.opacity=0;\r\n        if(this.node_shadow){\r\n            this.node_shadow.opacity=0;\r\n        }        \r\n        if(this.mp_progress){\r\n            this.mp_progress.hide();\r\n        }\r\n    }\r\n\r\n    showHero(){\r\n        this.setHeroState(Hero_State.idle,GongJi_FangXiang.zhong);\r\n        this.node.opacity=255;\r\n        this.node_shadow.opacity=255;\r\n        this.mp_progress.show();\r\n    }\r\n\r\n    //----------------------------------【皮肤】----------------------------------------------\r\n    protected setSkin()\r\n    {\r\n        //let heroQuality=HeroManager.getInstance().getHeroQuality(this.hero_type);\r\n        //let tier=HeroQualityManager.getInstance().getTier(heroQuality);\r\n        //this.spine.setSkin('stage'+(HeroManager.getSkinIndex(tier)));\r\n    }\r\n\r\n    /**---------------------------------操作相关---------------------------------------------- */\r\n    //-----------------------------------触摸事件------------------------------------------------------------\r\n    onTouchStart(e:cc.Event.EventTouch){\r\n        if(this.isHaveDeBuff(BuffId.Monster_XuanYun)&&this.hero_type!=Hero_Type.ZhenDe){\r\n            this.is_can_touch=false;\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(170002),1);\r\n            return false;\r\n        }\r\n        if(this.skill_cd_time>0){\r\n            this.is_can_touch=false;\r\n            if(this.click_remain>0){\r\n                return false;\r\n            }\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(170001),1);\r\n            return false;\r\n        }\r\n        if(GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n            return false;\r\n        this.is_can_touch=true;\r\n        this.is_auto_release=true;\r\n        this.click_remain=1;\r\n        SkillManager.getInstance().releaseSkillResult(false);\r\n        let pos=SkyManager.getInstance().node.convertToNodeSpaceAR(e.getLocation());        \r\n        //如果可以释放，显示指示器\r\n        switch(this.skill_tip_type){\r\n            case SkillTipType.Full:{\r\n                this.skill_tip.node.setPosition(cc.v2(0,-cc.winSize.height/2));\r\n                this.skill_tip.node.active=false;\r\n                this.skill_tip.setIsCanRelease(false);\r\n            }break;\r\n            case SkillTipType.Circle:{\r\n                this.skill_tip.node.setPosition(pos);\r\n                this.skill_tip.node.active=true;\r\n                this.skill_tip.setIsCanRelease(false);\r\n            }break;\r\n            case SkillTipType.Rect:{\r\n                this.skill_tip.node.setPosition(pos);\r\n                this.skill_tip.node.active=true;\r\n                this.skill_tip.setIsCanRelease(false);\r\n            }break;\r\n            case SkillTipType.Dir:{\r\n                this.skill_tip.node.setPosition(this.node.getPosition());\r\n                this.skill_tip.node.active=true;\r\n                this.skill_tip.setIsCanRelease(false);\r\n            }break;\r\n        }\r\n        //显示范围指示器\r\n        SkillManager.getInstance().showSkillRange(this.node.y,this.casting_distance);\r\n    }\r\n\r\n    onTouchMove(e:cc.Event.EventTouch){\r\n        if(this.is_can_touch==false||GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n            return;\r\n        let pos=SkyManager.getInstance().node.convertToNodeSpaceAR(e.getLocation());        \r\n        if(!this.touch_rect.contains(pos)){\r\n            this.is_auto_release=false;  \r\n        }        \r\n        switch(this.skill_tip_type){\r\n            case SkillTipType.Full:{\r\n                \r\n            }break;\r\n            case SkillTipType.Circle:{\r\n                this.skill_tip.node.setPosition(pos);\r\n            }break;\r\n            case SkillTipType.Rect:{\r\n                this.skill_tip.node.setPosition(pos);\r\n            }break;\r\n            case SkillTipType.Dir:{\r\n                \r\n            }break;\r\n        }\r\n        \r\n        if(pos.y>GameManager.getInstance().enemy_att_y)\r\n        {\r\n            let distance=pos.y-this.node.y;\r\n            if(distance<=this.casting_distance){\r\n                this.skill_tip.setIsCanRelease(true);\r\n            }else{\r\n                this.skill_tip.setIsCanRelease(false);\r\n            }            \r\n        }else{\r\n            this.skill_tip.setIsCanRelease(false);\r\n        }                \r\n    }\r\n    \r\n    onTouchEnd(e:cc.Event.EventTouch)\r\n    {\r\n        SkillManager.getInstance().releaseSkillResult(true);\r\n        SkillManager.getInstance().hideSkillRange();\r\n        this.skill_tip.node.active=false;\r\n        if(this.is_can_touch==false||GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n            return;\r\n        let pos=SkyManager.getInstance().node.convertToNodeSpaceAR(e.getLocation());\r\n        //判断坐标\r\n        if(pos.y>GameManager.getInstance().enemy_att_y){\r\n            let distance=pos.y-this.node.y;\r\n            if(distance<=this.casting_distance){\r\n                this.releaseSkill(pos);\r\n            }\r\n        }else{\r\n            if(this.is_auto_release){\r\n                if(this.startAutoRelease()==false){\r\n                    GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(140023));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onTouchCancel(e:cc.Event.EventTouch)\r\n    {\r\n        SkillManager.getInstance().releaseSkillResult(true);\r\n        SkillManager.getInstance().hideSkillRange();\r\n        this.skill_tip.node.active=false;\r\n        if(this.is_can_touch==false||GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n            return;\r\n        let pos=SkyManager.getInstance().node.convertToNodeSpaceAR(e.getLocation());\r\n        if(pos.y>GameManager.getInstance().enemy_att_y){            \r\n            let distance=pos.y-this.node.y;\r\n            if(distance<=this.casting_distance){\r\n                this.releaseSkill(pos);\r\n            }\r\n        }else{\r\n            if(this.is_auto_release){\r\n                this.startAutoRelease();\r\n            }\r\n        }\r\n    }\r\n\r\n    startAutoRelease():boolean{\r\n        //找怪，找不到就不放\r\n        let enemys=MonsterManager.getInstance().getMonstersForNearestBySkill(1,this.node.y,this.casting_distance);\r\n        if(enemys)\r\n        {\r\n            //最前的敌人\r\n            let enemyPos=enemys[0].getComponent(Monster).getCenterPos();\r\n            this.releaseSkill(enemyPos);\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**触摸的位置 */\r\n    releaseSkill(touchPos:cc.Vec2)\r\n    {\r\n        if(GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n        return;\r\n        this.use_skill_num++;        \r\n        //this.mp_progress.showLight();\r\n        if(this.skill_callback){\r\n            this.skill_callback(touchPos);\r\n        }\r\n        this.resetCD();\r\n        TaskManager.getInstance().emitTask(TaskItem.释放X次人物技能);\r\n    }\r\n\r\n    protected getSkillReleaseId():number{\r\n        return this.hero_type*10000+this.use_skill_num;\r\n    }\r\n\r\n    /**获得子弹生成的位置 */\r\n    getCreateBulletPos():cc.Vec2{\r\n        let pos=this.bullet_pos[this.cur_fangxiang];\r\n        return cc.v2(this.node.x+pos.x*this.node.scaleX,this.node.y+pos.y*this.node.scaleY);\r\n    }\r\n    /**获得子弹相对英雄的位置 */\r\n    getHeroBulletPos():cc.Vec2{\r\n        return this.bullet_pos[this.cur_fangxiang];\r\n    }\r\n\r\n    //----------------------------------无尽buff-------------------------------------------\r\n    /**\r\n     * 添加无尽buff\r\n     * @param endlessBuff EndlessBuff的实例\r\n     */\r\n     //  Administrator:\r\n    //  1.攻击力+x%\r\n    //  2.攻速+x%\r\n    //  3.暴击值+x\r\n    //  4.暴击增幅+x%\r\n    //  5.防御力+x%\r\n    //  6.最大生命值+x% \r\n    //  7.每秒回复最大生命值x%\r\n    //  8.立即回复最大生命值x%（注：该buff生效后立即消失）\r\n    //  9.连续攻击 概率x%\r\n    //  10.主动技能冷却时间减少x%\r\n    //  11.最终伤害加成x%\r\n    addEndlessBuff(endlessBuff:EndlessBuff){\r\n        if(!this.isHaveEndlessId(endlessBuff.id)){\r\n            this.map_endless_buff.set(endlessBuff.id,endlessBuff);\r\n            switch(endlessBuff.type){\r\n                case EndlessBuffType.Attack:{\r\n                    this.hero_data.total_attack+=this.hero_data.fixed_attck*endlessBuff.value;\r\n                }break;\r\n                case EndlessBuffType.AttackSpeed:{\r\n                    this.changeAttackSpeed(endlessBuff.value);\r\n                }break;\r\n                case EndlessBuffType.CritRate:{\r\n                    this.hero_data.Critical+=endlessBuff.value;\r\n                }break;\r\n                case EndlessBuffType.CritDamage:{\r\n                    this.hero_data.ExtraCritical+=endlessBuff.value;\r\n                }break;\r\n                case EndlessBuffType.Defense:{\r\n                    this.hero_data.total_defense+=this.hero_data.fix_defense*endlessBuff.value;\r\n                }break;\r\n                case EndlessBuffType.HealthMax:{\r\n                    this.hero_data.total_hp+=this.hero_data.fixed_hp*endlessBuff.value;\r\n                    // console.log(\"城墙加血:\",this.hero_data.total_hp,this.hero_data.fixed_hp,endlessBuff.value)\r\n                    GameManager.getInstance().refreshMainWallData()\r\n                }break;\r\n                case EndlessBuffType.HealthSec:{\r\n                    let buffData=new BuffData();\r\n                    buffData.buff_id=BuffId.Wall_Endless_Add_hp+this.hero_type;\r\n                    buffData.buff_type=BuffType.Gain;\r\n                    buffData.buff_value=[endlessBuff.value*WallManager.getInstance().getMainWall().getMaxHp()];\r\n                    buffData.remain_time=66666666;\r\n                    // buffData.game_effect_id=GameEffectId.chang_mao_shou_skill_active_1;\r\n                    buffData.recovery_jiange_time=1;\r\n                    WallManager.getInstance().getMainWall().addBuff(buffData)\r\n                }break;\r\n                case EndlessBuffType.HealthTeamAdd:{\r\n                    // let hp=WallManager.getInstance().getMainWall().getCurHp()+(endlessBuff.value*WallManager.getInstance().getMainWall().getMaxHp())\r\n                    // WallManager.getInstance().getMainWall().changeHp(hp)\r\n                    //及时用\r\n                }break;\r\n                case EndlessBuffType.DoubleAttack:{\r\n                    //连续攻击,不用加buff\r\n                }break;\r\n                case EndlessBuffType.ActiveSkillCd:{\r\n                    this.skill_total_time-=this.hero_data.getSkillColdDown(SkillType.Active)*endlessBuff.value\r\n                }break;\r\n                case EndlessBuffType.AddDamage:{\r\n                    this.hero_data.all_increase_damage+=endlessBuff.value;\r\n                }break;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 删除无尽buff\r\n     * @param id 无尽buff-id\r\n     */\r\n    removeEndlessBuff(id:number){\r\n        if(!this.isHaveEndlessId(id)){\r\n            let endlessBuff=this.map_endless_buff.get(id);\r\n            this.map_endless_buff.delete(id);\r\n            switch(endlessBuff.type){\r\n                case EndlessBuffType.Attack:{\r\n                    this.hero_data.total_attack-=this.hero_data.fixed_attck*endlessBuff.value;\r\n                }break;\r\n                case EndlessBuffType.AttackSpeed:{\r\n                    this.changeAttackSpeed(-endlessBuff.value);\r\n                }break;\r\n                case EndlessBuffType.CritRate:{\r\n                    this.hero_data.Critical-=endlessBuff.value;\r\n                }break;\r\n                case EndlessBuffType.CritDamage:{\r\n                    this.hero_data.ExtraCritical-=endlessBuff.value;\r\n                }break;\r\n                case EndlessBuffType.Defense:{\r\n                    this.hero_data.total_defense-=this.hero_data.fix_defense*endlessBuff.value;\r\n                }break;\r\n                case EndlessBuffType.HealthMax:{\r\n                    this.hero_data.total_hp-=this.hero_data.fixed_hp*endlessBuff.value;\r\n                }break;\r\n                case EndlessBuffType.HealthSec:{\r\n                    WallManager.getInstance().getMainWall().subBuff(BuffId.Wall_Endless_Add_hp+this.hero_type)\r\n                }break;\r\n                case EndlessBuffType.HealthTeamAdd:{\r\n\r\n                }break;\r\n                case EndlessBuffType.DoubleAttack:{\r\n\r\n                }break;\r\n                case EndlessBuffType.ActiveSkillCd:{\r\n                    this.skill_total_time+=this.hero_data.getSkillColdDown(SkillType.Active)*endlessBuff.value\r\n                }break;\r\n                case EndlessBuffType.AddDamage:{\r\n                    this.hero_data.all_increase_damage-=endlessBuff.value;\r\n                }break;\r\n            }\r\n        }\r\n    }\r\n    /**是否拥有一个无尽buff id */\r\n    isHaveEndlessId(id:number):boolean{\r\n        // console.log(\"++++++++\",id,this.map_endless_buff)\r\n        return this.map_endless_buff.has(id);\r\n    }\r\n    /**是否拥有一个无尽buff 类型 */\r\n    getEndlessByType(type:number):EndlessBuff{\r\n        let buff:EndlessBuff=null;\r\n        this.map_endless_buff.forEach((v,k)=>{\r\n            if(v.type==type){\r\n                buff=v;\r\n            }\r\n        });\r\n        return buff;\r\n    }\r\n    /**获得一个无尽buff */\r\n    getEndlessBuff(id:number):EndlessBuff{\r\n        return this.map_endless_buff.get(id);\r\n    }\r\n\r\n    //----------------------------------BUFF--------------------------------------------------\r\n\r\n    addBuff(buffData:BuffData): BuffTimer {\r\n        let buffId=buffData.buff_id;\r\n        if(!this.isHaveBuff(buffId))\r\n        {\r\n            //添加buff节点和特效       \r\n            let node:cc.Node=null;\r\n            if(buffData.game_effect_id==GameEffectId.Null){\r\n                node=new cc.Node(buffData.game_effect_id.toString());\r\n                this.node.addChild(node);\r\n            }else{\r\n                node=GameEffectsManager.getInstance().createGameEffectForParent(buffData.game_effect_id,this.xuanyun_pos,this.node);\r\n                //node.scale=this.node.width/200;\r\n            }\r\n            //添加buff\r\n            let buff:BuffTimer=node.getComponent(BuffTimer);\r\n            if(!buff){\r\n                buff=node.addComponent(BuffTimer);\r\n            }\r\n            buff.init(buffData);\r\n            //buff销毁时处理\r\n            buff.addDestroyListen(this.onBuffDestory.bind(this));\r\n            //buff治疗触发时处理\r\n            if(buffData.recovery_jiange_time>0){\r\n                buff.addRecoveryListen({\r\n                    doRecovery:(num:number)=>{\r\n                        WallManager.getInstance().getMainWall().changeHp(num);\r\n                    }\r\n                },buff.getFirstBuffValue());\r\n            }\r\n            this.hero_buff.set(buffData.buff_id,buff);\r\n            node.scale=1/this.setup_scale;\r\n            switch(buffId){\r\n                case BuffId.Pet3_JiaSu:\r\n                case BuffId.Hero_MeiMo_GongSu:\r\n                case BuffId.Hero_ZhenDe_Gongsu:\r\n                case BuffId.Hero_KuangZhanShi_DaZhao:\r\n                {\r\n                    this.changeAttackSpeed(buffData.buff_value[0]);\r\n                }break;\r\n                case BuffId.Hero_ChangMaoShow_GongSu:{\r\n                    this.changeAttackSpeed(buffData.buff_value[0]);\r\n                    node.setPosition(cc.v2(0,0));\r\n                    //新增一个背后特效\r\n                    buff.addTeXiao(GameEffectId.chang_mao_shou_skill_active_2,this.node.getPosition(),cc.find('Canvas/Hero_Shadow_Root'))\r\n                }break;                \r\n                case BuffId.Hero_ZhenDe_BaoJiMingZhongLv:{\r\n                    this.hero_data.crit_ex+=buffData.buff_value[0];\r\n                    this.hero_data.hit_ex+=buffData.buff_value[0];\r\n                }break;                \r\n            }\r\n            this.addBuffState(buffId,buffData.remain_time);\r\n            return buff;\r\n        }else{\r\n            let buff=this.hero_buff.get(buffId);\r\n            buff.refreshBuff(buffData);\r\n            this.addBuffState(buffId,buffData.remain_time);           \r\n            return buff;\r\n        }  \r\n        return null;\r\n    }\r\n\r\n    subBuff(buffId: BuffId): boolean {\r\n        let buff=this.hero_buff.get(buffId);\r\n        if(buff)\r\n        {\r\n            buff.destroySelf();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    onBuffDestory(buffData:BuffData){\r\n        this.hero_buff.delete(buffData.buff_id);\r\n        switch(buffData.buff_id){\r\n            case BuffId.Pet3_JiaSu:\r\n            case BuffId.Hero_MeiMo_GongSu:\r\n            case BuffId.Hero_KuangZhanShi_DaZhao:\r\n            case BuffId.Hero_ZhenDe_Gongsu:\r\n            case BuffId.Hero_ChangMaoShow_GongSu:{\r\n                this.changeAttackSpeed(-buffData.buff_value[0]);\r\n            }break;\r\n            case BuffId.Hero_ZhenDe_BaoJiMingZhongLv:{\r\n                this.hero_data.crit_ex-=buffData.buff_value[0];\r\n                this.hero_data.hit_ex-=buffData.buff_value[0];\r\n            }break;\r\n        }\r\n    }\r\n\r\n    isHaveBuff(buff: BuffId): boolean {\r\n        return this.hero_buff.has(buff);\r\n    }\r\n\r\n    removeAllBuff(){\r\n        this.hero_buff.forEach((buff:BuffTimer)=>{\r\n            this.subBuff(buff.getBuffId());\r\n        })\r\n    }\r\n\r\n   \r\n    addDeBuff(buffData:BuffData,insight:number=0): boolean {\r\n        if(!this.isHaveDeBuff(buffData.buff_id))\r\n        {\r\n            //控制类的debuff需要根据韧性来实现具体的效果\r\n            if(buffData.buff_type==BuffType.Vertigo){\r\n                if(this.cur_toughness>=1){\r\n                    return false;\r\n                }\r\n                if(this.hero_type!=Hero_Type.ZhenDe){\r\n                    this.mp_progress.setDisable(true);                    \r\n                    SkillManager.getInstance().hideSkillRange();\r\n                    this.skill_tip.node.active=false;\r\n                }                    \r\n                this.gongji_jishu=0;\r\n                this.spine.paused=true;\r\n                this.is_can_touch=false;\r\n                if(insight>0){\r\n                    buffData.remain_time=InjuredData.calcControlTime(buffData.remain_time,this.cur_toughness,insight);\r\n                }                \r\n                if(this.xuanyun_callback){\r\n                    this.xuanyun_callback(true);\r\n                }\r\n                WallManager.getInstance().getMainWall().showVertigo(buffData.remain_time);\r\n                //关闭时停\r\n                SkillManager.getInstance().setTimeStop(false);\r\n                SkillManager.getInstance().setIsSkillState(false);                \r\n            }\r\n            //添加buff节点和特效       \r\n            let node:cc.Node=null;\r\n            if(buffData.game_effect_id==GameEffectId.Null){\r\n                node=new cc.Node(buffData.game_effect_id.toString());\r\n                this.node.addChild(node);\r\n            }else{\r\n                node=GameEffectsManager.getInstance().createGameEffectForParent(buffData.game_effect_id,this.xuanyun_pos,this.node);\r\n                node.scale=this.node.width/200;\r\n            }\r\n            //添加buff\r\n            let buff:BuffTimer=node.getComponent(BuffTimer);\r\n            if(!buff){\r\n                buff=node.addComponent(BuffTimer);\r\n            }\r\n            buff.init(buffData);\r\n            //buff销毁时处理\r\n            buff.addDestroyListen(this.onDeBuffDestory.bind(this));\r\n            this.hero_debuff.set(buffData.buff_id,buff);\r\n            node.scale=1/this.setup_scale;\r\n            switch(buffData.buff_id){\r\n                case BuffId.Boss6_Skill_2_jiangongsu:\r\n                case BuffId.Boss3_JIAN_GongSu:{\r\n                    this.changeAttackSpeed(-buffData.buff_value[0]);\r\n                }break;\r\n                case BuffId.Boss8_Skill_2_attack:{\r\n                    this.hero_data.total_attack-=buffData.buff_value[0]*this.hero_data.fixed_attck;\r\n                }break;\r\n            }\r\n            this.addDeBuffState(buffData.buff_id,buffData.remain_time);\r\n            return true;\r\n        }else{\r\n           let buff=this.hero_debuff.get(buffData.buff_id);\r\n           buff.refreshBuff(buffData);\r\n           this.addDeBuffState(buffData.buff_id,buffData.remain_time);\r\n           switch(buffData.buff_id){\r\n            case BuffId.Boss6_Skill_2_jiangongsu:\r\n            {\r\n                if(buff.getFloorNum()<buffData.max_floor){\r\n                    this.changeAttackSpeed(-buffData.buff_value[0]);\r\n                }\r\n            }break;\r\n        }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 去除一个debuff\r\n     * @param buff debuff类型\r\n     * @param isNeedRecycle 是否需要调用回收\r\n     * @returns \r\n     */\r\n    subDeBuff(buffId: BuffId): boolean {\r\n        let buff=this.hero_debuff.get(buffId);\r\n        if(buff)\r\n        {\r\n            buff.destroySelf();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    onDeBuffDestory(buffData:BuffData){\r\n        // let buffState=this.map_debuff_state.get(BuffStateManager.getInstance().getDeBuffType(buffData.buff_id));\r\n        // if(buffState){\r\n        //     buffState.destroySelf();\r\n        // }\r\n        this.hero_debuff.delete(buffData.buff_id);\r\n        switch(buffData.buff_id){           \r\n            case BuffId.Monster_XuanYun:{\r\n                if(this.hero_type!=Hero_Type.ZhenDe) \r\n                    this.mp_progress.setDisable(false);\r\n                this.gongji_jishu=0;\r\n                this.spine.paused=false;\r\n                this.is_can_touch=true;\r\n                WallManager.getInstance().getMainWall().hideVertigo();\r\n                if(this.xuanyun_callback){\r\n                    this.xuanyun_callback(false);\r\n                }\r\n            }break;\r\n            case BuffId.Boss3_JIAN_GongSu:{\r\n                this.changeAttackSpeed(buffData.buff_value[0]);\r\n                let buffState=this.map_debuff_state.get(BuffStateType.AttackSpeed);\r\n                if(buffState){\r\n                    buffState.destroySelf();\r\n                }\r\n            }break;\r\n            case BuffId.Boss6_Skill_2_jiangongsu:{\r\n                this.changeAttackSpeed(buffData.buff_value[0]*buffData.cur_floor);\r\n                let buffState=this.map_debuff_state.get(BuffStateType.AttackSpeed);\r\n                if(buffState){\r\n                    buffState.destroySelf();\r\n                }\r\n            }break;\r\n            case BuffId.Boss8_Skill_2_attack:{\r\n                this.hero_data.total_attack+=buffData.buff_value[0]*this.hero_data.fixed_attck;\r\n                let buffState=this.map_debuff_state.get(BuffStateType.Attack);\r\n                if(buffState){\r\n                    buffState.destroySelf();\r\n                }\r\n            }break;\r\n        }\r\n    }\r\n    \r\n    isHaveDeBuff(buffId: BuffId): boolean {\r\n        return this.hero_debuff.has(buffId);\r\n    }\r\n\r\n    removeAllDeBuff(){\r\n        this.hero_debuff.forEach((v,k)=>{\r\n            this.subDeBuff(v.getBuffId())\r\n        });\r\n        \r\n    }\r\n\r\n    getGameEffectIdByDebuff(buff: Hero_DeBuff):GameEffectId{\r\n        let gameEffectId=GameEffectId.Null;\r\n        switch(buff){\r\n            case Hero_DeBuff.XuanYun:{\r\n                gameEffectId=GameEffectId.xuanyun;\r\n            }break;\r\n        }\r\n        return gameEffectId;\r\n    }\r\n\r\n    getGameEffectNameByDebuff(buff: Hero_DeBuff):string{\r\n        let name='0';\r\n        switch(buff){                \r\n            case Hero_DeBuff.XuanYun:{\r\n                name=GameEffectId.xuanyun+'';\r\n            }break;\r\n        }\r\n        return name;\r\n    }\r\n\r\n    addXuanYunListen(callback:Function){\r\n        this.xuanyun_callback=callback;\r\n    }\r\n\r\n    resetState(){\r\n        this.setCD(1/3);\r\n        this.removeAllBuff();\r\n        this.removeAllDeBuff();\r\n        this.map_buff_state.forEach((v,k)=>{\r\n            v.destroySelf();\r\n        });\r\n        this.map_debuff_state.forEach((v,k)=>{\r\n            v.destroySelf();\r\n        });\r\n        if(this.reset_callback){\r\n            this.reset_callback();\r\n        }\r\n        //同步数据信息\r\n        this.hero_data=GameManager.getInstance().game_hero_data.get(this.hero_type);        \r\n    }\r\n\r\n    /**添加一个buff状态图标 */\r\n    addBuffState(buffId:BuffId,remainTime:number){\r\n        let types=BuffStateManager.getInstance().getBuffType(buffId);\r\n        for(let i=0; i<types.length; i++){\r\n            let type=types[i];\r\n            if(this.map_buff_state.has(type)){\r\n                this.map_buff_state.get(type).refreshTime(remainTime);\r\n            }else{\r\n                let bfState=BuffStateManager.getInstance().createBuffState(type,this.hero_type);\r\n                bfState.init(type,remainTime,this.onBuffStateDestory.bind(this));\r\n                this.map_buff_state.set(type,bfState);\r\n                //this.node.addChild(shield.node);\r\n            }\r\n        }\r\n    }\r\n\r\n    onBuffStateDestory(type:BuffStateType){\r\n        this.map_buff_state.delete(type);\r\n    }\r\n\r\n    /**添加一个buff状态图标 */\r\n    addDeBuffState(buffId:BuffId,remainTime:number){\r\n        let types=BuffStateManager.getInstance().getDeBuffType(buffId);\r\n        for(let i=0; i<types.length; i++){\r\n            let type=types[i];\r\n            if(this.map_debuff_state.has(type)){\r\n                this.map_debuff_state.get(type).refreshTime(remainTime);\r\n            }else{\r\n                let bfState=BuffStateManager.getInstance().createDeBuffState(type,this.hero_type);\r\n                bfState.init(type,remainTime,this.onDeBuffStateDestory.bind(this));\r\n                this.map_debuff_state.set(type,bfState);\r\n                //this.node.addChild(shield.node);\r\n            }\r\n        }\r\n    }\r\n\r\n    onDeBuffStateDestory(type:BuffStateType){\r\n        this.map_debuff_state.delete(type);\r\n    }\r\n    \r\n    /**设置攻速，每秒攻击次数 */\r\n    private setAttackSpeed(numSec:number){\r\n        this.gongji_sudu=numSec;\r\n        if(numSec>10){\r\n            numSec=10;\r\n        }\r\n        if(numSec<0.1){\r\n            numSec=0.1;\r\n        }\r\n        this.hero_data.gongji_jiange=1/numSec;\r\n    }\r\n    /**改变当前攻速,buffData:比率 */\r\n    private changeAttackSpeed(rate:number){\r\n        let gjsd=this.getAttackSpeed();\r\n        gjsd+=(rate)*(1/this.hero_data.base_jiange);\r\n        this.setAttackSpeed(gjsd);\r\n    }\r\n    /**获得当前攻速 */\r\n    private getAttackSpeed():number{\r\n        return 1/this.hero_data.gongji_jiange;\r\n    }\r\n\r\n    //---------------------------状态,动画----------------------------------------------\r\n    public setHeroState(state:Hero_State,fangxiang:GongJi_FangXiang,data?:KeyFrameData[],endCallback?:Function)\r\n    {\r\n        this.hero_state=state;\r\n        this.cur_fangxiang=fangxiang;\r\n        switch(this.cur_fangxiang){\r\n            case GongJi_FangXiang.zuo:{\r\n                this.node.scaleX=-this.setup_scale;\r\n            }break;\r\n            case GongJi_FangXiang.zhong:{\r\n                this.node.scaleX=this.setup_scale;\r\n            }break;\r\n            case GongJi_FangXiang.you:{\r\n                this.node.scaleX=this.setup_scale;\r\n            }break;\r\n        }\r\n        //播放动画\r\n        switch(this.hero_state){\r\n            case Hero_State.idle:{\r\n                this.playSpineAnimation(this.getSpineName(),true,null,null);\r\n            }break;\r\n            case Hero_State.attack:{\r\n                this.playSpineAnimation(this.getSpineName(),false,data,endCallback);\r\n            }break;\r\n            case Hero_State.skill:\r\n            {\r\n                this.playSpineAnimation(this.getSpineName(),false,data,endCallback);\r\n            }break;\r\n        }\r\n    }\r\n\r\n    protected setHeroStateAndAnimation(state:Hero_State,name:string,loop:boolean,data?:KeyFrameData[],endCallback?:Function){\r\n        this.hero_state=state;\r\n        this.playSpineAnimation(name,loop,data,endCallback);\r\n    }\r\n\r\n    getHeroState(){\r\n        return this.hero_state;\r\n    }\r\n\r\n    /**根据敌人位置获得攻击方向 */\r\n    protected getFangXiangByPos(pos:cc.Vec2):GongJi_FangXiang\r\n    {\r\n        //对敌人单位进行方向判断，确定打击方向\r\n        let fangxiang=GongJi_FangXiang.zhong;\r\n        let offsetPos=pos.sub(this.node.getPosition());\r\n        let pi2=Math.PI*2;\r\n        let radian=(Math.atan2(offsetPos.y,offsetPos.x)+pi2)%pi2;\r\n        let angle=180*radian/Math.PI;\r\n        if(angle<=60)\r\n        {\r\n            fangxiang=GongJi_FangXiang.you;\r\n        }else if(angle>60 && angle<120)\r\n        {\r\n            fangxiang=GongJi_FangXiang.zhong;\r\n        }else if(angle>=120 && angle<=180)\r\n        {\r\n            fangxiang=GongJi_FangXiang.zuo;\r\n        }\r\n        return fangxiang;\r\n    }\r\n\r\n    getSpineName():string{\r\n        switch(this.hero_state){\r\n            case Hero_State.attack:{\r\n                return Hero_State_Name.Attack;\r\n            }break;\r\n            case Hero_State.skill:{\r\n                return Hero_State_Name.Skill;\r\n            }break;\r\n            case Hero_State.idle:{\r\n                return Hero_State_Name.Idle;\r\n            }break;\r\n        }\r\n    }\r\n    /**\r\n     * 播放一个骨骼动画\r\n     * @param name 骨骼动画名称\r\n     * @param isLoop 是否循环\r\n     * @param data 是否监听关键帧，关键帧数据包含关键帧名称，监听到关键帧后的回调\r\n     * @param endCallback 播放结束后的回调\r\n     */\r\n     playSpineAnimation(name:string,isLoop:boolean=false,data?:KeyFrameData[],endCallback?:Function){        \r\n        let anima=this.spine.setAnimation(0,name,isLoop);\r\n        if(data){\r\n            this.spine.setTrackEventListener(anima,(entry: sp.spine.TrackEntry, event) =>{\r\n                for(let i=0; i<data.length; i++){\r\n                    if(event.data.name==data[i].name){\r\n                        data[i].callback();\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        if(endCallback){\r\n            this.spine.setTrackCompleteListener(anima,(entry: sp.spine.TrackEntry, event) =>{\r\n                anima.listener=null;                \r\n                endCallback();\r\n            })\r\n        }\r\n    }\r\n        \r\n    //------------------------------CD--------------------------------------\r\n\r\n    public resetSkill()\r\n    {\r\n        this.skill_cd_time=0;\r\n        this.showCD();\r\n    }\r\n\r\n    public resetCD()\r\n    {\r\n        this.skill_cd_time=this.skill_total_time;\r\n        this.showCD();\r\n        //释放了技能，立马减去MP\r\n        //GameManager.getInstance().wall_data.changeMp(-this.hero_data.cost_mp);\r\n    }\r\n    /**百分比 */\r\n    public setCD(perTime:number){\r\n        this.skill_cd_time=perTime*this.hero_data.getSkillColdDown(SkillType.Active);;\r\n        this.changeCD(0);\r\n    }\r\n\r\n    public changeCD(time:number)\r\n    {\r\n        this.skill_cd_time+=time;\r\n        if(this.skill_cd_time<=0)\r\n        {\r\n            this.skill_cd_time=0;\r\n            if(this.mp_progress){\r\n                this.mp_progress.setNormalSP();\r\n            }\r\n            if(GameManager.getInstance().auto_fighting&&GameManager.getInstance().cur_game_state==GameState.Game_Playing && this.getIsCanSkill() && SkillManager.getInstance().getIsSkillState()==false){\r\n                this.startAutoRelease();\r\n            }\r\n        }else\r\n        {\r\n            //显示蒙板和倒计时\r\n            if(this.mp_progress){\r\n                this.mp_progress.setCDSP();\r\n            }            \r\n        }\r\n        this.showCD();\r\n    }\r\n\r\n    private showCD()\r\n    {\r\n        if(this.mp_progress)\r\n        {\r\n            let progress=1-this.skill_cd_time/this.skill_total_time;\r\n            this.mp_progress.setProgress(progress);\r\n        }        \r\n    }\r\n\r\n    getIsCanSkill():boolean\r\n    {\r\n        if(this.isHaveDeBuff(BuffId.Monster_XuanYun)||this.getHeroState()==Hero_State.exit){\r\n            return false;\r\n        }\r\n        this.is_show_mp_hint=false;\r\n        if(this.skill_cd_time<=0)\r\n        {\r\n            if(this.is_need_check_distance){\r\n                //如果需要判断释放距离的，则需要判断释放距离内有没有怪物，没有则返回false\r\n                let enemys=MonsterManager.getInstance().getMonstersForNearestBySkill(this.max_gongji_num,this.node.y,this.casting_distance);\r\n                if(enemys==null){\r\n                    return false;\r\n                }\r\n            }            \r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * \r\n     * @param damage 本次不暴击的伤害值\r\n     * @param isBullet 是否子弹类型\r\n     * @param skillType 技能类型\r\n     * @param skillRate 如果是技能，技能的比率\r\n     * @param continuousRate 伤害比率-应用在持续伤害比率\r\n     * @returns 攻击数据\r\n     */\r\n    getGongJiData(damageType:DamageType,isBullet:boolean,skillType:SkillType,skillRate:number=1,continuousRate:number=0):GongJiData{\r\n        let gjData=new GongJiData();\r\n        gjData.hero_data=cc.instantiate(this.hero_data);       \r\n        gjData.is_bullet=isBullet;\r\n        gjData.damage_type=damageType;\r\n        gjData.hero_type=this.hero_type;        \r\n        if(damageType==DamageType.Normal){\r\n\r\n        }else{\r\n            //技能伤害比率\r\n            gjData.skill_damage_rate=skillRate;\r\n            gjData.continuous_damage_rate=continuousRate;            \r\n            if(skillType==SkillType.Active){\r\n                gjData.skill_release_id=this.getSkillReleaseId();\r\n            }\r\n        }        \r\n        return gjData;\r\n    }\r\n\r\n    onDamageMonster(damageType:DamageType,isCrit:boolean,monster:cc.Node){\r\n        if(damageType==DamageType.Normal){\r\n            if(this.pet){\r\n                this.pet.onHeroHitMonster(monster);\r\n            }\r\n        }\r\n        if(this.hit_callback){\r\n            this.hit_callback(damageType,isCrit,monster);\r\n        }\r\n    }\r\n\r\n    resetGongJiJiShu(){\r\n        this.gongji_jishu=0;\r\n        this.is_can_jishu=true;\r\n    }\r\n\r\n    resetNormalAttack(){\r\n        this.gongji_jishu=this.hero_data.gongji_jiange;\r\n        this.is_can_jishu=true;\r\n    }\r\n    \r\n    setAttSpineScale(){\r\n        this.spine.timeScale=this.hero_data.base_jiange/this.hero_data.gongji_jiange;\r\n    }\r\n\r\n    startNormalAttack(monster:cc.Node){\r\n        let isDouble:boolean=this.is_double_attack;\r\n        if(this.is_double_attack){\r\n            this.spine.timeScale=this.hero_data.base_jiange/this.hero_data.gongji_jiange*2;            \r\n        }\r\n        this.is_double_attack=false;\r\n        this.attack_callback(monster);\r\n        if(this.pet){\r\n            this.pet.startReleaseSkill(monster);\r\n        }\r\n        if(GameManager.getInstance().cur_game_mode==GameMode.Endless){\r\n            if(isDouble==false){\r\n                let buff=this.getEndlessByType(EndlessBuffType.DoubleAttack)\r\n                if(buff){\r\n                    //概率\r\n                    let rate=buff.value;\r\n                    if(Math.random()<rate){\r\n                        this.is_double_attack=true;\r\n                        this.spine.timeScale=this.hero_data.base_jiange/this.hero_data.gongji_jiange*2;\r\n                    }\r\n                }\r\n            }\r\n        }                \r\n    }\r\n\r\n    //---------------------------UPDATE-----------------------------------\r\n    update(dt:number)\r\n    {\r\n        if(GameManager.getInstance().cur_game_state!=GameState.Game_Playing||Hero_State.exit==this.getHeroState())\r\n            return;\r\n        this.checkSkill(dt);\r\n        if(this.isHaveDeBuff(BuffId.Monster_XuanYun)){\r\n            return;\r\n        }\r\n        this.checkAttack(dt);\r\n        if(this.click_remain>0){\r\n            this.click_remain-=dt;            \r\n        }\r\n    }\r\n\r\n    protected updateCheck(dt):boolean\r\n    {\r\n        if(this.isHaveDeBuff(BuffId.Monster_XuanYun)){\r\n            return false;\r\n        }\r\n        this.checkAttack(dt);\r\n        \r\n        return true;\r\n    }\r\n\r\n    private checkSkill(dt:number){\r\n        if(this.hero_state!=Hero_State.skill)\r\n        {\r\n            this.changeCD(-dt);\r\n        }\r\n    }\r\n\r\n    private checkAttack(dt)\r\n    {\r\n        if(this.is_can_jishu&&this.is_load_ok)\r\n        {\r\n            this.gongji_jishu+=dt;\r\n            if(this.gongji_jishu>=this.hero_data.gongji_jiange)\r\n            {\r\n                //开始攻击\r\n                this.gongji_jishu=0;\r\n                this.is_can_gongji=true;\r\n            }\r\n        }\r\n        //自动攻击\r\n        if(this.is_can_gongji && this.getHeroState()!=Hero_State.skill)\r\n        {\r\n            this.is_can_gongji=false;\r\n            let monsters=MonsterManager.getInstance().getMonstersForNearest(this.max_gongji_num,this.node.getPosition(),this.hero_data.gongji_fanwei);\r\n            if(monsters)\r\n            {\r\n                this.gongji_jishu=0;\r\n                this.is_can_gongji=true;\r\n                this.setAttSpineScale();\r\n                this.startNormalAttack(monsters[0]);\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n}\r\n"]}