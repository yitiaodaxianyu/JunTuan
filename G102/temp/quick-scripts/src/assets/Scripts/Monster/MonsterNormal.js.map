{"version":3,"sources":["assets\\Scripts\\Monster\\MonsterNormal.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GameState } from \"../Constants\";\r\nimport { Enemy_DeBuff_Type, Enemy_State } from \"../Enemy/EnemyConfig\";\r\nimport { GameEffectId, GameEffectsManager } from \"../Game/GameEffectsManager\";\r\nimport Move from \"../Game/Move\";\r\nimport GameManager from \"../GameManager\";\r\nimport { BuffId, BuffType, DamageType } from \"../Hero/Game/HeroConfig\";\r\nimport Wall from \"../Wall/Wall\";\r\nimport { WallType } from \"../Wall/WallConfig\";\r\nimport WallManager from \"../Wall/WallManager\";\r\nimport Monster from \"./Monster\";\r\nimport { GongJiMode, KeyFrameData, MonsterActionName, MonsterFaceName, MonsterSkinType, StrengthType } from \"./MonsterData\";\r\nimport MonsterManager from \"./MonsterManager\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n/**普通怪物 */\r\n@ccclass\r\nexport default class MonsterNormal extends Monster {\r\n\r\n    monster_xuanyun_callback:Function=null;\r\n    monster_init_callback:Function=null;\r\n    monster_death_callback:Function=null;\r\n    monster_att_callback:Function=null;\r\n\r\n    protected onLoad(): void {\r\n        super.onLoad();\r\n        this.addDeathCallback(this.onMonsterDeath);\r\n        this.addInitListen(this.onMonsterInited);\r\n        this.addXuanYunListen(this.onXuanYunResult);\r\n    }\r\n\r\n    private onMonsterInited(){\r\n        this.initOutward();\r\n        if(this.base_data.AttackMode==GongJiMode.Far){\r\n            GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.monster_far_att);\r\n            GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.monster_far_att_hit);\r\n        }\r\n        this.scheduleOnce(()=>{\r\n            this.setEnemyState(Enemy_State.move);\r\n        },1);\r\n        if(this.monster_init_callback){\r\n            this.monster_init_callback();\r\n        }\r\n    }\r\n\r\n    addMonsterNormalInited(callback:Function){\r\n        this.monster_init_callback=callback;\r\n    }\r\n\r\n    /**初始化外观*/\r\n    private initOutward(){\r\n        this.setSkin(this.getSkinName());\r\n        super.playSpinAnimaton(this.getAnimaName(MonsterActionName.Idle),true);\r\n    }\r\n\r\n    setTargetPos(pos:cc.Vec2,endCallback:Function){\r\n        this.move_target_pos=pos;\r\n        this.move_end_callback=endCallback;\r\n    }\r\n    \r\n    setSkin(skinName: string){\r\n        this.spine.setSkin(skinName);\r\n    }\r\n\r\n    setFaceType(type:MonsterFaceName){\r\n        this.face_type=type;\r\n        if(this.face_type==MonsterFaceName.SideL){\r\n            this.node.scaleX=-this.setup_scale;\r\n        }else {\r\n            this.node.scaleX=this.setup_scale;\r\n        }\r\n    }\r\n\r\n    getSkinName():string{\r\n        return this.face_type+this.skin_type;\r\n    }\r\n\r\n    getAnimaName(actionName:MonsterActionName):string{\r\n        return this.face_type+\"_\"+actionName;\r\n    }\r\n\r\n    /**设置打击目标 */\r\n    setAttTarget(target:cc.Node){\r\n        this.att_target=target;\r\n        if(target){\r\n            this.att_jishu=this.att_jiange;\r\n        }else{\r\n            this.move_direction=Math.PI*3/2;\r\n        }        \r\n    }\r\n\r\n    addMonsterNormalAttack(callback:Function){\r\n        this.monster_att_callback=callback;\r\n    }\r\n    /**\r\n     * \r\n     * @param target 攻击的目标\r\n     */\r\n    startAttack(target?:cc.Node){\r\n        if(this.monster_att_callback){\r\n            //是否截获本次攻击\r\n            if(this.monster_att_callback())\r\n            {\r\n                return;\r\n            }\r\n        }\r\n        super.setEnemyState(Enemy_State.att);\r\n        this.att_jishu=0; \r\n        if(target){\r\n            let offsetPos=target.getPosition().sub(this.node.getPosition());\r\n            this.move_direction=Math.atan2(offsetPos.y,offsetPos.x);\r\n            this.checkFace(MonsterActionName.Attack);\r\n        }else{\r\n            this.move_direction=Math.PI*3/2;\r\n            this.checkFace(MonsterActionName.Attack);\r\n        }\r\n        let data=new KeyFrameData();\r\n        data.name='OnDamaging';\r\n        data.callback=()=>{\r\n            this.att_jishu=0;\r\n            switch(this.base_data.AttackMode){\r\n                case GongJiMode.Melee:{\r\n                    if(target){\r\n                        //测试\r\n                        target.removeFromParent();\r\n                        this.setAttTarget(null);\r\n                    }else{\r\n                        //造成伤害\r\n                        super.injureWall(super.getAttData(DamageType.Normal,false));\r\n                    }\r\n                    let pos=target?target.getPosition():cc.v2(this.node.x,this.att_wall.getWallMaxYY());\r\n                    let attNode=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.monster_normal_att,pos);\r\n                    attNode.scale=super.getWallAttackScale();\r\n                }break;\r\n                case GongJiMode.Far:{\r\n                    let pos=target?target.getPosition():cc.v2(this.node.x,this.att_wall.getWallMaxYY());\r\n                    this.startLaunch(pos);\r\n                }break;\r\n            }            \r\n        }\r\n        super.playSpinAnimaton(this.getAnimaName(MonsterActionName.Attack),false,data,()=>{\r\n            this.startIdle();\r\n            super.setEnemyState(Enemy_State.move);\r\n            if(this.att_wall){\r\n                this.move_direction=Math.random()>0.5?Math.PI:0;\r\n            }\r\n        })\r\n    }\r\n\r\n    startLaunch(pos:cc.Vec2){\r\n        let node=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.monster_far_att,this.getAttPos());\r\n        let moveTS=node.getComponent(Move);\r\n        moveTS.init(400,0,GameEffectId.monster_far_att);\r\n        moveTS.setTargetPos(pos,()=>{\r\n            GameEffectsManager.getInstance().createGameEffectById(GameEffectId.monster_far_att_hit,node.getPosition());            \r\n            //造成伤害\r\n            super.injureWall(super.getAttData(DamageType.Normal,true));\r\n        });\r\n    }\r\n\r\n    startIdle(){\r\n        super.playSpinAnimaton(this.getAnimaName(MonsterActionName.Idle),true);\r\n    }\r\n\r\n    addMonsterNormalXuanYun(callback:Function){\r\n        this.monster_xuanyun_callback=callback;\r\n    }\r\n\r\n    onXuanYunResult(isXuanYun:boolean){\r\n        if(isXuanYun){\r\n            this.startXuanYun();\r\n        }else{\r\n            this.att_jishu=0;\r\n            this.setEnemyState(Enemy_State.move);\r\n        }\r\n        if(this.monster_xuanyun_callback){\r\n            this.monster_xuanyun_callback(isXuanYun);\r\n        }        \r\n    }\r\n\r\n    startXuanYun(){\r\n        super.playSpinAnimaton(this.getAnimaName(MonsterActionName.Hurt),false,null,()=>{\r\n            if(this.isHaveBuff(BuffId.Hero_XuanYun))\r\n                this.spine.paused=true;\r\n        });\r\n    }\r\n\r\n    addMonsterNormalDeath(callback:Function){\r\n        this.monster_death_callback=callback;\r\n    }\r\n\r\n    onMonsterDeath(){\r\n        // super.playDeadAnimaton(this.getAnimaName(MonsterActionName.Death),()=>{\r\n        //     this.removeAllDeBuff();\r\n        //     cc.tween(this.shadow).to(0.5,{opacity:0}).start();\r\n        //     cc.tween(this.node).to(0.5,{opacity:0}).call(()=>{\r\n        //         this.removeAllDeBuff();\r\n        //         MonsterManager.getInstance().destroyMonster(this.node,this.monster_type);\r\n        //         let die=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.monster_die,this.node.getPosition());\r\n        //         die.scale=this.base_data.StrengthType==StrengthType.Normal?0.4:0.8;\r\n        //     }).start();\r\n        // });\r\n        this.removeAllDeBuff();\r\n        this.shadow.opacity=0;\r\n        this.node.opacity=0;\r\n        let die=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.monster_die,super.getCenterPos());\r\n        die.scale=this.base_data.StrengthType==StrengthType.Normal?0.4:0.8;\r\n        if(this.monster_death_callback){\r\n            this.monster_death_callback();\r\n        }\r\n        cc.tween(this.node).delay(0.5).call(()=>{\r\n            this.removeAllDeBuff();\r\n            MonsterManager.getInstance().destroyMonster(this.node,this.monster_type);\r\n        }).start();\r\n    }\r\n    \r\n    update(dt)\r\n    {\r\n        if((GameManager.getInstance().cur_game_state!=GameState.Game_Playing)||this.getIsDie())\r\n        {\r\n            return;\r\n        }\r\n        super.update(dt);\r\n        if(!this.isHaveDeBuffType(BuffType.Vertigo)){\r\n            this.checkAtt(dt);\r\n        }else{\r\n            if(this.isHaveDeBuff(BuffId.Hero_MeiMo_Active_MeiHuo)){\r\n                this.moving(dt);\r\n            }\r\n        }\r\n    }\r\n\r\n    private moving(dt)\r\n    {\r\n        if(!this.isHaveDeBuff(BuffId.Hero_XuanYun)&&(this.getEnemyState()==Enemy_State.move)){\r\n            let speed=this.cur_move_speed*dt;\r\n            if(this.move_target_pos){\r\n                let offsetPos=this.move_target_pos.sub(this.node.getPosition());\r\n                if(offsetPos.mag()<speed)\r\n                {\r\n                    if(this.move_end_callback){\r\n                        this.move_end_callback();\r\n                        this.move_end_callback=null;\r\n                    }\r\n                }else\r\n                {\r\n                    let pi2=Math.PI*2;\r\n                    this.move_direction=(Math.atan2(offsetPos.y,offsetPos.x)+pi2)%pi2;\r\n                    this.startMove(dt);\r\n                }\r\n            }else{\r\n                this.startMove(dt);\r\n            }\r\n        }\r\n    }\r\n\r\n    startMove(dt){\r\n        let disX=this.node.x;\r\n        let disY=this.node.y;\r\n        let speed=this.cur_move_speed*dt;\r\n        disX+=speed*Math.cos(this.move_direction);\r\n        disY+=speed*Math.sin(this.move_direction);\r\n        let leftRight=this.setX(disX);\r\n        if(leftRight!=0){\r\n            this.move_direction+=Math.PI;\r\n        }\r\n        this.setY(disY);\r\n        // //不能穿过城墙\r\n        // let walls=WallManager.getInstance().getAllWall();\r\n        // walls.forEach((wall:Wall,wallType:WallType)=>{\r\n        //     //攻击城墙的条件1，必须在城墙之上,2达到攻击距离\r\n        //     let rect=wall.getWallRect();\r\n        //     if(rect.contains(this.node.getPosition())&&this.node.y>wall.node.y){\r\n        //         this.node.y=rect.yMax;\r\n        //     }\r\n        // })\r\n        this.checkFace(MonsterActionName.Walk);\r\n    }\r\n    /**检测朝向 */\r\n    checkFace(actionName:MonsterActionName){\r\n        let pi2=Math.PI*2;\r\n        this.move_direction=(this.move_direction+pi2)%pi2;\r\n        let newFace=MonsterFaceName.Front;\r\n        //60~120°，背面\r\n        if(this.move_direction>=Math.PI/3&&this.move_direction<=Math.PI*2/3){\r\n            newFace=MonsterFaceName.Back;\r\n        }else if(this.move_direction>=Math.PI*4/3&&this.move_direction<=Math.PI*5/3){\r\n            newFace=MonsterFaceName.Front;\r\n        }else{            \r\n            if(this.move_direction>=Math.PI*2/3&&this.move_direction<=Math.PI*4/3){                \r\n                newFace=MonsterFaceName.SideL;\r\n            }else{                \r\n                newFace=MonsterFaceName.SideR;\r\n            }\r\n        }\r\n        if(this.face_type!=newFace){\r\n            this.setFaceType(newFace);\r\n            this.setSkin(this.getSkinName());\r\n            super.playSpinAnimaton(this.getAnimaName(actionName),true);\r\n        }else{            \r\n            if(this.spine.animation!=this.getAnimaName(MonsterActionName.Walk))\r\n            super.playSpinAnimaton(this.getAnimaName(actionName),true);\r\n        }\r\n        \r\n    }\r\n\r\n    /**攻击计算 */\r\n    checkAtt(dt:number){        \r\n        this.att_jishu+=dt;\r\n        if(this.att_jishu>=this.att_jiange){\r\n            this.att_jishu=this.att_jiange;\r\n            //判断是否在攻击范围之内\r\n            if(this.att_target){\r\n                this.attTarget(dt);\r\n            }else{\r\n                this.attWall(dt);\r\n            }\r\n        }else{\r\n            this.moving(dt);\r\n        }\r\n    }\r\n    /**攻击具体目标判断 */\r\n    attTarget(dt:number){\r\n        let dis=this.node.getPosition().sub(this.att_target.getPosition()).mag();\r\n        if(dis<=this.base_data.AttackDistance){            \r\n            this.startAttack(this.att_target);\r\n        }else{\r\n            this.move_target_pos=this.att_target.getPosition();\r\n            if(this.getEnemyState()==Enemy_State.move)\r\n            this.moving(dt);\r\n        }\r\n    }\r\n    /**攻击城墙判断 */\r\n    attWall(dt:number){\r\n        let walls=WallManager.getInstance().getAllWall();\r\n        let attWall=null;\r\n        walls.forEach((wall:Wall,wallType:WallType)=>{\r\n            //攻击城墙的条件1，必须在城墙之上,2达到攻击距离\r\n            if(this.node.y>=wall.getWallMaxYY()&&Math.abs(this.node.y-wall.getWallMaxYY())<=this.base_data.AttackDistance){                \r\n                attWall=wall;                \r\n            }\r\n        })\r\n        if(attWall!=null){            \r\n            this.att_wall=attWall;\r\n            this.startAttack();\r\n        }else{\r\n            this.move_direction=Math.PI*3/2;\r\n            this.move_target_pos=null;        \r\n            this.moving(dt);\r\n        }\r\n    }\r\n    \r\n}\r\n"]}