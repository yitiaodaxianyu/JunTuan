{"version":3,"sources":["assets\\Scripts\\Monster\\Elite\\NiuJiangJun.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GameState } from \"../../Constants\";\r\nimport { Enemy_State } from \"../../Enemy/EnemyConfig\";\r\nimport { GameEffectsManager, GameEffectId } from \"../../Game/GameEffectsManager\";\r\nimport GroundManager from \"../../Game/GroundManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { BuffData } from \"../../Hero/Game/BuffData\";\r\nimport { BuffId, BuffType, HaloData, HaloId } from \"../../Hero/Game/HeroConfig\";\r\nimport Monster from \"../Monster\";\r\nimport { KeyFrameData } from \"../MonsterData\";\r\nimport MonsterManager from \"../MonsterManager\";\r\nimport MonsterNewNormal from \"../MonsterNewNormal\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NiuJiangJun extends MonsterNewNormal {\r\n\r\n    light:cc.Node=null;\r\n    load_num:number=0;\r\n\r\n    protected onLoad(): void {\r\n        super.onLoad();\r\n        GameEffectsManager.getInstance().addEffectPoolById(GameEffectId.monster68_niujiangjun_skill,1);\r\n        super.addMonsterNormalInited(this.onMonsterNormalInited);\r\n    }\r\n\r\n    onMonsterNormalInited () {       \r\n        this.skill_cold_down[0]=this.skill_data.getSkillValue1(1);\r\n    }\r\n\r\n    startSkill(){\r\n        super.setEnemyState(Enemy_State.skill);\r\n        let data=new KeyFrameData();\r\n        data.name='Skill';\r\n        data.callback=()=>{\r\n            GroundManager.getInstance().createGameEffectById(GameEffectId.monster68_niujiangjun_skill,this.node.getPosition());\r\n            //鼓舞buff\r\n            let monsters=MonsterManager.getInstance().getMonstersForMonsterPos(-1,this.node.getPosition(),200);            \r\n            if(monsters){\r\n                for(let i=0; i<monsters.length; i++){                            \r\n                    let monsterTs=monsters[i].getComponent(Monster);\r\n                    if(monsterTs){\r\n                        let buffData=new BuffData();\r\n                        buffData.buff_value=[this.skill_data.getSkillValue1(1)];\r\n                        buffData.buff_id=BuffId.Elite68_NiuJiangJun_JiaSu;\r\n                        buffData.buff_type=BuffType.MoveSpeedUp;\r\n                        buffData.remain_time=this.skill_data.getSkillValue2(1);\r\n                        monsterTs.addBuff(buffData);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.skill_cold_down[0]=this.skill_data.getSkillColdDown(1);\r\n        super.playSpinAnimaton(\"Side_Skill\",false,data,()=>{\r\n            this.startIdle();\r\n            this.setEnemyState(Enemy_State.move);\r\n        })\r\n    }\r\n\r\n    update (dt) {\r\n        if((GameManager.getInstance().cur_game_state!=GameState.Game_Playing)||this.getIsDie())\r\n        {\r\n            return;\r\n        }\r\n        super.update(dt);\r\n        this.checkSkill(dt);\r\n    }\r\n\r\n    checkSkill(dt:number){\r\n        for(let i=0; i<this.skill_cold_down.length; i++){\r\n            let isCanSkill=false;\r\n            if(this.skill_cold_down[i]>0){\r\n                this.skill_cold_down[i]-=dt;\r\n                if(this.skill_cold_down[i]<=0){\r\n                    isCanSkill=true;\r\n                }\r\n            }else{\r\n                isCanSkill=true;\r\n            }\r\n            if(isCanSkill){\r\n                //加速buff\r\n                this.startSkill();\r\n            }\r\n        }\r\n    }\r\n    \r\n}\r\n"]}