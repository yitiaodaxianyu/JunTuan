{"version":3,"sources":["assets\\Scripts\\Store\\ProbabilityTipUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport ApkManager from \"../Ads/ApkManager\";\r\nimport GameManager from \"../GameManager\";\r\nimport { Follow_Type } from \"../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../multiLanguage/FollowManager\";\r\nimport TextLanguage from \"../multiLanguage/TextLanguage\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport MyTool from \"../Tools/MyTool\";\r\nimport UIComponent from \"../UI/UIComponent\";\r\nimport { UiAction } from \"../UI/UiInterface\";\r\nimport { DrawCardProbabilityManager } from \"./DrawCardProbability\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ProbabilityTipUi extends UIComponent {\r\n\r\n\r\n\r\n    jackpot_collect_id:number;\r\n    init(uiAc: UiAction): void {\r\n        super.init(uiAc);\r\n    }\r\n\r\n    initUi(){\r\n        this.refreshUi();\r\n        FollowManager.getInstance().followEvent(Follow_Type.记录点击招募概率弹窗的次数);\r\n    }\r\n\r\n    refreshUi(){\r\n        let data = DrawCardProbabilityManager.getInstance().getData();\r\n        let background = this.node.getChildByName(\"background\");\r\n        for(let i = 0;i<data.length;i++){\r\n            let s:string = \"\";\r\n            s = MyTool.numberFormat(data[i].PropbabilityNum * 100,2) + \"%\";\r\n            background.getChildByName(\"bg\" + (i+1)).getChildByName(\"rate\"+(i+1)).getComponent(cc.Label).string = s;\r\n            background.getChildByName(\"bg\" + (i+1)).getChildByName(\"rateLabel\"+(i+1)).getComponent(TextLanguage).setTextId(data[i].PropbabilityText);\r\n            \r\n            // background.getChildByName(\"bg\" + (i+1)).getChildByName(\"rate\"+(2*(i + 1) - 1)).getComponent(cc.Label).string = s;\r\n            // background.getChildByName(\"bg\" + (i+1)).getChildByName(\"rateLabel\"+(2*(i + 1) - 1)).getComponent(TextLanguage).setTextId(data[i].PropbabilityText);\r\n            // s = MyTool.numberFormat(data[(i*2)+1].PropbabilityNum,2) + \"%\";\r\n            // background.getChildByName(\"bg\" + ((i*2)+1)).getChildByName(\"rate\"+(2*(i + 1))).getComponent(cc.Label).string = s;\r\n            // console.log(i+1,\"rate\"+(2*((i*2) + 1)))\r\n            // background.getChildByName(\"bg\" + ((i*2)+1)).getChildByName(\"rateLabel\"+(2*(i + 1))).getComponent(TextLanguage).setTextId(data[i*2+1].PropbabilityText);\r\n            // console.log(i+1,\"rateLabel\"+(2*((i*2) + 1)))\r\n            // background.getChildByName(\"bg\" + (i+2)).getChildByName(\"rateLabel\"+((i + 2) * 2)).getComponent(TextLanguage).setTextId(data[i+1].PropbabilityText);\r\n        }\r\n    }\r\n\r\n    refreshWishingUi(){\r\n        // let jackpotCollectId:number = WishSpendManager.getInstance().getGetRewardID(this.jackpot_collect_id);\r\n        // let dropArray = JackpotCollectionManager.getInstance().getDrop_Array(jackpotCollectId);\r\n        // let background = this.node.getChildByName(\"background\");\r\n        // if(this.state == 1){//普通\r\n        //     background.getChildByName(\"Common_Window_Title\").getComponentInChildren(TextLanguage).setTextId(840012);\r\n        // }else{//高级\r\n        //     background.getChildByName(\"Common_Window_Title\").getComponentInChildren(TextLanguage).setTextId(840013);\r\n        // }\r\n        // for(let i = 0;i<Math.ceil((dropArray.length/2));i++){\r\n        //     let s:string = \"\";\r\n        //     let num = JackpotCollectionManager.getInstance().getRateByJackpotId(jackpotCollectId,dropArray[2*(i+1) - 2]);\r\n        //     num *= 100;\r\n        //     s = this.priceFormat(num,2) + \"%\";\r\n        //     background.getChildByName(\"bg\" + (i+1)).getChildByName(\"rate\"+(2*(i + 1) - 1)).getComponent(cc.Label).string = s;\r\n        //     if(i == 4)  break;\r\n        //     num = JackpotCollectionManager.getInstance().getRateByJackpotId(jackpotCollectId,dropArray[2*(i+1) - 1]);\r\n        //     num *= 100;\r\n        //     s = this.priceFormat(num,2) + \"%\";\r\n        //     background.getChildByName(\"bg\" + (i+1)).getChildByName(\"rate\"+((i + 1) * 2)).getComponent(cc.Label).string = s;\r\n        // }\r\n        \r\n        // for(let i = Math.ceil((dropArray.length/2));i < 5;i++){\r\n        //     background.getChildByName(\"bg\" + (i+1)).active = false;\r\n        // }\r\n    }\r\n\r\n    refreshTakeEggUi(){\r\n        // let jackpotCollectId:number = EggInformationManager.getInstance().getEggsReward(this.jackpot_collect_id);\r\n        // let dropArray = JackpotCollectionManager.getInstance().getDrop_Array(jackpotCollectId);\r\n        // let background = this.node.getChildByName(\"background\");\r\n\r\n        // if(this.state == 1){\r\n        //     background.getChildByName(\"Common_Window_Title\").getComponentInChildren(TextLanguage).setTextId(840032);\r\n        // }else{\r\n        //     background.getChildByName(\"Common_Window_Title\").getComponentInChildren(TextLanguage).setTextId(840033);\r\n        // }\r\n\r\n\r\n        // for(let i = 0;i<dropArray.length;i++){\r\n        //     let s:string = \"\";\r\n        //     let num = JackpotCollectionManager.getInstance().getRateByJackpotId(jackpotCollectId,dropArray[i]);\r\n        //     num *= 100;\r\n        //     s = this.priceFormat(num,2) + \"%\";\r\n        //     background.getChildByName(\"bg\" + (i+1)).getChildByName(\"rate\"+(2*(i + 1) - 1)).getComponent(cc.Label).string = s;\r\n        //     background.getChildByName(\"bg\" + (i+1)).getChildByName(\"rate\"+((i + 1) * 2)).active = false;\r\n        //     background.getChildByName(\"bg\" + (i+1)).getChildByName(\"rateLabel\"+((i + 1) * 2)).active = false;\r\n        // }\r\n\r\n        // background.getComponent(cc.Layout).spacingY = 25;\r\n        \r\n        // for(let i = dropArray.length;i < 5;i++){\r\n        //     background.getChildByName(\"bg\" + (i+1)).active = false;\r\n        // }\r\n    }\r\n\r\n    clickBtnClose()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.destroySelf();\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n        // EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_SignIn);\r\n    }\r\n\r\n    priceFormat(num:number,n:number){\r\n        if(!isNaN(num)){\r\n            let temp = num.toFixed(n);\r\n            if(temp.indexOf('.') != -1){\r\n                let isZero = false;\r\n                for(let i = temp.indexOf('.') + 1;i <= temp.indexOf('.')+n;i++){\r\n                    if(i<temp.length){\r\n                        if(temp[i] != '0'){\r\n                            isZero = true\r\n                        }\r\n                    }\r\n                }\r\n                if(isZero){\r\n                    return temp\r\n                }else{\r\n                    return Number(temp)\r\n                }\r\n            }else{\r\n                return temp\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n"]}