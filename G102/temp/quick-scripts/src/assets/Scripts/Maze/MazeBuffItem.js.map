{"version":3,"sources":["assets\\Scripts\\Maze\\MazeBuffItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameManager from \"../GameManager\";\r\nimport LanguageManager from \"../multiLanguage/LanguageManager\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport { RogueBuffManager } from \"./Data/RogueBuff\";\r\nimport MazeUi from \"./MazeUi\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MazeBuffItem extends cc.Component {\r\n\r\n    /**buff id */\r\n    buff_id:number=1001;\r\n\r\n    init(id:number){\r\n        this.buff_id=id;\r\n        this.refreshBuff();\r\n    }\r\n\r\n    refreshBuff(){\r\n        let RBM=RogueBuffManager.getInstance()\r\n        let LM=LanguageManager.getInstance();\r\n        let quality=RBM.getRogueBuff_Quality(this.buff_id);\r\n        //buff的数据\r\n        let jsonData=RBM.getJsonRogueBuff(this.buff_id);\r\n        //名称\r\n        let titleLabel=this.node.getChildByName('titleLabel').getComponent(cc.Label);\r\n        titleLabel.string=LM.getStrByTextId(jsonData.RogueBuff_Name);\r\n        titleLabel.node.color=this.getFontColorByQuality(quality);\r\n        //内容\r\n        let detailLabel=this.node.getChildByName('detailLabel').getComponent(cc.Label);\r\n        detailLabel.string=this.getValueStringByString(LM.getStrByTextId(jsonData.RogueBuffText_ID),jsonData.RogueBuff1_Value,jsonData.RogueBuff2_Value,jsonData.RogueBuff3_Value);\r\n        //品质图标\r\n        let qualityIcon=this.node.getChildByName('quality').getComponent(cc.Sprite);\r\n        qualityIcon.spriteFrame=MazeUi.getInstance().getSpByName('Maze_Quality_'+(quality-1))\r\n        //品质文字\r\n        let qualityLabel=this.node.getChildByName('qualityLabel').getComponent(cc.Label);\r\n        qualityLabel.string=this.getStringByQuality(quality);\r\n        qualityLabel.node.color=this.getFontColorByQuality(quality);\r\n        //内容详情\r\n        let detailLabel2=this.node.getChildByName('detailLabel').getComponent(cc.Label);\r\n        detailLabel2.string=this.getValueStringByString(LM.getStrByTextId(jsonData.RogueBuffText_ID),jsonData.RogueBuff1_Value,jsonData.RogueBuff2_Value,jsonData.RogueBuff3_Value);\r\n        //类型图标\r\n        let iconSp=this.node.getChildByName('icon').getComponent(cc.Sprite);\r\n        iconSp.spriteFrame=MazeUi.getInstance().getSpByName('Maze_Buff_Icon_'+jsonData.RogueBuff_Type);\r\n    }\r\n\r\n    getValueStringByString(str:string,value1:number,value2:number,value3:number):string{\r\n        if(str.includes(\"~x%\")){\r\n            value1*=100;            \r\n        }\r\n        if(str.includes(\"~y%\")){\r\n            value2*=100;\r\n        }\r\n        if(str.includes(\"~z%\")){\r\n            value3*=100;\r\n        }\r\n        let newStr=str.replace(\"~x\",value1.toFixed(0));        \r\n        newStr=newStr.replace(\"~y\",value2.toFixed(0));\r\n        newStr=newStr.replace(\"~z\",value2.toFixed(0));\r\n        return newStr;\r\n    }\r\n\r\n    getFontColorByQuality(quality:number):cc.Color{\r\n        let color=cc.Color.BLUE;\r\n        switch(quality){\r\n            case 1:{\r\n                color=cc.color(105,183,255);\r\n            }break;\r\n            case 2:{\r\n                color=cc.color(226,126,255);\r\n            }break;\r\n            case 3:{\r\n                color=cc.color(255,193,74);\r\n            }break;\r\n        }\r\n        return color;\r\n    }\r\n\r\n    getOutLineColorByQuality(quality:number):cc.Color{\r\n        let color=cc.Color.BLUE;\r\n        switch(quality){\r\n            case 1:{\r\n                color=cc.color(37,49,71);\r\n            }break;\r\n            case 2:{\r\n                color=cc.color(37,49,71);\r\n            }break;\r\n            case 3:{\r\n                color=cc.color(105,183,255);\r\n            }break;\r\n        }\r\n        return color;\r\n    }\r\n\r\n    getStringByQuality(quality:number):string{\r\n        return LanguageManager.getInstance().getStrByTextId(110005+quality*2);\r\n    }\r\n\r\n    onClick(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_ChoseBuff);\r\n        \r\n        UIManager.getInstance().showMazeBuffInfo(this.buff_id);\r\n    }\r\n}\r\n"]}