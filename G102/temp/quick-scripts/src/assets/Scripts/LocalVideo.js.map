{"version":3,"sources":["assets\\Scripts\\LocalVideo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameManager from \"./GameManager\";\r\nimport { SoundIndex } from \"./Sound/AudioConstants\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LocalVideo extends cc.Component {\r\n\r\n   \r\n    remain_time:number=10;\r\n    yes_callback:Function=null;\r\n    no_callback:Function=null;\r\n    interval:any=null;\r\n\r\n    init (yesCallback:Function,noCallback:Function) {\r\n        this.yes_callback=yesCallback;\r\n        this.no_callback=noCallback;\r\n        this.remain_time=11+Math.floor(Math.random()*6);\r\n        this.showRemain();        \r\n        this.interval=setInterval(()=>{\r\n            this.showRemain();\r\n        },1000);\r\n        let bg=this.node.getChildByName('bg');\r\n        let touchNum=0;\r\n        bg.on(cc.Node.EventType.TOUCH_START,()=>{\r\n            touchNum++;\r\n            if(touchNum>=5)\r\n            {\r\n                this.clickBtnNo();\r\n            }\r\n        },this);\r\n    }\r\n\r\n    showRemain()\r\n    {\r\n        this.remain_time--;\r\n        let remainLabel=this.node.getChildByName('remainLabel').getComponent(cc.Label);\r\n        remainLabel.string=''+this.remain_time;\r\n        let btnYes=this.node.getChildByName('btnYes');\r\n        let text=btnYes.getChildByName('text').getComponent(cc.Label);        \r\n        if(this.remain_time>0)\r\n        {\r\n            text.string='取消';\r\n            // setInterval(()=>{\r\n            //     this.showRemain();\r\n            // },1000);\r\n        }else\r\n        {\r\n            text.string='领取奖励';\r\n            remainLabel.string='观看完毕';\r\n            this.node.getChildByName('hintLabel').active=false;\r\n            btnYes.x=-270+Math.random()*540;\r\n            btnYes.y=-114+Math.random()*228;\r\n            clearInterval(this.interval);\r\n            // let btnNo=this.node.getChildByName('btnNo');\r\n            // btnNo.active=true;\r\n            // btnNo.x=-270+Math.random()*540;\r\n            // btnNo.y=-114+Math.random()*228;\r\n        }\r\n    }\r\n\r\n    clickBtnNo()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.node.removeFromParent();\r\n    }\r\n\r\n    clickBtnYes()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);        \r\n        if(this.remain_time>0)\r\n        {\r\n            if(this.no_callback)\r\n            {\r\n                this.no_callback();\r\n            }\r\n        }else\r\n        {\r\n            if(this.yes_callback)\r\n            {\r\n                this.yes_callback();\r\n            }\r\n        }\r\n        this.node.removeFromParent();\r\n    }\r\n\r\n\r\n    // update (dt) {}\r\n}\r\n"]}