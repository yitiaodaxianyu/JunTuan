{"version":3,"sources":["assets\\Scripts\\GuaJi\\ChallengeRoundPop.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { GameMode } from \"../Constants\";\r\nimport GameManager from \"../GameManager\";\r\nimport { FirstCompleteRewardManager } from \"../Level/FirstCompleteReward\";\r\nimport { LevelManager } from \"../Level/LevelManager\";\r\nimport { MissionLevelManager } from \"../Level/MissionLevel\";\r\nimport LanguageManager from \"../multiLanguage/LanguageManager\";\r\nimport TextLanguage from \"../multiLanguage/TextLanguage\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport TutorailsManager from \"../Tutorials/TutorailsManager\";\r\nimport MainUi from \"../UI/home/MainUi\";\r\nimport ToPlayMainUi from \"../UI/home/ToPlayMainUi\";\r\nimport { UIPath, UILayerLevel } from \"../UI/UIConfig\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport MapManager from \"./MapManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ChallengeRoundPop extends cc.Component {\r\n\r\n    // @property(cc.Label)\r\n    // label: cc.Label = null;\r\n\r\n    // @property\r\n    // text: string = 'hello';\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n    level:number=0//关卡节点代表的是哪个关卡   默认1\r\n    @property(cc.Node)\r\n    prop: cc.Node = null;\r\n    @property(cc.Node)\r\n    Common_Btn_0:cc.Node = null;//开始按钮\r\n    @property(cc.Node)\r\n    Btn_Close:cc.Node = null;//关闭按钮\r\n    \r\n    @property(cc.Node)\r\n    lqu:cc.Node[] = [];//已领取文字\r\n    @property(cc.Node)\r\n    Mask:cc.Node[] = [];//黑布\r\n\r\n    @property(cc.Node)\r\n    leveltxt:cc.Node = null;//关卡\r\n\r\n    @property(cc.Node)\r\n    Main_Icon_Boss:cc.Node = null;//boss头像\r\n\r\n    @property(cc.Node)\r\n    bg:cc.Node = null;//背景\r\n    \r\n    start () {\r\n        this.Btn_Close.on(cc.Node.EventType.TOUCH_END,this.onBtn_Close,this);\r\n        this.bg.on(cc.Node.EventType.TOUCH_END,this.onBtn_Close,this);\r\n        this.Common_Btn_0.on(cc.Node.EventType.TOUCH_END,this.clickBtnStart,this);\r\n    }\r\n    init(level){\r\n        this.level=level\r\n        this.leveltxt.getComponent(cc.Label).string=\"\"+MissionLevelManager.getInstance().getLevelName(level)\r\n        let myCurrentlevel=LevelManager.getInstance().finish_level+1;//当前最大关卡\r\n        for (let index = 0; index < this.prop.children.length; index++) {\r\n            this.prop.children[index].destroy()\r\n        }\r\n        this.node.active=true\r\n        let Starnumber=0;\r\n        if(level<myCurrentlevel){\r\n            for (let LevelStarindex = 1; LevelStarindex <4; LevelStarindex++) {\r\n                if(LevelManager.getInstance().getALevelStar(level,LevelStarindex)){\r\n                    Starnumber++\r\n                }\r\n            }\r\n        }\r\n        for (let Maskindex = 0; Maskindex < this.Mask.length; Maskindex++) {\r\n            if(Maskindex<Starnumber){\r\n                this.Mask[Maskindex].active=true\r\n                this.lqu[Maskindex].active=true\r\n                \r\n            }else{\r\n                this.Mask[Maskindex].active=false\r\n                this.lqu[Maskindex].active=false\r\n            } \r\n        }\r\n        for (let Starindex = 1; Starindex <= 3; Starindex++) {\r\n            let levelId=FirstCompleteRewardManager.getId(level,Starindex);//默认3个都完成  \r\n\r\n            let RewardData=FirstCompleteRewardManager.getInstance().getFirstRewardArr(levelId);\r\n            for (let level3 = 0; level3 < RewardData.length; level3++) {\r\n                let rewardData=RewardData[level3];\r\n                //可以获得奖品\r\n                // this.scheduleOnce(()=>{\r\n                    // console.log(\"_______\",rewardData.reward_id,rewardData.reward_num)\r\n                    let item=PropManager.getInstance().createPropItem(rewardData.reward_id,rewardData.reward_num);\r\n                    item.scale=0.82;\r\n                    item.parent=this.prop;\r\n                    item.x=-67+level3*90;\r\n                    item.y=190-Starindex*115+115;//第三颗星在最下面\r\n\r\n                    // item.x=-67+level3*90;\r\n                    // item.y=-40+Starindex*115-115;//第三颗星在最上面\r\n                // },level3*0.1);\r\n                // PropManager.getInstance().changePropNum(rewardData.reward_id,rewardData.reward_num);\r\n            }\r\n        }\r\n        if(level>myCurrentlevel){\r\n            this.Common_Btn_0.getChildByName(\"kszd\").getComponent(TextLanguage).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"));\r\n            this.Common_Btn_0.getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"));\r\n        }else{\r\n            this.Common_Btn_0.getChildByName(\"kszd\").getComponent(TextLanguage).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-sprite\"));\r\n            this.Common_Btn_0.getComponent(cc.Sprite).setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-sprite\"));\r\n        }\r\n\r\n        if(MissionLevelManager.getInstance().getLevelTypes(level)==3){\r\n            this.Main_Icon_Boss.active=true\r\n        }else{\r\n            this.Main_Icon_Boss.active=false\r\n        }\r\n    }\r\n    clickBtnStart()//开始游戏\r\n    {\r\n\r\n        // @ts-ignore\r\n        if(this.Common_Btn_0.getComponent(cc.Sprite).getMaterial(0)._name== 'builtin-2d-gray-sprite (Instance)'){\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(100100))//该关卡尚未解锁\r\n            return\r\n        }\r\n        this.onBtn_Close()\r\n        if(!TutorailsManager.getInstance().is_finish_game)\r\n        {\r\n            // console.log(\"+6\")\r\n            LevelManager.getInstance().start_level=MapManager.Currentlevel=LevelManager.getInstance().finish_level+1;\r\n            cc.find(\"Canvas/main_ui\").getComponent(MainUi).clickBtnStart()\r\n            return\r\n        }\r\n        GameManager.getInstance().cur_game_mode=GameMode.Main;\r\n        MapManager.Currentlevel=this.level;\r\n        UIManager.getInstance().showUiDialog(UIPath.ToPlay,UILayerLevel.One,{onCompleted:(uiNode)=> {\r\n            uiNode.getComponent(ToPlayMainUi).init({onClose:()=>{\r\n                // this.cur_selected_level=LevelManager.getInstance().start_level;                    \r\n                GameManager.getInstance().refreshZhanliShow();\r\n            }});\r\n        },})\r\n    }\r\n    onBtn_Close(){\r\n        for (let index = 0; index < this.prop.children.length; index++) {\r\n            this.prop.children[index].destroy()\r\n        }\r\n        this.node.active=false\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}