{"version":3,"sources":["assets\\Scripts\\copy\\endlesschallenges\\purchasesnumbe.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport ApkManager from \"../../Ads/ApkManager\";\r\nimport CoinPop from \"../../CoinPop\";\r\nimport { VIDEO_TYPE } from \"../../Constants\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { Follow_Type } from \"../../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../../multiLanguage/FollowManager\";\r\nimport TextLanguage from \"../../multiLanguage/TextLanguage\";\r\nimport { PropId } from \"../../Prop/PropConfig\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport { StorageKey } from \"../../Storage/StorageConfig\";\r\nimport { TheStorageManager } from \"../../Storage/StorageManager\";\r\nimport UIComponent from \"../../UI/UIComponent\";\r\nimport { UIPath, UILayerLevel } from \"../../UI/UIConfig\";\r\nimport { UIManager } from \"../../UI/UIManager\";\r\nimport { BossWeeklyRewardManager } from \"./BossWeeklyReward\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class purchasesnumbe extends UIComponent {    \r\n    @property(cc.Node)\r\n    num: cc.Node = null\r\n    mynum:number[]=[50,200,300]//[50,100,150]\r\n    type: number = 0//2:无尽挑战   3：boss挑战\r\n    \r\n    initUi(type) {\r\n        let buynum\r\n        this.type=type\r\n        if(this.type==2){\r\n            buynum = TheStorageManager.getInstance().getNumber(StorageKey.BuyUnlimitedChallengeTimes,3);\r\n        }else if(this.type==3){\r\n            buynum = TheStorageManager.getInstance().getNumber(StorageKey.BuyBossChallengeTimes,3);\r\n        }else if(this.type==4){\r\n            buynum = TheStorageManager.getInstance().getNumber(StorageKey.BuyVoidCrackChallengeTimes,3);\r\n        }\r\n        this.num.getComponent(cc.Label).string=\"\"+this.mynum[3-buynum]\r\n    }\r\n    clickBtnBuy(){//钻石购买\r\n        let buynum\r\n        if(this.type==2){\r\n            buynum = TheStorageManager.getInstance().getNumber(StorageKey.BuyUnlimitedChallengeTimes,3);\r\n        }else if(this.type==3){\r\n            buynum = TheStorageManager.getInstance().getNumber(StorageKey.BuyBossChallengeTimes,3);\r\n        }\r\n        else if(this.type==4){\r\n            buynum = TheStorageManager.getInstance().getNumber(StorageKey.BuyVoidCrackChallengeTimes,3);\r\n        }\r\n        let gem=PropManager.getInstance().getPropNum(PropId.Gem);\r\n\r\n\r\n        if(gem>=this.mynum[3-buynum]){\r\n            //可以购买\r\n            PropManager.getInstance().changePropNum(PropId.Gem,-this.mynum[3-buynum]);\r\n            buynum--\r\n            if(this.type==2){\r\n                FollowManager.getInstance().followEvent(Follow_Type.无尽挑战挑战次数购买数);\r\n                FollowManager.getInstance().followEvent(Follow_Type.无尽挑战_挑战次数购买数_每日第x次购买+(3-buynum));\r\n                TheStorageManager.getInstance().setItem(StorageKey.BuyUnlimitedChallengeTimes,buynum);\r\n                let num=TheStorageManager.getInstance().getNumber(StorageKey.UnlimitedChallengeTimes,0);\r\n                num++\r\n                TheStorageManager.getInstance().setItem(StorageKey.UnlimitedChallengeTimes,num);\r\n            }else if(this.type==3){\r\n                FollowManager.getInstance().followEvent(Follow_Type.BOSS挑战挑战次数购买数);\r\n                FollowManager.getInstance().followEvent(Follow_Type.BOSS挑战_挑战次数购买数_每日第x次购买+(3-buynum));\r\n                TheStorageManager.getInstance().setItem(StorageKey.BuyBossChallengeTimes,buynum);\r\n                let num=TheStorageManager.getInstance().getNumber(StorageKey.BossChallengeTimes,0);\r\n                num++\r\n                TheStorageManager.getInstance().setItem(StorageKey.BossChallengeTimes,num);\r\n            }\r\n            else if(this.type==4){\r\n                FollowManager.getInstance().followEvent(Follow_Type.虚空裂缝挑战次数购买数);\r\n                FollowManager.getInstance().followEvent(Follow_Type.虚空裂缝_挑战次数购买数_每日第x次购买+(3-buynum));\r\n                TheStorageManager.getInstance().setItem(StorageKey.BuyVoidCrackChallengeTimes,buynum);\r\n                let num=TheStorageManager.getInstance().getNumber(StorageKey.VoidCrackChallengeTimes,0);\r\n                num++\r\n                TheStorageManager.getInstance().setItem(StorageKey.VoidCrackChallengeTimes,num);\r\n            }\r\n            this.clickBtnClose()\r\n        }else{\r\n            //钱不够\r\n            UIManager.getInstance().showUiDialog(UIPath.CoinPop,UILayerLevel.Three,{onCompleted:(uiNode)=> {\r\n                uiNode.getComponent(CoinPop).initUi(PropId.Gem)\r\n            },});\r\n        }\r\n    }\r\n    clickBtnBuyAd(){//广告购买\r\n        ApkManager.getInstance().showVideo(((isTrue)=>{\r\n            if(isTrue){\r\n                let buynum\r\n                if(this.type==2){\r\n                    buynum = TheStorageManager.getInstance().getNumber(StorageKey.BuyUnlimitedChallengeTimes,3);\r\n                }else if(this.type==3){\r\n                    buynum = TheStorageManager.getInstance().getNumber(StorageKey.BuyBossChallengeTimes,3);\r\n                }\r\n                else if(this.type==4){\r\n                    buynum = TheStorageManager.getInstance().getNumber(StorageKey.BuyVoidCrackChallengeTimes,3);\r\n                }\r\n                //可以购买\r\n                PropManager.getInstance().changePropNum(PropId.Gem,-this.mynum[3-buynum]);\r\n                buynum--\r\n                if(this.type==2){\r\n                    FollowManager.getInstance().followEvent(Follow_Type.无尽挑战挑战次数购买数);\r\n                    FollowManager.getInstance().followEvent(Follow_Type.无尽挑战_挑战次数购买数_每日第x次购买+(3-buynum));\r\n                    TheStorageManager.getInstance().setItem(StorageKey.BuyUnlimitedChallengeTimes,buynum);\r\n                    let num=TheStorageManager.getInstance().getNumber(StorageKey.UnlimitedChallengeTimes,0);\r\n                    num++\r\n                    TheStorageManager.getInstance().setItem(StorageKey.UnlimitedChallengeTimes,num);\r\n                }else if(this.type==3){\r\n                    FollowManager.getInstance().followEvent(Follow_Type.BOSS挑战挑战次数购买数);\r\n                    FollowManager.getInstance().followEvent(Follow_Type.BOSS挑战_挑战次数购买数_每日第x次购买+(3-buynum));\r\n                    TheStorageManager.getInstance().setItem(StorageKey.BuyBossChallengeTimes,buynum);\r\n                    let num=TheStorageManager.getInstance().getNumber(StorageKey.BossChallengeTimes,0);\r\n                    num++\r\n                    TheStorageManager.getInstance().setItem(StorageKey.BossChallengeTimes,num);\r\n                }\r\n                else if(this.type==4){\r\n                    FollowManager.getInstance().followEvent(Follow_Type.虚空裂缝挑战次数购买数);\r\n                    FollowManager.getInstance().followEvent(Follow_Type.虚空裂缝_挑战次数购买数_每日第x次购买+(3-buynum));\r\n                    TheStorageManager.getInstance().setItem(StorageKey.BuyVoidCrackChallengeTimes,buynum);\r\n                    let num=TheStorageManager.getInstance().getNumber(StorageKey.VoidCrackChallengeTimes,0);\r\n                    num++\r\n                    TheStorageManager.getInstance().setItem(StorageKey.VoidCrackChallengeTimes,num);\r\n                }\r\n                this.clickBtnClose()\r\n            }\r\n        }),VIDEO_TYPE.Equip)\r\n    }\r\n    clickBtnClose()//关闭\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.onClose();\r\n    }\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    // start () {\r\n\r\n    // }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}