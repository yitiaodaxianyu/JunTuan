{"version":3,"sources":["assets\\Scripts\\Game\\Ui\\RoguelikeTip.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { GameState } from \"../../Constants\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { HeroManager } from \"../../Hero/Data/HeroManager\";\r\nimport { Hero_Type } from \"../../Hero/Game/HeroConfig\";\r\nimport HeroItem from \"../../Hero/Ui/HeroItem\";\r\nimport UIComponent from \"../../UI/UIComponent\";\r\nimport { UiAction } from \"../../UI/UiInterface\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class RoguelikeTip extends UIComponent {\r\n\r\n\r\n\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n    tag:number=0;//选择toggle的选择数\r\n    @property(cc.Node)\r\n    ToggleContainer:cc.Node=null\r\n\r\n    @property(cc.Node)\r\n    tipLabel:cc.Node=null\r\n\r\n    @property(cc.Node)\r\n    content:cc.Node = null;//英雄选择父节点\r\n\r\n    @property(cc.Prefab)\r\n    hero_item:cc.Prefab = null;//英雄头像的预制体\r\n\r\n    greybuttonjudgment: number=0;\r\n    start () {\r\n       \r\n       \r\n    }\r\n    onEnable(){\r\n        this.tag=0\r\n        this.ToggleContainer.children[0].getComponent(cc.Toggle).isChecked=true;\r\n        this.onToggleChange();\r\n        console.log(\"进入RogueLike\");\r\n        this.Refreshheroitmestatus();\r\n    }\r\n    clickBtnToggle(even,i){//单选按钮的选择\r\n        // console.log(\"+++++++\",even,i)\r\n        this.tag=i;\r\n        this.onToggleChange();\r\n      \r\n    }\r\n    \r\n    private Refreshheroitmestatus():void{\r\n        //已解锁的英雄\r\n        let HeroList=HeroManager.getInstance().getHeroList()//数量   英雄id类型 英雄等级 英雄品质  英雄星星阶段\r\n      \r\n        let heroBasicdataarr=[]//最高战力数组\r\n        let HeroListarr=HeroList//已解锁的英雄\r\n        for (let heroindex = 0; heroindex < HeroList.length; heroindex++) {\r\n            let hero = cc.instantiate(this.hero_item);\r\n            hero.name=\"\"+heroindex\r\n            hero.setScale(0.75,0.75)\r\n            this.content.addChild(hero);\r\n          \r\n            \r\n            hero.on(cc.Node.EventType.TOUCH_END, this.onHeroItemTouchEnd, this);\r\n            // hero.on(cc.Node.EventType.TOUCH_CANCEL, this.onHeroItemTouchCancel, this);\r\n        }\r\n        this.content.getComponent(cc.Layout).updateLayout();\r\n         //刷新英雄itme\r\n        for (let heroBasicdataindex = 0; heroBasicdataindex < HeroList.length; heroBasicdataindex++) {\r\n            let heroBasicdata=HeroManager.getInstance().getHeroData(HeroList[heroBasicdataindex].hero_type)//英雄的基础数据   传入英雄id类型  防御力  生命值  命中值 \r\n            heroBasicdataarr.push(heroBasicdata.total_attack)\r\n        }\r\n\r\n         //排列英雄战力\r\n         let cun\r\n         let herocun\r\n         for (let index = 0; index < heroBasicdataarr.length; index++) {\r\n             for (let paixvindex = 0; paixvindex < heroBasicdataarr.length-1; paixvindex++) {\r\n                 if(heroBasicdataarr[paixvindex+1]>heroBasicdataarr[paixvindex]){\r\n                     cun=heroBasicdataarr[paixvindex]\r\n                     heroBasicdataarr[paixvindex]=heroBasicdataarr[paixvindex+1]\r\n                     heroBasicdataarr[paixvindex+1]=cun\r\n \r\n                     herocun=HeroListarr[paixvindex]\r\n                     HeroListarr[paixvindex]=HeroListarr[paixvindex+1]\r\n                     HeroListarr[paixvindex+1]=herocun\r\n                 }\r\n             }\r\n         }\r\n         let teamList=GameManager.getInstance().cur_team_list;\r\n\r\n               //刷新英雄itme状态\r\n        //血量\r\n        let jdtnumber=0\r\n        for (let shuaxingindex = 0; shuaxingindex < HeroListarr.length; shuaxingindex++) {\r\n            this.content.children[shuaxingindex].getComponent(HeroItem).RefreshHeroesItem(HeroListarr[shuaxingindex].hero_type)\r\n            for (let teamListindex = 0; teamListindex < teamList.length; teamListindex++) {\r\n                if(teamList[teamListindex]==HeroListarr[shuaxingindex].hero_type){\r\n                    this.content.children[shuaxingindex].getChildByName(\"shangzheng\").active=true\r\n                }\r\n            }\r\n        }\r\n\r\n      \r\n    }\r\n    onHeroItemTouchEnd(e:cc.Event.EventTouch) {\r\n        let touchTeam=e.getCurrentTarget();\r\n\r\n       \r\n        if(touchTeam.getChildByName(\"shangzheng\").active==false){\r\n            //上阵该英雄\r\n            let teamList=HeroManager.getInstance().getTeamList(GameManager.getInstance().cur_game_mode);\r\n            if(teamList[1]==-1||teamList[1]==Hero_Type.NULL){\r\n                teamList[1]=touchTeam.getComponent(HeroItem).hero_type\r\n                GameManager.getInstance().addHero(touchTeam.getComponent(HeroItem).hero_type,1);\r\n                this.clickBtnClose();\r\n                return;\r\n            }\r\n\r\n            if(teamList[3]==-1||teamList[3]==Hero_Type.NULL){\r\n                teamList[3]=touchTeam.getComponent(HeroItem).hero_type\r\n                GameManager.getInstance().addHero(touchTeam.getComponent(HeroItem).hero_type,3);\r\n                this.clickBtnClose();\r\n                return;\r\n            }\r\n\r\n            if(teamList[0]==-1||teamList[0]==Hero_Type.NULL){\r\n                teamList[0]=touchTeam.getComponent(HeroItem).hero_type\r\n                GameManager.getInstance().addHero(touchTeam.getComponent(HeroItem).hero_type,0);\r\n                this.clickBtnClose();\r\n                return;\r\n            }\r\n\r\n            if(teamList[4]==-1||teamList[4]==Hero_Type.NULL){\r\n                teamList[4]=touchTeam.getComponent(HeroItem).hero_type\r\n                GameManager.getInstance().addHero(touchTeam.getComponent(HeroItem).hero_type,4);\r\n                this.clickBtnClose();\r\n                return;\r\n            }\r\n            \r\n            \r\n            \r\n        }else{\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(100091))\r\n        }\r\n    }\r\n    private onToggleChange():void{\r\n        if(this.tag==0){\r\n            this.tipLabel.getComponent(cc.Label).string=\"选择一个英雄加入你的队伍。\";\r\n        }else if(this.tag==1){\r\n            this.tipLabel.getComponent(cc.Label).string=\"选择一个技能加强你的英雄。\";\r\n        }else if(this.tag==2){\r\n            this.tipLabel.getComponent(cc.Label).string=\"选择一个技能用于加强你的战车。\";\r\n        }\r\n    }\r\n    clickBtnClose(){\r\n        console.log(\"离开roguelike\");\r\n        \r\n        cc.director.resume();\r\n        GameManager.getInstance().cur_game_state=GameState.Game_Playing;\r\n        GameManager.getInstance().loadLevel(); \r\n        super.onClose();\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}