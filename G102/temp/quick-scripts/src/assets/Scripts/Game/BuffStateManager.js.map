{"version":3,"sources":["assets\\Scripts\\Game\\BuffStateManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import MapNodePool from \"./MapNodePool\";\r\nimport BuffState from \"../Hero/Game/BuffState\";\r\nimport { Hero_Type, BuffStateType, BuffId } from \"../Hero/Game/HeroConfig\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BuffStateManager extends MapNodePool {\r\n\r\n    @property(cc.SpriteAtlas)\r\n    ui_atlas:cc.SpriteAtlas=null;\r\n\r\n    private static _instance: BuffStateManager = null;\r\n\r\n\r\n    public static getInstance():BuffStateManager\r\n    {\r\n        return this._instance;\r\n    }\r\n\r\n    getSpByName(name:string):cc.SpriteFrame{\r\n        return this.ui_atlas.getSpriteFrame(name);\r\n    }\r\n\r\n    onLoad () {\r\n        BuffStateManager._instance=this;\r\n    }\r\n\r\n    protected onDestroy(): void {\r\n        super.onDestroy();\r\n        BuffStateManager._instance=null;        \r\n    }\r\n\r\n    public createBuffRoot(pos:cc.Vec2,heroType:Hero_Type){\r\n        let node=new cc.Node(''+heroType);\r\n        let layout=node.addComponent(cc.Layout);\r\n        layout.type=cc.Layout.Type.HORIZONTAL;\r\n        layout.resizeMode=cc.Layout.ResizeMode.CONTAINER;\r\n        node.setPosition(pos);\r\n        this.node.addChild(node);\r\n    }\r\n\r\n    /**根据id创建一个特效*/\r\n    public createBuffState(type:BuffStateType,heroType:Hero_Type):BuffState\r\n    {\r\n        let node=new cc.Node(''+type);\r\n        let sp=node.addComponent(cc.Sprite);\r\n        sp.spriteFrame=this.getSpByName(\"Buff_Icon_\"+type);\r\n        //根据英雄找到对应的root位置\r\n        let root=this.node.getChildByName(''+heroType);\r\n        root.addChild(node);\r\n        let buffTS=node.addComponent(BuffState);\r\n        return buffTS;\r\n    }\r\n\r\n    /**根据id创建一个特效*/\r\n    public createDeBuffState(type:BuffStateType,heroType:Hero_Type):BuffState\r\n    {\r\n        let node=new cc.Node(''+type);\r\n        let sp=node.addComponent(cc.Sprite);\r\n        sp.spriteFrame=this.getSpByName(\"Debuff_Icon_\"+type);\r\n        //根据英雄找到对应的root位置\r\n        let root=this.node.getChildByName(''+heroType);\r\n        root.addChild(node);\r\n        let buffTS=node.addComponent(BuffState);\r\n        return buffTS;\r\n    }\r\n\r\n    getBuffType(buffId:BuffId):BuffStateType[]{\r\n        let type=[];\r\n        switch(buffId){\r\n            case BuffId.Hero_MeiMo_GongSu:\r\n            case BuffId.Pet3_JiaSu:\r\n            case BuffId.Hero_ZhenDe_Gongsu:\r\n            case BuffId.Hero_KuangZhanShi_DaZhao:\r\n            case BuffId.Hero_ChangMaoShow_GongSu:{\r\n                type.push(BuffStateType.AttackSpeed);\r\n            }break;\r\n            case BuffId.Hero_ZhenDe_BaoJiMingZhongLv:{\r\n                type.push(BuffStateType.CritRate);\r\n                type.push(BuffStateType.HitRate);\r\n            }break;\r\n        }\r\n        return type;            \r\n    }\r\n\r\n    getDeBuffType(buffId:BuffId):BuffStateType[]{\r\n        let type=[];\r\n        switch(buffId){\r\n            case BuffId.Boss6_Skill_2_jiangongsu:\r\n            case BuffId.Boss3_JIAN_GongSu:{\r\n                type.push(BuffStateType.AttackSpeed);\r\n            }break;   \r\n            case BuffId.Boss8_Skill_2_attack:{\r\n                type.push(BuffStateType.Attack);\r\n            }break;      \r\n        }\r\n        return type;            \r\n    }\r\n}\r\n"]}