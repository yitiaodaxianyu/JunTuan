{"version":3,"sources":["assets\\Scripts\\UI\\home\\SignInBuyUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { HttpManager, AccessName } from \"../.././NetWork/HttpManager\";\r\nimport ApkManager from \"../../Ads/ApkManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { SignInManager, SignInType } from \"../../JsonData/SignIn\";\r\nimport { Follow_Type } from \"../../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../../multiLanguage/FollowManager\";\r\nimport { PayManager } from \"../../Payment/PayManager\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport { StorageKey } from \"../../Storage/StorageConfig\";\r\nimport { TheStorageManager } from \"../../Storage/StorageManager\";\r\nimport UserData from \"../../UserData\";\r\nimport UIComponent from \"../UIComponent\";\r\nimport { UiAction } from \"../UiInterface\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nconst googldId = \"c601\";\r\n\r\n@ccclass\r\nexport default class SignInBuyUi extends UIComponent {\r\n\r\n    init(uiAc: UiAction): void {\r\n        super.init(uiAc);\r\n    }\r\n\r\n    iniData(){\r\n        this.refreshUi();\r\n    }\r\n\r\n    refreshUi(){\r\n        let index = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum,0)\r\n        let data = SignInManager.getInstance().getDataBySignInType(SignInType.SavenDay);\r\n        let content = this.node.getChildByName(\"scroll\").getComponent(cc.ScrollView).content;\r\n        content.removeAllChildren();\r\n        let payInfo = PayManager.getInstance().getPayInfo(googldId);\r\n        let rewardList = new Map<number,number>();\r\n        for(let i = 0; i < data.length;i++){\r\n            // let item:cc.Node = null;\r\n            if(i<index){\r\n                // item = PropManager.getInstance().createPropItem(data[i].Item,data[i].Num * 4);\r\n                if(rewardList.has(data[i].Item)){\r\n                    let num = rewardList.get(data[i].Item);\r\n                    num += data[i].Num * 4;\r\n                    rewardList.set(data[i].Item,num);\r\n                }else{\r\n                    rewardList.set(data[i].Item,data[i].Num * 4);\r\n                }\r\n            }else{\r\n                if(rewardList.has(data[i].Item)){\r\n                    let num = rewardList.get(data[i].Item);\r\n                    num += data[i].Num * 5;\r\n                    rewardList.set(data[i].Item,num);\r\n                }else{\r\n                    rewardList.set(data[i].Item,data[i].Num * 5);\r\n                }\r\n            }\r\n        }\r\n        rewardList.forEach((num,id)=>{\r\n            let item = PropManager.getInstance().createPropItem(id,num);\r\n            content.addChild(item);\r\n        })\r\n        this.node.getChildByName(\"sure\").getComponentInChildren(cc.Label).string = payInfo.price;\r\n    }\r\n\r\n    onClickSureBtn(){\r\n        ApkManager.getInstance().showPay({\r\n            result:(isDy)=>{\r\n                if(isDy){\r\n                    FollowManager.getInstance().followEvent(Follow_Type.点击解锁5倍奖励的购买成功次数);\r\n                    let index = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum,0)\r\n                    let data = SignInManager.getInstance().getDataBySignInType(SignInType.SavenDay);\r\n                    let rewardList = new Map<number,number>();\r\n                    for(let i = 0; i < data.length;i++){\r\n                        // let item:cc.Node = null;\r\n                        if(i<index){\r\n                            // item = PropManager.getInstance().createPropItem(data[i].Item,data[i].Num * 4);\r\n                            if(rewardList.has(data[i].Item)){\r\n                                let num = rewardList.get(data[i].Item);\r\n                                num += data[i].Num * 4;\r\n                                rewardList.set(data[i].Item,num);\r\n                            }else{\r\n                                rewardList.set(data[i].Item,data[i].Num * 4);\r\n                            }\r\n                        }else{\r\n                            if(rewardList.has(data[i].Item)){\r\n                                let num = rewardList.get(data[i].Item);\r\n                                num += data[i].Num * 5;\r\n                                rewardList.set(data[i].Item,num);\r\n                            }else{\r\n                                rewardList.set(data[i].Item,data[i].Num * 5);\r\n                            }\r\n                        }\r\n                    }\r\n                    let rewardList1 = [];\r\n                    rewardList.forEach((num,id)=>{\r\n                        PropManager.getInstance().changePropNum(id,num);\r\n                        let item = PropManager.getInstance().createPropItem(id,num);\r\n                        rewardList1.push(item);\r\n                    })\r\n                    GameManager.getInstance().showMultipleGetTip(rewardList1);\r\n                    TheStorageManager.getInstance().setItem(StorageKey.NewPlayerSavenDaySignInOver,1);\r\n                    HttpManager.post(AccessName.updateSevenGift,this.getUserIdJsonString());\r\n                    this.onClose();\r\n                }\r\n            }\r\n        },googldId)\r\n    }\r\n\r\n    onClickBtnClose()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.destroySelf();\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n        // EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_SignIn);\r\n    }\r\n\r\n    private getUserIdJsonString():string{\r\n        let uid=UserData.getInstance().getUserID();\r\n        return JSON.stringify({\r\n            uid:uid,\r\n        });\r\n    }\r\n}\r\n"]}