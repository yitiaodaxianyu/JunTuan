{"version":3,"sources":["assets\\Scripts\\UI\\home\\SignInBuyUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WXManagerEX from \"../../../startscene/WXManagerEX\";\r\nimport { HttpManager, AccessName } from \"../.././NetWork/HttpManager\";\r\nimport ApkManager from \"../../Ads/ApkManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { SignInManager, SignInType } from \"../../JsonData/SignIn\";\r\nimport { Follow_Type } from \"../../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../../multiLanguage/FollowManager\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\nimport { PayManager } from \"../../Payment/PayManager\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport { StorageKey } from \"../../Storage/StorageConfig\";\r\nimport { TheStorageManager } from \"../../Storage/StorageManager\";\r\nimport { EventManager, RedEventString, RedEventType } from \"../../Tools/EventManager\";\r\nimport UserData from \"../../UserData\";\r\nimport UIComponent from \"../UIComponent\";\r\nimport { UiAction } from \"../UiInterface\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nconst googldId = \"c601\";\r\n\r\n@ccclass\r\nexport default class SignInBuyUi extends UIComponent {\r\n\r\n    putong: cc.Node = null;\r\n\r\n    shuangbei: cc.Node = null;\r\n    init(uiAc: UiAction): void {\r\n        super.init(uiAc);\r\n    }\r\n\r\n    iniData(){\r\n        this.refreshUi();\r\n    }\r\n\r\n    refreshUi(){\r\n        // let index = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum,0)\r\n        // let data = SignInManager.getInstance().getDataBySignInType(SignInType.SavenDay);\r\n        // let content = this.node.getChildByName(\"scroll\").getComponent(cc.ScrollView).content;\r\n        // content.removeAllChildren();\r\n        // let payInfo = PayManager.getInstance().getPayInfo(googldId);\r\n        // let rewardList = new Map<number,number>();\r\n        // for(let i = 0; i < data.length;i++){\r\n        //     // let item:cc.Node = null;\r\n        //     if(i<index){\r\n        //         // item = PropManager.getInstance().createPropItem(data[i].Item,data[i].Num * 4);\r\n        //         if(rewardList.has(data[i].Item)){\r\n        //             let num = rewardList.get(data[i].Item);\r\n        //             num += data[i].Num * 4;\r\n        //             rewardList.set(data[i].Item,num);\r\n        //         }else{\r\n        //             rewardList.set(data[i].Item,data[i].Num * 4);\r\n        //         }\r\n        //     }else{\r\n        //         if(rewardList.has(data[i].Item)){\r\n        //             let num = rewardList.get(data[i].Item);\r\n        //             num += data[i].Num * 5;\r\n        //             rewardList.set(data[i].Item,num);\r\n        //         }else{\r\n        //             rewardList.set(data[i].Item,data[i].Num * 5);\r\n        //         }\r\n        //     }\r\n        // }\r\n        // rewardList.forEach((num,id)=>{\r\n        //     let item = PropManager.getInstance().createPropItem(id,num);\r\n        //     content.addChild(item);\r\n        // })\r\n        // this.node.getChildByName(\"sure\").getComponentInChildren(cc.Label).string = payInfo.price;\r\n        this.putong= this.node.getChildByName(\"putong\")\r\n        this.shuangbei= this.node.getChildByName(\"shuangbei\")\r\n        let index = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum, 0);\r\n        let data = SignInManager.getInstance().getDataBySignInType(SignInType.SavenDay);\r\n        let reward = PropManager.getInstance().createPropItem(data[index].Item, data[index].Num);\r\n        let reward2 = PropManager.getInstance().createPropItem(data[index].Item, data[index].Num * 2);\r\n        this.putong.addChild(reward);\r\n        this.shuangbei.addChild(reward2);\r\n        \r\n    }\r\n\r\n    onClickSureBtn(){\r\n        // FollowManager.getInstance().followEvent(Follow_Type.点击解锁5倍奖励的购买成功次数);\r\n        // let index = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum,0)\r\n        // let data = SignInManager.getInstance().getDataBySignInType(SignInType.SavenDay);\r\n        // let rewardList = new Map<number,number>();\r\n        // for(let i = 0; i < data.length;i++){\r\n        //     // let item:cc.Node = null;\r\n        //     if(i<index){\r\n        //         // item = PropManager.getInstance().createPropItem(data[i].Item,data[i].Num * 4);\r\n        //         if(rewardList.has(data[i].Item)){\r\n        //             let num = rewardList.get(data[i].Item);\r\n        //             num += data[i].Num * 4;\r\n        //             rewardList.set(data[i].Item,num);\r\n        //         }else{\r\n        //             rewardList.set(data[i].Item,data[i].Num * 4);\r\n        //         }\r\n        //     }else{\r\n        //         if(rewardList.has(data[i].Item)){\r\n        //             let num = rewardList.get(data[i].Item);\r\n        //             num += data[i].Num * 5;\r\n        //             rewardList.set(data[i].Item,num);\r\n        //         }else{\r\n        //             rewardList.set(data[i].Item,data[i].Num * 5);\r\n        //         }\r\n        //     }\r\n        // }\r\n        // let rewardList1 = [];\r\n        // rewardList.forEach((num,id)=>{\r\n        //     PropManager.getInstance().changePropNum(id,num);\r\n        //     let item = PropManager.getInstance().createPropItem(id,num);\r\n        //     rewardList1.push(item);\r\n        // })\r\n        // GameManager.getInstance().showMultipleGetTip(rewardList1);\r\n        // TheStorageManager.getInstance().setItem(StorageKey.NewPlayerSavenDaySignInOver,1);\r\n        // HttpManager.post(AccessName.updateSevenGift,this.getUserIdJsonString());\r\n        // this.onClose();\r\n\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        var num;\r\n        let index = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum, 0);\r\n        if (num == '' || num == undefined) num = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum, 0) + '';\r\n        if (Number(num) != index) return;\r\n        if (TheStorageManager.getInstance().getNumber(StorageKey.CanSignIn, 0) == 0) {\r\n            if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n                WXManagerEX.getInstance().qiriQiandaoShipin = wx.createRewardedVideoAd({\r\n                    adUnitId: 'adunit-74cd62188527aedb'\r\n                });\r\n                WXManagerEX.getInstance().qiriQiandaoShipin.offError();\r\n                WXManagerEX.getInstance().qiriQiandaoShipin.onError(err => {\r\n                    console.log(err)\r\n                });\r\n                WXManagerEX.getInstance().qiriQiandaoShipin.offClose();\r\n                WXManagerEX.getInstance().qiriQiandaoShipin.show().catch(() => {\r\n                    // 失败重试\r\n                    WXManagerEX.getInstance().qiriQiandaoShipin.load()\r\n                        .then(() => WXManagerEX.getInstance().qiriQiandaoShipin.show())\r\n                        .catch(err => {\r\n                            GameManager.getInstance().showMessage(\"广告拉取失败\");\r\n                        })\r\n                })\r\n                WXManagerEX.getInstance().qiriQiandaoShipin.onClose(res => {\r\n                    // 用户点击了【关闭广告】按钮\r\n                    // 小于 2.1.0 的基础库版本，res 是一个 undefined\r\n                    if (res && res.isEnded || res === undefined) {\r\n                        // 正常播放结束，可以下发游戏奖励\r\n                        this.onShipinComp();\r\n                    }\r\n                    else {\r\n                        // 播放中途退出，不下发游戏奖励\r\n                    }\r\n                })\r\n\r\n\r\n            } else {\r\n                this.onShipinComp();\r\n            }\r\n        } else {\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(230008));\r\n        }\r\n    }\r\n    private onShipinComp(): void {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        let index = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum, 0);\r\n        var num = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum, 0) + '';\r\n        if (Number(num) != index) return;\r\n        if (TheStorageManager.getInstance().getNumber(StorageKey.CanSignIn, 0) == 0) {\r\n            let data = SignInManager.getInstance().getDataBySignInType(SignInType.SavenDay);\r\n            let reward = PropManager.getInstance().createPropItem(data[index].Item, data[index].Num * 2);\r\n            FollowManager.getInstance().followEvent(Follow_Type.新手签到x天的点击次数 + index);\r\n            PropManager.getInstance().changePropNum(data[index].Item, data[index].Num * 2);\r\n            GameManager.getInstance().showGetTip(reward);\r\n            // this.node.getChildByName(\"receiveBtn\").active = false;\r\n            index++;\r\n            if (index > 6) {\r\n                TheStorageManager.getInstance().setItem(StorageKey.NewPlayerSavenDaySignInOver, 1);\r\n                HttpManager.post(AccessName.updateSevenGift, this.getUserIdJsonString());\r\n            }\r\n            TheStorageManager.getInstance().setItem(StorageKey.CanSignIn, 1);\r\n            TheStorageManager.getInstance().setItem(StorageKey.NewPlayerSavenDaySignInNum, index)\r\n            this.refreshUi();\r\n            EventManager.postRedEvent(RedEventString.RED_TIP, RedEventType.Btn_Main_SignIn, false, RedEventType.Btn_Main_SignIn_BtnGet);\r\n\r\n            TheStorageManager.getInstance().setItem(StorageKey.NewPlayerSavenDaySignInTime, new Date().getTime());\r\n            HttpManager.post(AccessName.sevenSign, this.getUserIdJsonString());\r\n        } else {\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(230008));\r\n        }\r\n    }\r\n    onClickBtnClose()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        // this.destroySelf();\r\n        var num;\r\n        let index = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum, 0);\r\n        if (num == '' || num == undefined) num = TheStorageManager.getInstance().getNumber(StorageKey.NewPlayerSavenDaySignInNum, 0) + '';\r\n        if (Number(num) != index) return;\r\n        if (TheStorageManager.getInstance().getNumber(StorageKey.CanSignIn, 0) == 0) {\r\n            let data = SignInManager.getInstance().getDataBySignInType(SignInType.SavenDay);\r\n            let reward = PropManager.getInstance().createPropItem(data[index].Item, data[index].Num);\r\n            FollowManager.getInstance().followEvent(Follow_Type.新手签到x天的点击次数 + index);\r\n            PropManager.getInstance().changePropNum(data[index].Item, data[index].Num);\r\n            GameManager.getInstance().showGetTip(reward);\r\n            // this.node.getChildByName(\"receiveBtn\").active = false;\r\n            index++;\r\n            if (index > 6) {\r\n                TheStorageManager.getInstance().setItem(StorageKey.NewPlayerSavenDaySignInOver, 1);\r\n                HttpManager.post(AccessName.updateSevenGift, this.getUserIdJsonString());\r\n            }\r\n            TheStorageManager.getInstance().setItem(StorageKey.CanSignIn, 1);\r\n            TheStorageManager.getInstance().setItem(StorageKey.NewPlayerSavenDaySignInNum, index)\r\n            this.refreshUi();\r\n            EventManager.postRedEvent(RedEventString.RED_TIP, RedEventType.Btn_Main_SignIn, false, RedEventType.Btn_Main_SignIn_BtnGet);\r\n\r\n            TheStorageManager.getInstance().setItem(StorageKey.NewPlayerSavenDaySignInTime, new Date().getTime());\r\n            HttpManager.post(AccessName.sevenSign, this.getUserIdJsonString());\r\n        } else {\r\n            GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(230008));\r\n        }\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        super.onClose();\r\n        // ApkManager.getInstance().closeBanner();\r\n        // EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_SignIn);\r\n    }\r\n\r\n    private getUserIdJsonString():string{\r\n        let uid=UserData.getInstance().getUserID();\r\n        return JSON.stringify({\r\n            uid:uid,\r\n        });\r\n    }\r\n}\r\n"]}