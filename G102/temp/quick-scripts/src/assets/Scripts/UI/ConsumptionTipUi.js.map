{"version":3,"sources":["assets\\Scripts\\UI\\ConsumptionTipUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ApkManager from \"../Ads/ApkManager\";\r\nimport GameManager from \"../GameManager\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport UIComponent from \"./UIComponent\";\r\nimport { UiAction } from \"./UiInterface\";\r\nimport LanguageManager from '../multiLanguage/LanguageManager'\r\nimport { PropId } from \"../Prop/PropConfig\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport MyTool from \"../Tools/MyTool\";\r\nimport { ItemManager } from \"../Prop/Data/Item\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ConsumptionTipUi extends UIComponent {\r\n\r\n    private sure_call_back : Function = null;\r\n    private currency_type:PropId = PropId.Coin;\r\n    private currency_num:number = 0;\r\n    init(uiAc: UiAction) {\r\n        super.init(uiAc);\r\n    }\r\n\r\n    initCallBack(currencyType:PropId,currencyNum:number,sureCallBack:Function){\r\n        this.sure_call_back = sureCallBack;\r\n        this.currency_type = currencyType;\r\n        this.currency_num = currencyNum;\r\n        this.initUi();\r\n    }\r\n\r\n    initUi(){\r\n        this.node.getChildByName(\"titleLabel\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(100003);\r\n        this.node.getChildByName(\"contentLabel1\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(100022);\r\n        this.node.getChildByName(\"contentLabel2\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(100004);\r\n        this.node.getChildByName(\"cancelLabel\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(100002);\r\n        this.node.getChildByName(\"sureLabel\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(100001);\r\n        \r\n        this.node.getChildByName(\"useIcon\").getComponent(cc.Sprite).spriteFrame = PropManager.getInstance().getSpByPropId(this.currency_type);\r\n        this.node.getChildByName(\"tipIcon\").getComponent(cc.Sprite).spriteFrame = PropManager.getInstance().getSpByPropId(this.currency_type);\r\n\r\n        this.node.getChildByName(\"useLabel\").getComponent(cc.Label).string = MyTool.getCoinDanwei(this.currency_num);\r\n        let tipLabel = this.node.getChildByName(\"tipLabel\");\r\n        tipLabel.getComponent(cc.Label).string = MyTool.getCoinDanwei(PropManager.getInstance().getPropNum(this.currency_type));\r\n        // console.log(\"初始化Ui\",this.currency_num,PropManager.getInstance().getPropNum(this.currency_type));\r\n        if(this.currency_num > PropManager.getInstance().getPropNum(this.currency_type)){\r\n            // console.log(\"钱不够了\");\r\n            tipLabel.color = cc.color(209,44,45);\r\n        }\r\n    }\r\n\r\n    clickBtnSure(){\r\n        if(this.currency_num > PropManager.getInstance().getPropNum(this.currency_type)){\r\n            // console.log(\"钱不够的提示\")\r\n            let str = \"\";\r\n            str = LanguageManager.getInstance().getStrByTextId(ItemManager.getInstance().getNameTextId(this.currency_type)) + LanguageManager.getInstance().getStrByTextId(100021);\r\n            GameManager.getInstance().showMessage(str);\r\n        }else{\r\n            // console.log(\"扣钱之前的数量：\" + PropManager.getInstance().getPropNum(this.currency_type),this.currency_num * -1)\r\n            PropManager.getInstance().changePropNum(this.currency_type,this.currency_num * -1);\r\n            // console.log(\"扣钱之后的数量：\" + PropManager.getInstance().getPropNum(this.currency_type))\r\n            GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n            this.sure_call_back();\r\n            this.destroySelf();\r\n        }\r\n    }\r\n\r\n    clickBtnClose()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.destroySelf();\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n        // EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_SignIn);\r\n    }\r\n}\r\n"]}