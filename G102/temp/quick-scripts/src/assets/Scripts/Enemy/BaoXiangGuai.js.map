{"version":3,"sources":["assets\\Scripts\\Enemy\\BaoXiangGuai.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { BaoXiang_Anima, Enemy_Buff_Type } from \"./EnemyConfig\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BaoXiangGuai extends cc.Component {\r\n\r\n    @property(cc.SpriteAtlas)\r\n    icon_atlas:cc.SpriteAtlas=null;\r\n    //骨骼动画\r\n    spine:sp.Skeleton=null;\r\n    state:number=0;\r\n    move_speed:number=300;\r\n    move_direction:number=Math.PI/2;\r\n    target_pos:cc.Vec2=cc.v2(0,0);\r\n\r\n    init()\r\n    {\r\n        // this.level_buff=levelBuff;\r\n        // let enemyTs=this.node.getComponent(Enemy);\r\n        // enemyTs.addEnemyBuff(Enemy_Buff_Type.wudi);\r\n        // this.spine=this.node.getComponent(sp.Skeleton);\r\n        // this.spine.setCompleteListener(()=>{\r\n        //     if(this.spine.animation==BaoXiang_Anima.bianxing)\r\n        //     {\r\n        //         this.spine.animation=BaoXiang_Anima.daiji; \r\n        //         this.spine.loop=false;\r\n        //     }\r\n        //     if(this.spine.animation==BaoXiang_Anima.daiji)\r\n        //     {\r\n        //         this.spine.animation=BaoXiang_Anima.pao;\r\n        //         enemyTs.removeEnemyBuff(Enemy_Buff_Type.wudi);\r\n        //         this.state=1;\r\n        //     }\r\n        //     if(this.spine.animation==BaoXiang_Anima.gongji)\r\n        //     {\r\n        //         this.spine.animation=BaoXiang_Anima.pao;\r\n        //         this.state=1;\r\n        //     }\r\n        //     if(this.spine.animation==BaoXiang_Anima.pao)\r\n        //     {\r\n        //         if(this.state==1)\r\n        //         {\r\n        //             this.spine.animation=BaoXiang_Anima.pao;\r\n        //         }\r\n        //     }\r\n        //     // if(this.spine.animation==BaoXiang_Anima.siwang)\r\n        //     // {\r\n\r\n        //     // }\r\n        // });\r\n        // this.spine.animation=BaoXiang_Anima.bianxing;\r\n        // this.spine.loop=false;   \r\n        // this.state=0;\r\n        // this.target_pos=cc.v2(Math.random()*512-256,Math.random()*660-180); \r\n    }\r\n\r\n    destroySelf():boolean\r\n    {\r\n        this.spine.animation=BaoXiang_Anima.siwang;\r\n        this.state=0;\r\n        //爆东西出来\r\n        this.createSkillIcon();\r\n        return false;\r\n    }\r\n\r\n    createSkillIcon()\r\n    {\r\n        \r\n\r\n        //GameManager.getInstance().baoxiangDie();       \r\n    }    \r\n\r\n\r\n\r\n    getPinZiSp(quality:number):cc.SpriteFrame\r\n    {       \r\n        return this.icon_atlas.getSpriteFrame('Game_Skill_Frame_'+(quality-1));\r\n    }\r\n\r\n    update (dt:number) {\r\n        if(this.state==1)\r\n        {\r\n            let sp=this.move_speed*dt;\r\n            //跑起来\r\n            let offsetPos=this.target_pos.sub(this.node.getPosition());\r\n            if(offsetPos.mag()<sp)\r\n            {\r\n                //到达目标地点，换个地点\r\n                this.state=0;\r\n                this.spine.animation=BaoXiang_Anima.gongji;\r\n                this.spine.loop=false;\r\n                this.target_pos=cc.v2(Math.random()*512-256,Math.random()*500-180);\r\n            }else\r\n            {\r\n                let pi2=Math.PI*2;\r\n                let dir=(Math.atan2(offsetPos.y,offsetPos.x)+pi2)%pi2;\r\n                let disX=this.node.x+sp*Math.cos(dir);\r\n                let disY=this.node.y+sp*Math.sin(dir);\r\n                this.node.x=disX;\r\n                this.node.y=disY;\r\n                if(dir>=Math.PI/2 && dir<=Math.PI*3/2)\r\n                {\r\n                    this.node.scaleX=1;\r\n                }else\r\n                {\r\n                    this.node.scaleX=-1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}