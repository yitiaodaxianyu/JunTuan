{"version":3,"sources":["assets\\Scripts\\Payment\\PayFirstChargeUi.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA2C;AAC3C,8CAAyC;AACzC,wDAAuD;AAEvD,oEAA+D;AAC/D,gEAA2D;AAC3D,oEAA+D;AAC/D,mDAAkD;AAElD,0DAAsD;AACtD,4DAA8D;AAC9D,4DAAuD;AAEvD,sDAAmF;AACnF,4CAAuC;AACvC,iDAA4C;AAC5C,2CAAsD;AAEtD,6CAA4C;AAC5C,2CAA0C;AAEpC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA8C,oCAAW;IAAzD;QAAA,qEAyIC;QAvIG,iBAAW,GAAe;YACtB,EAAC,SAAS,EAAC,MAAM,EAAC,UAAU,EAAC,CAAC,EAAC;YAC/B,EAAC,SAAS,EAAC,KAAK,EAAC,UAAU,EAAC,CAAC,EAAC;YAC9B,EAAC,SAAS,EAAC,KAAK,EAAC,UAAU,EAAC,CAAC,EAAC;YAC9B,EAAC,SAAS,EAAC,KAAK,EAAC,UAAU,EAAC,CAAC,EAAC;YAC9B,EAAC,SAAS,EAAC,KAAK,EAAC,UAAU,EAAC,CAAC,EAAC;YAC9B,EAAC,SAAS,EAAC,KAAK,EAAC,UAAU,EAAC,GAAG,EAAC;YAChC,EAAC,SAAS,EAAC,KAAK,EAAC,UAAU,EAAC,EAAE,EAAC;SAAC,CAAC;QAErC,2BAA2B;QAC3B,uBAAuB;QACvB,IAAI;QAEJ,gBAAU,GAAY,IAAI,CAAC;QAE3B,QAAE,GAAC,MAAM,CAAA;QACT,aAAO,GAAW,EAAE,CAAA;;IAuHxB,CAAC;IArHG,+BAAI,GAAJ,UAAK,IAAc;QACf,iBAAM,IAAI,YAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,2BAAY,CAAC,YAAY,CAAC,6BAAc,CAAC,OAAO,EAAC,2BAAY,CAAC,kBAAkB,EAAC,KAAK,EAAC,2BAAY,CAAC,kBAAkB,CAAC,CAAC;QACxH,uBAAa,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,6BAAW,CAAC,MAAM,CAAC,CAAC;IAChE,CAAC;IAED,sCAAW,GAAX;QAEI,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,YAAY,EAAE,EAAE;YAC3E,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,gBAAgB,EAAE,CAAA;SAChD;QACD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAC1D,iGAAiG;YACjG,mBAAmB;YACnB,yBAAyB;YACzB,wBAAwB;YACxB,gCAAgC;YAChC,IAAI,IAAI,GAAG,yBAAW,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,SAAS,EAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,CAAC;YAC1H,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;YACjB,IAAI,CAAC,MAAM,GAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAA;YAC3C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;YACvB,mBAAmB;SACtB;QAED,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,MAAM,GAAG,yBAAe,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAC9H,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,EAAE,GAAC,uBAAU,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAA;QAC3I,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,uBAAU,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,IAAE,CAAC,CAAC;QACzF,gDAAgD;QAChD,wDAAwD;QACxD,wDAAwD;QACxD,SAAS;QACT,uDAAuD;QACvD,yDAAyD;QACzD,IAAI;IACR,CAAC;IAED,uCAAY,GAAZ;QAAA,iBAUC;QATG,uBAAa,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,6BAAW,CAAC,QAAQ,CAAC,CAAC;QAC9D,IAAG,uBAAU,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,IAAE,CAAC,EAAC;YAC7C,oBAAU,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,EAAC,MAAM,EAAC,UAAC,KAAa;oBACnD,IAAG,KAAK,EAAC;wBACL,uBAAa,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,6BAAW,CAAC,QAAQ,CAAC,CAAC;wBAC9D,KAAI,CAAC,iBAAiB,EAAE,CAAA;qBAC3B;gBACL,CAAC,EAAC,EAAC,IAAI,CAAC,EAAE,CAAC,CAAA;SACd;IACL,CAAC;IAED,4CAAiB,GAAjB;QAAA,iBAkDC;QAjDG,IAAG,kCAAiB,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,0BAAU,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,MAAM,EAAC,CAAC,CAAC,IAAI,CAAC,EAAC;YACjH,qBAAS,CAAC,WAAW,EAAE,CAAC,YAAY,CAAC,iBAAM,CAAC,eAAe,EAAC,uBAAY,CAAC,GAAG,EAAC,EAAC,WAAW,EAAC,UAAC,MAAM;oBAC7F,MAAM,CAAC,YAAY,CAAC,yBAAe,CAAC,CAAC,IAAI,CAAC;wBACtC,OAAO,EAAC;4BACJ,IAAI,UAAU,GAAa,EAAE,CAAC;4BAC9B,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAC,CAAC,EAAC,CAAC;gCACzB,IAAI,IAAI,GAAG,yBAAW,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,EAAC,CAAC,CAAC,UAAU,CAAC,CAAC;gCAC9E,yBAAW,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,SAAS,EAAC,CAAC,CAAC,UAAU,CAAC,CAAC;gCAClE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;4BAC1B,CAAC,CAAC,CAAC;4BACH,uBAAU,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,KAAI,CAAC,EAAE,CAAC,CAAC;4BAC5C,kCAAiB,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,0BAAU,CAAC,gBAAgB,EAAC,CAAC,CAAC,CAAC;4BACvE,qBAAW,CAAC,WAAW,EAAE,CAAC,kBAAkB,CAAC,UAAU,EAAC,CAAC;gCACrD,KAAI,CAAC,WAAW,EAAE,CAAC;gCACnB,IAAI,QAAQ,GAAC,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;gCACvC,IAAG,QAAQ,EAAC;oCACR,IAAI,IAAI,GAAC,QAAQ,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC;oCACvC,IAAG,IAAI,EAAC;wCACJ,IAAI,CAAC,YAAY,EAAE,CAAC;qCACvB;iCACJ;4BAEL,CAAC,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAC;wBACnB,CAAC;qBACJ,CAAC,CAAA;oBACF,MAAM,CAAC,YAAY,CAAC,yBAAe,CAAC,CAAC,QAAQ,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,MAAM,CAAC,CAAC;gBAC1F,CAAC,EAAC,CAAC,CAAC;SACP;aAAI;YACD,IAAI,YAAU,GAAa,EAAE,CAAC;YAClB,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAC,CAAC,EAAC,CAAC;gBACzB,IAAI,IAAI,GAAG,yBAAW,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,EAAC,CAAC,CAAC,UAAU,CAAC,CAAC;gBAC9E,yBAAW,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,SAAS,EAAC,CAAC,CAAC,UAAU,CAAC,CAAC;gBAClE,YAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1B,CAAC,CAAC,CAAC;YACH,uBAAU,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAC5C,kCAAiB,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,0BAAU,CAAC,gBAAgB,EAAC,CAAC,CAAC,CAAC;YACvE,qBAAW,CAAC,WAAW,EAAE,CAAC,kBAAkB,CAAC,YAAU,EAAC,CAAC;gBACrD,KAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,IAAI,QAAQ,GAAC,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBACvC,IAAG,QAAQ,EAAC;oBACR,IAAI,IAAI,GAAC,QAAQ,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC;oBACvC,IAAG,IAAI,EAAC;wBACJ,IAAI,CAAC,YAAY,EAAE,CAAC;qBACvB;iBACJ;YAEL,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC9B;QACD,yBAAW,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,CAAC;IAC/C,CAAC;IAED,kBAAkB;IAClB,IAAI;IACJ,2EAA2E;IAC3E,0BAA0B;IAC1B,IAAI;IAEJ,sCAAW,GAAX;QAEI,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,YAAY,EAAE,EAAE;YAC3E,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,gBAAgB,EAAE,CAAA;SAChD;QACD,IAAI,CAAC,OAAO,GAAC,IAAI,KAAK,EAAE,CAAC;QACzB,iBAAM,OAAO,WAAE,CAAC;QAChB,oBAAU,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;IAC3C,CAAC;IAxHD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wDACS;IAfV,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CAyIpC;IAAD,uBAAC;CAzID,AAyIC,CAzI6C,qBAAW,GAyIxD;kBAzIoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["import ApkManager from \"../Ads/ApkManager\";\r\nimport GameManager from \"../GameManager\";\r\nimport { HeroManager } from \"../Hero/Data/HeroManager\";\r\nimport { RewardData } from \"../JsonData/LevelJsonData\";\r\nimport { Follow_Type } from \"../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../multiLanguage/FollowManager\";\r\nimport LanguageManager from \"../multiLanguage/LanguageManager\";\r\nimport { PropManager } from \"../Prop/PropManager\";\r\nimport { SoundIndex } from \"../Sound/AudioConstants\";\r\nimport { StorageKey } from \"../Storage/StorageConfig\";\r\nimport { TheStorageManager } from \"../Storage/StorageManager\";\r\nimport StoreHeroShowUi from \"../Store/StoreHeroShowUi\";\r\nimport { PayUiIndex } from \"../thirdParty/ThirdParty\";\r\nimport { EventManager, RedEventString, RedEventType } from \"../Tools/EventManager\";\r\nimport MainUi from \"../UI/home/MainUi\";\r\nimport UIComponent from \"../UI/UIComponent\";\r\nimport { UIPath, UILayerLevel } from \"../UI/UIConfig\";\r\nimport { UiAction } from \"../UI/UiInterface\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport { PayManager } from \"./PayManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PayFirstChargeUi extends UIComponent {\r\n\r\n    reward_list:RewardData[] =[\r\n        {reward_id:110008,reward_num:0},\r\n        {reward_id:30113,reward_num:1},\r\n        {reward_id:30213,reward_num:1},\r\n        {reward_id:30313,reward_num:1},\r\n        {reward_id:30413,reward_num:1},\r\n        {reward_id:10002,reward_num:600},\r\n        {reward_id:40004,reward_num:10}];\r\n    \r\n    // protected start(): void{\r\n    //     this.init(null);\r\n    // }\r\n    @property(cc.Node)\r\n    itmeparent: cc.Node = null;\r\n    \r\n    id=\"c301\"\r\n    itemarr:cc.Node[]=[]\r\n\r\n    init(uiAc: UiAction): void {\r\n        super.init(uiAc);\r\n        this.refreshData();\r\n        EventManager.postRedEvent(RedEventString.RED_TIP,RedEventType.Btn_Main_ShouChong,false,RedEventType.Btn_Main_ShouChong);\r\n        FollowManager.getInstance().followEvent(Follow_Type.首充点击次数);\r\n    }\r\n\r\n    refreshData(){\r\n        \r\n        for (let itemarrindex = 0; itemarrindex < this.itemarr.length; itemarrindex++) {\r\n            this.itemarr[itemarrindex].removeFromParent()\r\n        }\r\n        for (let index = 0; index < this.reward_list.length; index++) {\r\n            // let item=PropManager.getInstance().createPropItem(rewardData.reward_id,rewardData.reward_num);\r\n            // item.scale=0.82;\r\n            // item.parent=this.prop;\r\n            // item.x=-67+level3*90;\r\n            // item.y=-40+Starindex*115-115;\r\n            let item = PropManager.getInstance().createPropItem(this.reward_list[index].reward_id,this.reward_list[index].reward_num);\r\n            item.scale = 0.9;\r\n            item.parent=this.itmeparent.children[index]\r\n            this.itemarr.push(item)\r\n            // .addChild(item);\r\n        }\r\n\r\n        this.node.getChildByName(\"richText\").getComponent(cc.RichText).string = LanguageManager.getInstance().getStrByTextId(1440002);\r\n        this.node.getChildByName(\"goBtn\").getChildByName(\"txt\").getComponent(cc.Label).string=\"\"+PayManager.getInstance().getPayInfo(this.id).price\r\n        this.node.getChildByName(\"goBtn\").active = PayManager.getInstance().getPayNum('c301')<=0;\r\n        // if(PayManager.getInstance().getIsFirstPay()){\r\n        //     this.node.getChildByName(\"goBtn\").active = false;\r\n        //     this.node.getChildByName(\"getBtn\").active = true;\r\n        // }else{\r\n        //     this.node.getChildByName(\"goBtn\").active = true;\r\n        //     this.node.getChildByName(\"getBtn\").active = false;\r\n        // }\r\n    }\r\n\r\n    onClickGoBtn(){\r\n        FollowManager.getInstance().followEvent(Follow_Type.首充点击购买按钮);\r\n        if(PayManager.getInstance().getPayNum('c301')<=0){\r\n            ApkManager.getInstance().showPay({result:(isPay:boolean)=>{\r\n                if(isPay){\r\n                    FollowManager.getInstance().followEvent(Follow_Type.首充购买成功按钮);\r\n                    this.onClickReceiveBtn()\r\n                }\r\n            }},this.id)\r\n        }        \r\n    }\r\n\r\n    onClickReceiveBtn(){\r\n        if(TheStorageManager.getInstance().getNumber(StorageKey.StoreHeroID + this.reward_list[0].reward_id % 110000,0) == 0){\r\n            UIManager.getInstance().showUiDialog(UIPath.StoreHeroShowUi,UILayerLevel.Two,{onCompleted:(uiNode)=>{\r\n                uiNode.getComponent(StoreHeroShowUi).init({\r\n                    onClose:()=>{\r\n                        let rewardList:cc.Node[] = [];\r\n                        this.reward_list.forEach((v,k) =>{\r\n                            let item = PropManager.getInstance().createPropItem(v.reward_id,v.reward_num);\r\n                            PropManager.getInstance().changePropNum(v.reward_id,v.reward_num);            \r\n                            rewardList.push(item);\r\n                        });\r\n                        PayManager.getInstance().addPayNum(this.id);\r\n                        TheStorageManager.getInstance().setItem(StorageKey.FirstPayGetState,1);\r\n                        GameManager.getInstance().showMultipleGetTip(rewardList,(()=>{\r\n                            this.destroySelf();\r\n                            let mainNode=cc.find('Canvas/main_ui');\r\n                            if(mainNode){\r\n                                let main=mainNode.getComponent(MainUi);\r\n                                if(main){\r\n                                    main.refreshRight();\r\n                                }\r\n                            }\r\n                            \r\n                        }).bind(this));\r\n                    }\r\n                })\r\n                uiNode.getComponent(StoreHeroShowUi).initData(this.reward_list[0].reward_id % 110000);\r\n            }}); \r\n        }else{\r\n            let rewardList:cc.Node[] = [];\r\n                        this.reward_list.forEach((v,k) =>{\r\n                            let item = PropManager.getInstance().createPropItem(v.reward_id,v.reward_num);\r\n                            PropManager.getInstance().changePropNum(v.reward_id,v.reward_num);            \r\n                            rewardList.push(item);\r\n                        });\r\n                        PayManager.getInstance().addPayNum(this.id);\r\n                        TheStorageManager.getInstance().setItem(StorageKey.FirstPayGetState,1);\r\n                        GameManager.getInstance().showMultipleGetTip(rewardList,(()=>{\r\n                            this.destroySelf();\r\n                            let mainNode=cc.find('Canvas/main_ui');\r\n                            if(mainNode){\r\n                                let main=mainNode.getComponent(MainUi);\r\n                                if(main){\r\n                                    main.refreshRight();\r\n                                }\r\n                            }\r\n                            \r\n                        }).bind(this));\r\n        }\r\n        HeroManager.getInstance().reportHeroList();\r\n    }\r\n\r\n    // clickBtnClose()\r\n    // {\r\n    //     GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n    //     this.destroySelf();\r\n    // }\r\n\r\n    destroySelf()\r\n    {\r\n        for (let itemarrindex = 0; itemarrindex < this.itemarr.length; itemarrindex++) {\r\n            this.itemarr[itemarrindex].removeFromParent()\r\n        }\r\n        this.itemarr=new Array();\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n    }\r\n    \r\n}\r\n"]}