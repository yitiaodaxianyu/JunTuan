{"version":3,"sources":["assets\\Scripts\\Payment\\LongJingUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { PayUiIndex } from \"../thirdParty/ThirdParty\";\r\nimport { EventManager, RedEventString, RedEventType } from \"../Tools/EventManager\";\r\nimport { CrystalRechargeManager } from \"./Data/CrystalRecharge\";\r\nimport LongJingItem from \"./LongJingItem\";\r\nimport { PayManager } from \"./PayManager\";\r\nimport TotalLongJingItem from \"./TotalLongJingItem\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LongJingUi extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    prefab_long_jing_item:cc.Prefab=null;\r\n\r\n    @property(cc.Prefab)\r\n    prefab_total_item:cc.Prefab=null;    \r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        this.adaptation();\r\n        this.initItem();\r\n        this.initTotalItem();\r\n        PayManager.getInstance().addTodayShow(PayUiIndex.LongJing);\r\n        EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_Shop_LongJing);\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        this.refreshTotalItem();\r\n    }\r\n\r\n    private adaptation()\r\n    {        \r\n        let bottomNode=this.node.parent.getChildByName('bottom');\r\n        let bottomHeight=bottomNode.height;\r\n        let bottomY=bottomNode.y;        \r\n        let topNode=this.node.parent.getChildByName('top')\r\n        let topHeight=topNode.height;\r\n        let topY=topNode.y;\r\n        let height=((topY-topHeight)-(bottomY+bottomHeight));\r\n        let centerY=(topY-topHeight-height/2);\r\n        let scrollView=this.node.getChildByName('scrollView');\r\n        scrollView.height=height;\r\n        scrollView.y=centerY;\r\n        scrollView.getChildByName('view').height=height;\r\n    }\r\n\r\n    initItem(){\r\n        let content=this.node.getChildByName('scrollView').getComponent(cc.ScrollView).content;\r\n        let data=CrystalRechargeManager.getInstance().getData();\r\n        data.forEach((v,k)=>{\r\n            let longjingItem=cc.instantiate(this.prefab_long_jing_item);\r\n            longjingItem.getComponent(LongJingItem).init(v,this);\r\n            content.addChild(longjingItem);\r\n        });\r\n    }\r\n\r\n    initTotalItem(){\r\n        //累计        \r\n        let content=this.node.getChildByName('scrollView').getComponent(cc.ScrollView).content;\r\n        let totalItem=cc.instantiate(this.prefab_total_item);\r\n        content.addChild(totalItem);\r\n        this.refreshTotalItem();\r\n    }\r\n\r\n    refreshTotalItem(){\r\n        let totalItem=this.node.getChildByName('scrollView').getComponent(cc.ScrollView).content.getChildByName('total_item');\r\n        if(totalItem){\r\n            totalItem.getComponent(TotalLongJingItem).init();\r\n        }        \r\n    }\r\n}\r\n\r\n"]}