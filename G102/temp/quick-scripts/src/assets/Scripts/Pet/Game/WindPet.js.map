{"version":3,"sources":["assets\\Scripts\\Pet\\Game\\WindPet.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,6CAA4C;AAC5C,oEAAiF;AACjF,iDAA4C;AAC5C,qDAAoD;AACpD,yDAA8D;AAC9D,0CAA4C;AAC5C,6BAAwB;AAElB,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAqC,2BAAG;IAAxC;QAAA,qEA4CC;QA1CG,oBAAc,GAAS,IAAI,CAAC;QAC5B,qBAAe,GAAS,IAAI,CAAC;;IAyCjC,CAAC;IAvCG,wBAAM,GAAN;QACI,iBAAM,MAAM,WAAE,CAAC;QACf,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACxC,CAAC;IAED,0BAAQ,GAAR,UAAS,OAAe;QACpB,KAAK;QACL,IAAI,IAAI,GAAC,IAAI,mBAAQ,EAAE,CAAC;QACxB,IAAI,CAAC,OAAO,GAAC,mBAAM,CAAC,UAAU,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,wBAAY,CAAC,MAAM,CAAC,CAAC,CAAC;QACpE,IAAI,CAAC,WAAW,GAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,wBAAY,CAAC,MAAM,CAAC,CAAC;QACnE,IAAI,CAAC,SAAS,GAAC,qBAAQ,CAAC,IAAI,CAAC;QAC7B,IAAI,IAAI,GAAC,qBAAW,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC3D,IAAI,SAAS,GAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACjC,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC1D,IAAI,GAAG,GAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QAChC,IAAI,CAAC,cAAc,GAAC,uCAAkB,CAAC,WAAW,EAAE,CAAC,yBAAyB,CAAC,iCAAY,CAAC,eAAe,EAAC,GAAG,EAAC,EAAE,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;QACpJ,IAAI,CAAC,eAAe,GAAC,uCAAkB,CAAC,WAAW,EAAE,CAAC,yBAAyB,CAAC,iCAAY,CAAC,gBAAgB,EAAC,GAAG,EAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;IAClJ,CAAC;IAED,+BAAa,GAAb,UAAc,IAAa;QACvB,uCAAkB,CAAC,WAAW,EAAE,CAAC,qBAAqB,CAAC,iCAAY,CAAC,eAAe,EAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACzG,uCAAkB,CAAC,WAAW,EAAE,CAAC,qBAAqB,CAAC,iCAAY,CAAC,gBAAgB,EAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAC/G,CAAC;IAED,wBAAM,GAAN,UAAO,EAAS;QACZ,IAAG,qBAAW,CAAC,WAAW,EAAE,CAAC,cAAc,IAAE,qBAAS,CAAC,YAAY,EACnE;YACI,OAAO;SACV;QACD,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;IACxB,CAAC;IAED,4BAAU,GAAV,UAAW,EAAS;QAChB,IAAI,CAAC,OAAO,IAAE,EAAE,CAAC;QACjB,IAAG,IAAI,CAAC,OAAO,GAAC,CAAC,EAAC;YACd,IAAI,CAAC,OAAO,GAAC,CAAC,CAAC;SAClB;IACL,CAAC;IA3CgB,OAAO;QAD3B,OAAO;OACa,OAAO,CA4C3B;IAAD,cAAC;CA5CD,AA4CC,CA5CoC,aAAG,GA4CvC;kBA5CoB,OAAO","file":"","sourceRoot":"/","sourcesContent":["\r\n\r\nimport { GameState } from \"../../Constants\";\r\nimport { GameEffectId, GameEffectsManager } from \"../../Game/GameEffectsManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { BuffData } from \"../../Hero/Game/BuffData\";\r\nimport { BuffId, BuffType } from \"../../Hero/Game/HeroConfig\";\r\nimport { PetSkillType } from \"../PetConfig\";\r\nimport Pet from \"./Pet\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class WindPet extends Pet {\r\n\r\n    buff_node_back:cc.Node=null;\r\n    buff_node_front:cc.Node=null;\r\n\r\n    onLoad(): void {\r\n        super.onLoad();\r\n        this.addAttackListen(this.onAttack);\r\n    }\r\n\r\n    onAttack(monster:cc.Node){\r\n        //加攻速\r\n        let buff=new BuffData();\r\n        buff.buff_id=BuffId.Pet3_JiaSu;\r\n        buff.buff_value=[this.pet_data.getSkillValue1(PetSkillType.Active)];\r\n        buff.remain_time=this.pet_data.getSkillValue2(PetSkillType.Active);\r\n        buff.buff_type=BuffType.Gain;\r\n        let hero=GameManager.getInstance().getHero(this.hero_type);\r\n        let buffTimer=hero.addBuff(buff);\r\n        buffTimer.addDestroyListen(this.onBuffDestroy.bind(this));\r\n        let pos=hero.node.getPosition();\r\n        this.buff_node_back=GameEffectsManager.getInstance().createGameEffectForParent(GameEffectId.pet3_skill_back,pos,cc.find(\"Canvas/Hero_Shadow_Root\"));\r\n        this.buff_node_front=GameEffectsManager.getInstance().createGameEffectForParent(GameEffectId.pet3_skill_front,pos,cc.find(\"Canvas/Pet_Root\"));\r\n    }\r\n\r\n    onBuffDestroy(buff:BuffData){\r\n        GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.pet3_skill_back,this.buff_node_back);\r\n        GameEffectsManager.getInstance().destroyGameEffectById(GameEffectId.pet3_skill_front,this.buff_node_front);\r\n    }\r\n\r\n    update(dt:number){\r\n        if(GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n        {\r\n            return;\r\n        }\r\n        this.checkSkill(dt);\r\n    }\r\n\r\n    checkSkill(dt:number){\r\n        this.cd_time-=dt;\r\n        if(this.cd_time<0){\r\n            this.cd_time=0;\r\n        }\r\n    }\r\n}\r\n"]}