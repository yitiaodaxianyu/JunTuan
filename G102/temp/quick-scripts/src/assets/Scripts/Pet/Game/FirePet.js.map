{"version":3,"sources":["assets\\Scripts\\Pet\\Game\\FirePet.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,6CAA4C;AAC5C,oEAAiF;AACjF,iDAA4C;AAC5C,iDAA4C;AAC5C,0CAA4C;AAC5C,6CAAwC;AACxC,6BAAwB;AAElB,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAqC,2BAAG;IAAxC;;IAgCA,CAAC;IA7BG,wBAAM,GAAN;QACI,iBAAM,MAAM,WAAE,CAAC;QACf,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACxC,CAAC;IAED,0BAAQ,GAAR,UAAS,OAAe;QACpB,IAAI,GAAG,GAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QAChC,IAAI,SAAS,GAAC,OAAO,CAAC,YAAY,CAAC,iBAAO,CAAC,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACpE,IAAI,GAAG,GAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QAC5C,IAAI,WAAW,GAAC,uCAAkB,CAAC,WAAW,EAAE,CAAC,oBAAoB,CAAC,iCAAY,CAAC,WAAW,EAAC,GAAG,CAAC,CAAC;QACpG,IAAI,OAAO,GAAC,WAAW,CAAC,YAAY,CAAC,qBAAW,CAAC,CAAC;QAClD,OAAO,CAAC,IAAI,CAAC,iCAAY,CAAC,WAAW,EAAC,IAAI,EAAC,GAAG,EAAC,iBAAM,aAAa,YAAC,IAAI,EAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,wBAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC5H,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACvC,CAAC;IAED,wBAAM,GAAN,UAAO,EAAS;QACZ,IAAG,qBAAW,CAAC,WAAW,EAAE,CAAC,cAAc,IAAE,qBAAS,CAAC,YAAY,EACnE;YACI,OAAO;SACV;QACD,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;IACxB,CAAC;IAED,4BAAU,GAAV,UAAW,EAAS;QAChB,IAAI,CAAC,OAAO,IAAE,EAAE,CAAC;QACjB,IAAG,IAAI,CAAC,OAAO,GAAC,CAAC,EAAC;YACd,IAAI,CAAC,OAAO,GAAC,CAAC,CAAC;SAClB;IACL,CAAC;IA/BgB,OAAO;QAD3B,OAAO;OACa,OAAO,CAgC3B;IAAD,cAAC;CAhCD,AAgCC,CAhCoC,aAAG,GAgCvC;kBAhCoB,OAAO","file":"","sourceRoot":"/","sourcesContent":["\r\n\r\nimport { GameState } from \"../../Constants\";\r\nimport { GameEffectId, GameEffectsManager } from \"../../Game/GameEffectsManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport Monster from \"../../Monster/Monster\";\r\nimport { PetSkillType } from \"../PetConfig\";\r\nimport FireBullect from \"./FireBullect\";\r\nimport Pet from \"./Pet\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class FirePet extends Pet {\r\n\r\n\r\n    onLoad(): void {\r\n        super.onLoad();\r\n        this.addAttackListen(this.onAttack);\r\n    }\r\n\r\n    onAttack(monster:cc.Node){\r\n        let pos=this.node.getPosition();\r\n        let offsetPos=monster.getComponent(Monster).getCenterPos().sub(pos);\r\n        let dir=Math.atan2(offsetPos.y,offsetPos.x);\r\n        let fireBullect=GameEffectsManager.getInstance().createGameEffectById(GameEffectId.pet2_attack,pos);\r\n        let fireBts=fireBullect.getComponent(FireBullect);\r\n        fireBts.init(GameEffectId.pet2_attack,1000,dir,super.getGongJiData(true,this.pet_data.getSkillValue2(PetSkillType.Active)));\r\n        fireBts.initPetData(this.pet_data);\r\n    }\r\n    \r\n    update(dt:number){\r\n        if(GameManager.getInstance().cur_game_state!=GameState.Game_Playing)\r\n        {\r\n            return;\r\n        }\r\n        this.checkSkill(dt);\r\n    }\r\n\r\n    checkSkill(dt:number){\r\n        this.cd_time-=dt;\r\n        if(this.cd_time<0){\r\n            this.cd_time=0;\r\n        }\r\n    }\r\n}\r\n"]}