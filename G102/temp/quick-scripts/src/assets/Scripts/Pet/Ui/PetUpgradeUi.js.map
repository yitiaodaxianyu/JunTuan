{"version":3,"sources":["assets\\Scripts\\Pet\\Ui\\PetUpgradeUi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ApkManager from \"../../Ads/ApkManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { Follow_Type } from \"../../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../../multiLanguage/FollowManager\";\r\nimport { LanguageIndex } from \"../../multiLanguage/LanguageConstants\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\nimport { PropId } from \"../../Prop/PropConfig\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport MyTool from \"../../Tools/MyTool\";\r\nimport UIComponent from \"../../UI/UIComponent\";\r\nimport { UiAction } from \"../../UI/UiInterface\";\r\nimport { UIManager } from \"../../UI/UIManager\";\r\nimport { PetInfo } from \"../PetConfig\";\r\nimport { PetManager } from \"../PetManager\";\r\nimport { UILayerLevel, UIPath } from \"../../UI/UIConfig\";\r\nimport AtrributeUi from \"../../UI/home/AtrributeUi\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PetUpgradeUi extends UIComponent {\r\n\r\n    @property(cc.SpriteAtlas)\r\n    pet_upgrade_ui : cc.SpriteAtlas = null;\r\n\r\n    private pet_info:PetInfo = null;\r\n\r\n    init(uiAc: UiAction): void {\r\n        super.init(uiAc)\r\n\r\n    }\r\n\r\n    initUi(petInfo:PetInfo){\r\n        this.pet_info = petInfo;\r\n        let spRoot = this.node.getChildByName(\"spRoot\");\r\n        let canvas = cc.find(\"Canvas\")\r\n        this.node.getChildByName(\"top\").getComponent(cc.Widget).target = canvas;\r\n        this.node.getChildByName(\"bottom\").getComponent(cc.Widget).target = canvas;\r\n        this.loadPrefab(\"\" + this.pet_info.pet_id,spRoot);  \r\n        this.refreshUi();\r\n    }\r\n\r\n    refreshUi(){\r\n        // let formData = SpiritMessageManager.getInstance().getJsonSpiritMessage(this.pet_info.pet_id);\r\n        let top = this.node.getChildByName(\"top\");\r\n        let bottom = this.node.getChildByName(\"bottom\");\r\n        // PetManager.getInstance().loadPetData(this.pet_info);\r\n        // let data = PetManager.getInstance().getPetData(this.pet_info);\r\n        // let upData = PetManager.getInstance().checkUpgrade(this.pet_info);\r\n        // top.getChildByName(\"name1\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(formData.SpiritName);\r\n        // top.getChildByName(\"quality\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(SpiritQualityMessageManager.getInstance().getSpiritQualityName(this.pet_info.pet_quality))\r\n        // top.getChildByName(\"qualityIcon\").getComponent(cc.Sprite).spriteFrame = this.pet_upgrade_ui.getSpriteFrame(\"Sprite_Up_Quality_\"+SpiritQualityMessageManager.getInstance().getSpiritQualityframe(this.pet_info.pet_quality));\r\n        top.getChildByName(\"topCoinNum\").getComponent(cc.Label).string = MyTool.getCoinDanwei(PropManager.getInstance().getPropNum(PropId.Coin),1) ;\r\n        top.getChildByName(\"topGemNum\").getComponent(cc.Label).string = MyTool.getCoinDanwei(PropManager.getInstance().getPropNum(PropId.AnimalFood),1);\r\n        bottom.getChildByName(\"upgradeBtn\").getComponentInChildren(cc.Label).string = LanguageManager.getInstance().getStrByTextId(640004);\r\n        bottom.getChildByName(\"advanceLabel\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(640005);\r\n        bottom.getChildByName(\"awakeningLabel\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(640006);\r\n        bottom.getChildByName(\"reduction\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(640007);\r\n        bottom.getChildByName(\"discarded\").getComponent(cc.Label).string = LanguageManager.getInstance().getStrByTextId(640008);\r\n\r\n        // let skillNum = SpiritMessageManager.getInstance().getSkillNum(this.pet_info.pet_id)\r\n        // for(let i = 1;i< 5;i++){\r\n        //     let skillLevel = 1;\r\n        //     if(i == 1){\r\n        //         skillLevel = SpiritLevelUpManager.getInstance().getPassiveSkillLevel_1(this.pet_info.pet_level);\r\n        //     }else if(i == 2){\r\n        //         skillLevel = SpiritLevelUpManager.getInstance().getActiveSkillLevel(this.pet_info.pet_level);\r\n        //     }else if(i == 3){\r\n        //         skillLevel = SpiritLevelUpManager.getInstance().getPassiveSkillLevel_2(this.pet_info.pet_level);\r\n        //     }else if(i == 4){\r\n        //         // skillLevel = SpiritLevelUpManager.getInstance().getActiveSkillLevel(this.pet_info.pet_level);\r\n        //     }\r\n        //     if( skillNum>= i){\r\n        //         this.node.getChildByName(\"skillLevelNum\" + i).getComponent(cc.Label).string = \"\" + PetManager.getInstance().getSkillLevel(this.pet_info,i);\r\n        //         let skillIcon = this.node.getChildByName(\"skillIcon\" + i)\r\n        //         skillIcon.getComponent(cc.Sprite).spriteFrame = this.pet_upgrade_ui.getSpriteFrame(\"Sprite_\"+ this.pet_info.pet_id +\"_Skill_\" + i);\r\n        //         skillIcon.active = true;\r\n        //     }else{\r\n        //         this.node.getChildByName(\"skillBg\" + i).active = false;\r\n        //         this.node.getChildByName(\"skillLevelNum\" + i).active = false;\r\n        //         this.node.getChildByName(\"skillLevel\" + i).active = false;\r\n        //         this.node.getChildByName(\"skillIcon\" + i).active = false;\r\n        //     }\r\n        // }\r\n        bottom.getChildByName(\"typeIcon\").getComponent(cc.Sprite).spriteFrame = this.pet_upgrade_ui.getSpriteFrame(\"Sprite_Hero_\" + this.pet_info.hero_type);\r\n        // bottom.getChildByName(\"fightNum\").getComponent(cc.Label).string = MyTool.numberFormat(PetManager.getInstance().getPetZhanli(this.pet_info),2);\r\n        bottom.getChildByName(\"levelNum\").getComponent(cc.Label).string = \"LV.\" + String(this.pet_info.pet_level);\r\n        // bottom.getChildByName(\"hpLabel\").getComponent(cc.Label).string = MyTool.numberFormat(data.Health,2);\r\n        // bottom.getChildByName(\"damageLabel\").getComponent(cc.Label).string = MyTool.numberFormat(data.Attack,2);\r\n        // bottom.getChildByName(\"defenseLabel\").getComponent(cc.Label).string = MyTool.numberFormat(data.Defense,2);\r\n        // bottom.getChildByName(\"bottonCoinNum1\").color = upData.is_coin ? cc.color(180,188,211) : cc.Color.RED;\r\n        // bottom.getChildByName(\"bottonCoinNum2\").color = upData.is_food ? cc.color(180,188,211) : cc.Color.RED;\r\n        // bottom.getChildByName(\"bottonCoinNum1\").getComponent(cc.Label).string = MyTool.getCoinDanwei(PropManager.getInstance().getPropNum(PropId.Coin),1) + \"/\" + MyTool.getCoinDanwei(upData.cost_coin,1);\r\n        // bottom.getChildByName(\"bottonCoinNum2\").getComponent(cc.Label).string = MyTool.getCoinDanwei(PropManager.getInstance().getPropNum(PropId.AnimalFood),1) + \"/\" + MyTool.getCoinDanwei(upData.cost_food,1);\r\n        // if(!upData.is_level){\r\n        //     let upgradeBtn = bottom.getChildByName(\"upgradeBtn\");\r\n        //     upgradeBtn.getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"))\r\n        //     upgradeBtn.getComponentInChildren(cc.Label).string = LanguageManager.getInstance().getString(LanguageIndex.MAX);\r\n        // }\r\n    }\r\n\r\n    onSkillClick(e,skillSlot:number){\r\n        skillSlot = Number(skillSlot)\r\n        // switch(skillSlot){\r\n        //     case 1:\r\n        //         GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(SpiritMessageManager.getInstance().getPassiveSkillsIntro_1(this.pet_info.pet_id)));\r\n        //         break;\r\n        //     case 2:\r\n        //         GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(SpiritMessageManager.getInstance().getActiveSkillsIntro(this.pet_info.pet_id)));\r\n        //         break;\r\n        //     case 3:\r\n        //         GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(SpiritMessageManager.getInstance().getPassiveSkillsIntro_2(this.pet_info.pet_id)));\r\n        //         break;\r\n        //     case 4:\r\n\r\n        //         break;\r\n        // }\r\n    }\r\n\r\n    onUpgradeBtnClick(){\r\n        let gm = GameManager.getInstance();\r\n        gm.sound_manager.playSound(SoundIndex.click);\r\n        // FollowManager.getInstance().followEvent(Follow_Type.升级按钮点击数);\r\n        // let data = PetManager.getInstance().checkUpgrade(this.pet_info);\r\n        // if(data.is_can_up){\r\n        //     FollowManager.getInstance().followEvent(Follow_Type.升级宠物总次数);\r\n        //     FollowManager.getInstance().followEvent(Follow_Type.不同宠物的升级次数 + this.pet_info.pet_id);\r\n        //     PropManager.getInstance().changePropNum(PropId.Coin,-data.cost_coin);\r\n        //     PropManager.getInstance().changePropNum(PropId.AnimalFood,-data.cost_food);\r\n        //     PetManager.getInstance().addPetLevel(this.pet_info,1);\r\n        //     this.refreshUi();\r\n        //     // UIManager.getInstance().showShengJi0(this.node.getChildByName(\"effect1\"),cc.v2(0,0));\r\n        //     // UIManager.getInstance().showShengJi1(this.node.getChildByName(\"effect2\"),cc.v2(0,0));\r\n        //     UIManager.getInstance().showZhanDouli(this.node.getChildByName(\"fightNum\"),cc.v2(0,0));\r\n        // }else{\r\n        //     if(!data.is_level){\r\n        //         let upgradeBtn = this.node.getChildByName(\"bottom\").getChildByName(\"upgradeBtn\");\r\n        //         upgradeBtn.getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"))\r\n        //         upgradeBtn.getComponentInChildren(cc.Label).string = LanguageManager.getInstance().getString(LanguageIndex.MAX);\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    onAttributeBtnClick(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        // UIManager.getInstance().showAttributeUi(null,null,this.pet_info);\r\n        UIManager.getInstance().showUiDialog(UIPath.Attribute,UILayerLevel.One,{onCompleted:(uiNode)=> {\r\n            uiNode.getComponent(AtrributeUi).init(null);\r\n            uiNode.getComponent(AtrributeUi).initPetInfo(this.pet_info);\r\n        },})\r\n    }\r\n\r\n    onClickResetBtn(){\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        if(this.pet_info.pet_level <= 1) return;\r\n        UIManager.getInstance().showPetResetUi({\r\n            onClose:(()=>{\r\n                this.refreshUi();\r\n            }).bind(this)\r\n        },this.pet_info);\r\n    }\r\n\r\n    clickBtnClose()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        // 暂时在关闭界面时写入整个宠物数组\r\n        // PetManager.getInstance().saveAllPetList();\r\n        this.destroySelf();\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n    }\r\n\r\n\r\n    loadPrefab(petId: string,parent:cc.Node) {\r\n        cc.resources.load(\"pet/ui/pet_\"+petId, cc.Prefab, (error: Error, assets: cc.Prefab) => {\r\n            if (error) {\r\n                cc.log(error);\r\n                return;\r\n            }\r\n            let node = cc.instantiate(assets)\r\n            node.parent = parent;\r\n            let shadow = node.getChildByName(\"Sprite_Up_Shadow\");\r\n            shadow.parent = parent;\r\n            shadow.scale = node.scale;\r\n            node.zIndex = 1;\r\n            node.setPosition(cc.v2(0,0));\r\n            // node.scale = 0.7;\r\n            let s = node.getComponent(sp.Skeleton);\r\n            s.setAnimation(0,\"Side_Idle\",true);\r\n        });\r\n    }\r\n\r\n}\r\n"]}