{"version":3,"sources":["assets\\Scripts\\Pet\\Ui\\PetAdvanceUi.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mDAA8C;AAC9C,iDAA4C;AAG5C,uEAAkE;AAGlE,6DAAwD;AAExD,oDAA+C;AAUzC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA0C,gCAAW;IAArD;QAAA,qEA2mBC;QAxmBI,oBAAc,GAAkB,IAAI,CAAC;QAErC,UAAI,GAAa,IAAI,CAAC;QAEd,cAAQ,GAAc,IAAI,CAAC;QAE3B,gBAAU,GAAsB,IAAI,CAAC;QACrC,qBAAe,GAAsB,IAAI,CAAC;QAGnD,wDAAwD;QAE/C,iBAAW,GAAW,IAAI,CAAC;QAC3B,iBAAW,GAAW,IAAI,CAAC;QAC3B,iBAAW,GAAW,IAAI,CAAC;;IA0lBxC,CAAC;IAxlBG,WAAW;IACX,uBAAuB;IACvB,wBAAwB;IACxB,IAAI;IAEL,2BAAI,GAAJ,UAAK,IAAc;QAClB,uBAAuB;QACvB,yBAAyB;QACzB,uBAAuB;QACvB,qCAAqC;QACrC,8EAA8E;QAC9E,kFAAkF;QAClF,kEAAkE;IACnE,CAAC;IAED,gCAAS,GAAT;QACK,wBAAwB;QACxB,4CAA4C;QAC5C,8IAA8I;QAC9I,4IAA4I;QAC5I,gCAAgC;QAChC,uDAAuD;QACvD,sCAAsC;QACtC,gEAAgE;QAChE,yEAAyE;QACzE,4DAA4D;QAC5D,QAAQ;QAER,6CAA6C;QAC7C,0GAA0G;QAC1G,0BAA0B;QAC1B,gFAAgF;QAChF,0EAA0E;QAC1E,sGAAsG;QACtG,sEAAsE;QACtE,oDAAoD;QACpD,yGAAyG;QACzG,uEAAuE;QACvE,4EAA4E;QAC5E,SAAS;QACT,sEAAsE;QACtE,uDAAuD;QACvD,6BAA6B;QAC7B,kCAAkC;QAElC,iDAAiD;QACjD,IAAI;QACJ,mDAAmD;QACnD,6CAA6C;QAC7C,6CAA6C;QAC7C,gCAAgC;QAChC,yEAAyE;QACzE,oCAAoC;QACpC,6EAA6E;QAC7E,QAAQ;QACR,YAAY;QACZ,kDAAkD;QAClD,sGAAsG;QACtG,iBAAiB;QACjB,wGAAwG;QACxG,YAAY;QACZ,QAAQ;QAER,oCAAoC;QACpC,6EAA6E;QAC7E,QAAQ;QACR,YAAY;QACZ,kDAAkD;QAClD,sGAAsG;QACtG,iBAAiB;QACjB,wGAAwG;QACxG,YAAY;QACZ,QAAQ;QACR,SAAS;QACT,oCAAoC;QACpC,6EAA6E;QAE7E,wCAAwC;QACxC,iFAAiF;QACjF,YAAY;QACZ,gBAAgB;QAChB,sDAAsD;QACtD,0GAA0G;QAC1G,qBAAqB;QACrB,4GAA4G;QAC5G,gBAAgB;QAChB,YAAY;QACZ,QAAQ;QACR,IAAI;IACT,CAAC;IAED,oCAAa,GAAb;QAEK,mDAAmD;QACnD,qFAAqF;QACrF,+BAA+B;QAE/B,wCAAwC;QACxC,6DAA6D;QAC7D,8CAA8C;QAC9C,mDAAmD;QACnD,4BAA4B;QAC5B,iCAAiC;QACjC,iCAAiC;QACjC,iCAAiC;QACjC,sDAAsD;QACtD,uDAAuD;QACvD,6BAA6B;QAC7B,uDAAuD;QACvD,IAAI;QACJ,6BAA6B;QAC7B,uDAAuD;QACvD,IAAI;QACJ,qDAAqD;QACrD,+CAA+C;QAC/C,kDAAkD;QAClD,4CAA4C;QAC5C,qDAAqD;QACrD,kDAAkD;QAClD,4BAA4B;QAC5B,mCAAmC;QACnC,qHAAqH;QACrH,oFAAoF;QACpF,oBAAoB;QACpB,8FAA8F;QAC9F,eAAe;QACf,aAAa;QACb,wEAAwE;QACxE,uCAAuC;QACvC,6GAA6G;QAC7G,kCAAkC;QAClC,kCAAkC;QAClC,iBAAiB;QACjB,8CAA8C;QAC9C,kFAAkF;QAClF,+CAA+C;QAC/C,uHAAuH;QACvH,0CAA0C;QAC1C,0CAA0C;QAC1C,oBAAoB;QACpB,yBAAyB;QACzB,sGAAsG;QACtG,0DAA0D;QAC1D,8FAA8F;QAC9F,2DAA2D;QAC3D,mIAAmI;QACnI,sDAAsD;QACtD,sDAAsD;QACtD,0EAA0E;QAC1E,+DAA+D;QAC/D,0IAA0I;QAC1I,0DAA0D;QAC1D,0FAA0F;QAC1F,oCAAoC;QACpC,2DAA2D;QAC3D,4CAA4C;QAC5C,qCAAqC;QACrC,0DAA0D;QAC1D,6HAA6H;QAC7H,4DAA4D;QAC5D,6HAA6H;QAC7H,qDAAqD;QACrD,kDAAkD;QAClD,qDAAqD;QACrD,2DAA2D;QAC3D,4CAA4C;QAC5C,gCAAgC;QAChC,4BAA4B;QAC5B,gCAAgC;QAChC,sEAAsE;QACtE,0CAA0C;QAC1C,sFAAsF;QACtF,wGAAwG;QACxG,kEAAkE;QAClE,qIAAqI;QACrI,qEAAqE;QACrE,uIAAuI;QACvI,8DAA8D;QAC9D,6DAA6D;QAC7D,6DAA6D;QAC7D,4GAA4G;QAC5G,uCAAuC;QACvC,2CAA2C;QAC3C,kEAAkE;QAClE,qIAAqI;QACrI,oEAAoE;QACpE,qIAAqI;QACrI,6DAA6D;QAC7D,0DAA0D;QAC1D,6DAA6D;QAC7D,uCAAuC;QACvC,oCAAoC;QACpC,wCAAwC;QACxC,8DAA8D;QAC9D,iIAAiI;QACjI,gEAAgE;QAChE,iIAAiI;QACjI,yDAAyD;QACzD,sDAAsD;QACtD,yDAAyD;QACzD,oCAAoC;QACpC,qCAAqC;QACrC,2CAA2C;QAC3C,uGAAuG;QACvG,8DAA8D;QAC9D,iIAAiI;QACjI,iEAAiE;QACjE,mIAAmI;QACnI,0DAA0D;QAC1D,yDAAyD;QACzD,yDAAyD;QACzD,yGAAyG;QACzG,qCAAqC;QACrC,0EAA0E;QAC1E,6GAA6G;QAC7G,sEAAsE;QACtE,8IAA8I;QAC9I,8DAA8D;QAC9D,iEAAiE;QACjE,2CAA2C;QAC3C,uCAAuC;QACvC,wCAAwC;QACxC,8DAA8D;QAC9D,iIAAiI;QACjI,gEAAgE;QAChE,iIAAiI;QACjI,yDAAyD;QACzD,sDAAsD;QACtD,yDAAyD;QACzD,oCAAoC;QACpC,gCAAgC;QAChC,4BAA4B;QAC5B,wBAAwB;QACxB,4BAA4B;QAC5B,kDAAkD;QAClD,qHAAqH;QACrH,oDAAoD;QACpD,qHAAqH;QACrH,6CAA6C;QAC7C,0CAA0C;QAC1C,6CAA6C;QAC7C,mDAAmD;QACnD,oCAAoC;QACpC,wBAAwB;QACxB,oBAAoB;QACpB,gBAAgB;QAChB,oBAAoB;QACpB,gCAAgC;QAChC,0DAA0D;QAC1D,8BAA8B;QAC9B,0EAA0E;QAC1E,4FAA4F;QAC5F,sDAAsD;QACtD,yHAAyH;QACzH,yDAAyD;QACzD,2HAA2H;QAC3H,kDAAkD;QAClD,iDAAiD;QACjD,iDAAiD;QACjD,iGAAiG;QACjG,2BAA2B;QAC3B,+BAA+B;QAC/B,sDAAsD;QACtD,yHAAyH;QACzH,wDAAwD;QACxD,yHAAyH;QACzH,iDAAiD;QACjD,8CAA8C;QAC9C,iDAAiD;QACjD,2BAA2B;QAC3B,wBAAwB;QACxB,4BAA4B;QAC5B,kDAAkD;QAClD,qHAAqH;QACrH,oDAAoD;QACpD,qHAAqH;QACrH,6CAA6C;QAC7C,0CAA0C;QAC1C,6CAA6C;QAC7C,wBAAwB;QACxB,yBAAyB;QACzB,+BAA+B;QAC/B,2FAA2F;QAC3F,kDAAkD;QAClD,qHAAqH;QACrH,qDAAqD;QACrD,uHAAuH;QACvH,8CAA8C;QAC9C,6CAA6C;QAC7C,6CAA6C;QAC7C,6FAA6F;QAC7F,wBAAwB;QACxB,4BAA4B;QAC5B,kDAAkD;QAClD,qHAAqH;QACrH,oDAAoD;QACpD,qHAAqH;QACrH,6CAA6C;QAC7C,0CAA0C;QAC1C,6CAA6C;QAC7C,wBAAwB;QACxB,oBAAoB;QACpB,gBAAgB;QAChB,YAAY;QACZ,QAAQ;QACR,8CAA8C;QAC9C,mCAAmC;QACnC,8GAA8G;QAC9G,8BAA8B;QAC9B,8DAA8D;QAC9D,QAAQ;QACR,+BAA+B;QAC/B,IAAI;IACT,CAAC;IAED,+BAAQ,GAAR;QACK,wCAAwC;QACxC,6DAA6D;QAC7D,8CAA8C;QAC9C,mDAAmD;QACnD,4BAA4B;QAC5B,mDAAmD;IACxD,CAAC;IAEA,oCAAa,GAAb,UAAc,CAAC,EAAE,GAAW;QACxB,uEAAuE;QACvE,qBAAqB;QACrB,mDAAmD;QACnD,iBAAiB;QACjB,cAAc;QACd,qDAAqD;QACrD,qDAAqD;QACrD,kCAAkC;QAClC,mCAAmC;QACnC,mCAAmC;QACnC,mCAAmC;QACnC,iBAAiB;QACjB,cAAc;QACd,mCAAmC;QACnC,mCAAmC;QACnC,iBAAiB;QACjB,cAAc;QACd,mCAAmC;QACnC,iBAAiB;QAEjB,IAAI;QACJ,oBAAoB;IACzB,CAAC;IAGD,qCAAc,GAAd,UAAe,CAAqB;QAC/B,uEAAuE;QACvE,mDAAmD;QACnD,+BAA+B;QAC/B,gBAAgB;QAChB,kEAAkE;QAClE,+HAA+H;QAC/H,sFAAsF;QACtF,oDAAoD;QACpD,qDAAqD;QACrD,QAAQ;QACR,sFAAsF;QACtF,qDAAqD;QACrD,oDAAoD;QACpD,QAAQ;QACR,SAAS;QACT,gBAAgB;QAChB,oCAAoC;QACpC,sEAAsE;QACtE,aAAa;QACb,wCAAwC;QACxC,sEAAsE;QACtE,YAAY;QACZ,QAAQ;QACR,IAAI;QACJ,oBAAoB;IACzB,CAAC;IAED,+CAAwB,GAAxB;QACK,qBAAW,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,yBAAe,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;IACjG,CAAC;IAED,iCAAU,GAAV,UAAW,KAAa,EAAC,MAAc;QAClC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,GAAC,KAAK,EAAE,EAAE,CAAC,MAAM,EAAE,UAAC,KAAY,EAAE,MAAiB;YAC9E,IAAI,KAAK,EAAE;gBACP,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBACd,OAAO;aACV;YACD,IAAI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;YACjC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;YACrD,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC;YACvB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YAC1B,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YAChB,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;YACvC,CAAC,CAAC,YAAY,CAAC,CAAC,EAAC,WAAW,EAAC,IAAI,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,wCAAiB,GAAjB;QACI,sCAAsC;QACtC,0EAA0E;QAC1E,0BAA0B;QAC1B,uDAAuD;QACvD,6DAA6D;QAC7D,8FAA8F;QAC9F,8DAA8D;QAC9D,0BAA0B;QAC1B,qDAAqD;QACrD,2DAA2D;QAC3D,+GAA+G;QAC/G,QAAQ;QACR,YAAY;QACZ,6DAA6D;QAC7D,QAAQ;QACR,mDAAmD;QACnD,8GAA8G;QAC9G,QAAQ;QACR,YAAY;QACZ,wDAAwD;QACxD,QAAQ;QACR,KAAK;IACT,CAAC;IAED,sCAAe,GAAf,UAAgB,IAAY;QACxB,uEAAuE;QACvE,wCAAwC;QACxC,2GAA2G;QAC3G,wGAAwG;QACxG,+BAA+B;QAC/B,6GAA6G;QAC7G,0BAA0B;QAC1B,WAAW;QACX,2EAA2E;QAC3E,2KAA2K;QAC3K,2BAA2B;QAC3B,YAAY;QACZ,QAAQ;QACR,oBAAoB;QACpB,IAAI;QACJ,QAAQ;QACR,2FAA2F;QAC3F,0BAA0B;QAC1B,WAAW;QACX,8DAA8D;QAC9D,oKAAoK;QACpK,2BAA2B;QAC3B,YAAY;QACZ,QAAQ;QACR,IAAI;QACA,OAAO,KAAK,CAAC;IACrB,CAAC;IACD,QAAQ;IACR,kCAAW,GAAX,UAAY,CAAS,EAAC,CAAS;QAC3B,IAAI,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;QACjC,IAAG,EAAE,EAAC;YACF,IAAI,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAA;YAChC,IAAG,EAAE,EAAC;gBACF,OAAO,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC;aACpC;YACD,OAAO,CAAC,CAAC;SACZ;aAAI;YACD,OAAO,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC;SACpC;IACL,CAAC;IAED,oCAAa,GAAb,UAAc,IAAc,EAAC,MAAc;QACvC,IAAI,QAAQ,GAAc,EAAE,CAAC;QAC7B,KAAI,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC;YAC9B,IAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,EAAC;gBACvC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aAC1B;SACJ;QACD,OAAO,QAAQ,CAAC;IACpB,CAAC;IAED,wCAAiB,GAAjB;QACI,uEAAuE;QACvE,+BAA+B;QAC/B,sFAAsF;QACtF,oEAAoE;QACpE,+DAA+D;QAC/D,iEAAiE;QACjE,oEAAoE;QACpE,oEAAoE;QACpE,sGAAsG;QACtG,yDAAyD;QACzD,yDAAyD;QACzD,yDAAyD;QACzD,yDAAyD;QACzD,8FAA8F;QAE9F,sGAAsG;QACtG,6BAA6B;QAC7B,8FAA8F;QAC9F,gCAAgC;QAChC,6BAA6B;QAC7B,8FAA8F;QAC9F,gCAAgC;QAChC,6BAA6B;QAC7B,8FAA8F;QAC9F,gCAAgC;QAChC,mBAAmB;QAEnB,sGAAsG;QACtG,6BAA6B;QAC7B,8FAA8F;QAC9F,gCAAgC;QAChC,6BAA6B;QAC7B,8FAA8F;QAC9F,gCAAgC;QAChC,6BAA6B;QAC7B,8FAA8F;QAC9F,gCAAgC;QAChC,mBAAmB;QAEnB,sHAAsH;QACtH,sCAAsC;QACtC,uCAAuC;QACvC,uCAAuC;QACvC,uCAAuC;QACvC,kCAAkC;QAClC,gCAAgC;QAChC,iEAAiE;QACjE,wFAAwF;QACxF,6EAA6E;QAC7E,sBAAsB;QACtB,YAAY;QACZ,QAAQ;QACR,sFAAsF;QACtF,wCAAwC;QACxC,+DAA+D;QAC/D,iEAAiE;QACjE,oEAAoE;QACpE,sGAAsG;QACtG,yDAAyD;QACzD,yDAAyD;QACzD,yDAAyD;QACzD,yDAAyD;QACzD,8FAA8F;QAE9F,sGAAsG;QACtG,6BAA6B;QAC7B,8FAA8F;QAC9F,gCAAgC;QAChC,6BAA6B;QAC7B,8FAA8F;QAC9F,gCAAgC;QAChC,6BAA6B;QAC7B,8FAA8F;QAC9F,gCAAgC;QAChC,mBAAmB;QAEnB,sHAAsH;QACtH,sCAAsC;QACtC,uCAAuC;QACvC,uCAAuC;QACvC,uCAAuC;QACvC,kCAAkC;QAClC,gCAAgC;QAChC,iEAAiE;QACjE,wFAAwF;QACxF,6EAA6E;QAC7E,YAAY;QACZ,QAAQ;QACR,iDAAiD;QACjD,uDAAuD;QACvD,0EAA0E;QAE1E,mBAAmB;QACnB,oBAAoB;QACpB,+CAA+C;QAE/C,mBAAmB;QACnB,eAAe;QACf,WAAW;QACX,eAAe;QACf,uDAAuD;QACvD,0EAA0E;QAE1E,mBAAmB;QACnB,eAAe;QACf,WAAW;QACX,IAAI;IACR,CAAC;IAED,oCAAa,GAAb;QAEI,qBAAW,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,2BAAU,CAAC,KAAK,CAAC,CAAC;QACpE,IAAI,CAAC,WAAW,EAAE,CAAC;IACvB,CAAC;IAED,kCAAW,GAAX;QAEI,iBAAM,OAAO,WAAE,CAAC;QAChB,oBAAU,CAAC,WAAW,EAAE,CAAC,WAAW,EAAE,CAAC;QACvC,oFAAoF;IACxF,CAAC;IAtmBA;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;wDACY;IAErC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;8CACE;IALN,YAAY;QADhC,OAAO;OACa,YAAY,CA2mBhC;IAAD,mBAAC;CA3mBD,AA2mBC,CA3mByC,qBAAW,GA2mBpD;kBA3mBoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import ApkManager from \"../../Ads/ApkManager\";\r\nimport GameManager from \"../../GameManager\";\r\nimport { Follow_Type } from \"../../multiLanguage/FollowConstants\";\r\nimport FollowManager from \"../../multiLanguage/FollowManager\";\r\nimport LanguageManager from \"../../multiLanguage/LanguageManager\";\r\nimport { PropId } from \"../../Prop/PropConfig\";\r\nimport { PropManager } from \"../../Prop/PropManager\";\r\nimport { SoundIndex } from \"../../Sound/AudioConstants\";\r\nimport MyTool from \"../../Tools/MyTool\";\r\nimport UIComponent from \"../../UI/UIComponent\";\r\nimport { UiAction } from \"../../UI/UiInterface\";\r\nimport { UIManager } from \"../../UI/UIManager\";\r\n// import { SpiritMessageManager } from \"../Data/SpiritMessage\";\r\n// import { JsonSpiritQualityAdvanced, SpiritQualityAdvancedManager } from \"../Data/SpiritQualityAdvanced\";\r\nimport { PetInfo } from \"../PetConfig\";\r\nimport { PetManager } from \"../PetManager\";\r\nimport BtnPet from \"./BtnPet\";\r\nimport PetItem from \"./PetItem\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PetAdvanceUi extends UIComponent {\r\n\r\n     @property(cc.SpriteAtlas)\r\n     pet_advance_ui:cc.SpriteAtlas = null;\r\n     @property(cc.Prefab)\r\n     item:cc.Prefab = null;\r\n\r\n     private all_list: PetInfo[] = null;\r\n\r\n     private pet_id_num:Map<string,number> = null;\r\n     private pet_quality_num:Map<number,number> = null;\r\n\r\n\r\n    //  private targetInfo:JsonSpiritQualityAdvanced = null;\r\n\r\n     private chooseItem1:PetInfo = null;\r\n     private chooseItem2:PetInfo = null;\r\n     private chooseItem3:PetInfo = null;\r\n\r\n    // start(){\r\n    //     this.sortList();\r\n    //     this.refreshUi();\r\n    // }\r\n\r\n   init(uiAc: UiAction): void {\r\n    //    super.init(uiAc);\r\n    // //    this.sortList();\r\n    //    this.refreshUi();\r\n    //    let canvas = cc.find(\"Canvas\");\r\n    //    this.node.getChildByName(\"top\").getComponent(cc.Widget).target = canvas;\r\n    //    this.node.getChildByName(\"bottom\").getComponent(cc.Widget).target = canvas; \r\n    //    FollowManager.getInstance().followEvent(Follow_Type.圣堂打开次数);\r\n   }\r\n\r\n   refreshUi(){\r\n        // this.refreshScroll();\r\n        // let top = this.node.getChildByName(\"top\")\r\n        // top.getChildByName(\"topCoinNum\").getComponent(cc.Label).string = MyTool.getCoinDanwei(PropManager.getInstance().getPropNum(PropId.Coin),1);\r\n        // top.getChildByName(\"topGemNum\").getComponent(cc.Label).string = MyTool.getCoinDanwei(PropManager.getInstance().getPropNum(PropId.Gem),1);\r\n        // if(this.chooseItem1 != null){\r\n        //     let spRoot = this.node.getChildByName(\"spRoot\");\r\n        //     if(spRoot.children[0] == null){\r\n        //         this.loadPrefab(\"\" + this.chooseItem1.pet_id,spRoot);\r\n        //         // this.node.getChildByName(\"Sprite_Up_Shadow\").active = true;\r\n        //         this.node.getChildByName(\"spRoot\").active = true;\r\n        //     }\r\n\r\n        //     let info = top.getChildByName(\"info\");\r\n        //     // let formData = SpiritMessageManager.getInstance().getJsonSpiritMessage(this.chooseItem1.pet_id);\r\n        //     info.active = true;\r\n        //     info.getChildByName(\"qualityIcon\").getComponent(cc.Sprite).spriteFrame = \r\n        //     PetManager.getInstance().getSpriteFrameByName(\"Sprite_Up_Quality_\"+\r\n        //     SpiritQualityMessageManager.getInstance().getSpiritQualityframe(this.chooseItem1.pet_quality));\r\n        //     info.getChildByName(\"quality\").getComponent(cc.Label).string = \r\n        //     LanguageManager.getInstance().getStrByTextId(\r\n        //         SpiritQualityMessageManager.getInstance().getSpiritQualityName(this.chooseItem1.pet_quality));\r\n        //     // info.getChildByName(\"name1\").getComponent(cc.Label).string = \r\n        //     // LanguageManager.getInstance().getStrByTextId(formData.SpiritName);\r\n        // }else{\r\n        //     // this.node.getChildByName(\"Sprite_Up_Shadow\").active = false;\r\n        //     let spRoot = this.node.getChildByName(\"spRoot\");\r\n        //     spRoot.active = false;\r\n        //     spRoot.removeAllChildren();\r\n\r\n        //     top.getChildByName(\"info\").active = false;\r\n        // }\r\n        // let bottom = this.node.getChildByName(\"bottom\");\r\n        // let iconRoot1 = bottom.getChildByName(\"3\")\r\n        // let iconRoot2 = bottom.getChildByName(\"2\")\r\n        // if(iconRoot1.active == true){\r\n        //     iconRoot1.children[0].getComponent(BtnPet).init(this.chooseItem1);\r\n        //     if(this.chooseItem2 != null){\r\n        //         iconRoot1.children[1].getComponent(BtnPet).init(this.chooseItem2);\r\n        //     }\r\n        //     else{\r\n        //         if(this.targetInfo.CostItselfNum != 0){\r\n        //             iconRoot1.children[1].getComponent(BtnPet).showLock(this.targetInfo.CostItselfQuality);\r\n        //         }else{\r\n        //             iconRoot1.children[1].getComponent(BtnPet).showLock(this.targetInfo.CostSameTypeQuality);\r\n        //         }\r\n        //     }\r\n            \r\n        //     if(this.chooseItem3 != null){\r\n        //         iconRoot1.children[2].getComponent(BtnPet).init(this.chooseItem3);\r\n        //     }\r\n        //     else{\r\n        //         if(this.targetInfo.CostItselfNum != 0){\r\n        //             iconRoot1.children[2].getComponent(BtnPet).showLock(this.targetInfo.CostItselfQuality);\r\n        //         }else{\r\n        //             iconRoot1.children[2].getComponent(BtnPet).showLock(this.targetInfo.CostSameTypeQuality);\r\n        //         }\r\n        //     }\r\n        // }else{\r\n        //     if(iconRoot2.active == true){\r\n        //         iconRoot2.children[0].getComponent(BtnPet).init(this.chooseItem1);\r\n\r\n        //         if(this.chooseItem2 != null){\r\n        //             iconRoot2.children[1].getComponent(BtnPet).init(this.chooseItem2);\r\n        //         }\r\n        //         else{\r\n        //             if(this.targetInfo.CostItselfNum != 0){\r\n        //                 iconRoot2.children[1].getComponent(BtnPet).showLock(this.targetInfo.CostItselfQuality);\r\n        //             }else{\r\n        //                 iconRoot2.children[1].getComponent(BtnPet).showLock(this.targetInfo.CostSameTypeQuality);\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n   }\r\n    \r\n   refreshScroll(){\r\n        \r\n        // let bottom = this.node.getChildByName(\"bottom\");\r\n        // let content = bottom.getChildByName(\"scroll\").getComponent(cc.ScrollView).content;\r\n        // content.removeAllChildren();\r\n\r\n        // this.all_list = new Array<PetInfo>();\r\n        // this.all_list = PetManager.getInstance().getDeepPetList();\r\n        // this.pet_id_num = new Map<string,number>();\r\n        // this.pet_quality_num = new Map<number,number>();\r\n        // this.getPetAdvanceData();\r\n        // let tempList1: PetInfo[] = [];\r\n        // let tempList2: PetInfo[] = [];\r\n        // let tempList3: PetInfo[] = [];\r\n        // tempList1 = this.selectPetList(this.all_list,true);\r\n        // tempList2 = this.selectPetList(this.all_list,false);\r\n        // if(tempList1.length != 0){\r\n        //     PetManager.getInstance().sortPetList(tempList1);\r\n        // }\r\n        // if(tempList2.length != 0){\r\n        //     PetManager.getInstance().sortPetList(tempList2);\r\n        // }\r\n        // tempList3 = tempList3.concat(tempList1,tempList2);\r\n        // for (let i = 0; i < tempList3.length; i++) {\r\n        //     if(tempList3[i].pet_quality <= 1) continue;\r\n        //     let item = cc.instantiate(this.item);\r\n        //     item.getComponent(PetItem).init(tempList3[i]);\r\n        //     // item.getComponent(PetItem).initToPlay();\r\n        //     // item.scale = 0.75;\r\n        //     if(this.targetInfo == null){\r\n        //         // if(tempList3[i].pet_quality < SpiritMessageManager.getInstance().getQualityLimit(tempList3[i].pet_id)){\r\n        //         //     item.on(cc.Node.EventType.TOUCH_START, this.onTouchPetItem, this);\r\n        //         // }else{\r\n        //         //     item.on(cc.Node.EventType.TOUCH_START, this.onTouchMaxQualityPetItem, this);\r\n        //         // }\r\n        //     }else{\r\n        //         if(tempList3[i].sequence_id == this.chooseItem1.sequence_id){\r\n        //             let gou = new cc.Node();\r\n        //             gou.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Checkmark\");\r\n        //             // gou.scale = 1.2;\r\n        //             item.addChild(gou);\r\n        //         }else{\r\n        //             if (this.chooseItem2 != null) {\r\n        //                 if (tempList3[i].sequence_id == this.chooseItem2.sequence_id) {\r\n        //                     let gou = new cc.Node();\r\n        //                     gou.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Checkmark_1\");\r\n        //                     // gou.scale = 1.2;\r\n        //                     item.addChild(gou);\r\n        //                 }\r\n        //                 else {\r\n        //                     if(this.targetInfo.CostItselfNum == 2 || this.targetInfo.CostSameTypeNum == 2){\r\n        //                         if (this.chooseItem3 != null) {\r\n        //                             if (tempList3[i].sequence_id == this.chooseItem3.sequence_id) {\r\n        //                                 let gou = new cc.Node();\r\n        //                                 gou.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Checkmark_1\");\r\n        //                                 // gou.scale = 1.2;\r\n        //                                 item.addChild(gou);\r\n        //                                 if(this.checkCanAdvance(tempList3[i])){\r\n        //                                     let red = new cc.Node();\r\n        //                                     red.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Common_Icon_RedDot\");\r\n        //                                     item.addChild(red);\r\n        //                                     red.setPosition(cc.v2(item.width/2,item.height/2));\r\n        //                                 }\r\n        //                                 item.setParent(content);\r\n        //                                 continue;\r\n        //                             }else{\r\n        //                                 let bg = new cc.Node();\r\n        //                                 bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_0\");\r\n        //                                 let lock = new cc.Node();\r\n        //                                 lock.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Lock\");\r\n        //                                 bg.addChild(lock);\r\n        //                                 bg.scale = 1.2;\r\n        //                                 item.addChild(bg);\r\n        //                                 item.setParent(content);\r\n        //                                 continue;\r\n        //                             }\r\n        //                         }\r\n        //                         else{\r\n        //                             if(this.targetInfo.CostItselfNum != 0){\r\n        //                                 // 消耗本体\r\n        //                                 if(tempList3[i].pet_id == this.chooseItem1.pet_id){\r\n        //                                    if(tempList3[i].pet_quality == this.targetInfo.CostItselfQuality){\r\n        //                                         let bg = new cc.Node();\r\n        //                                         bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_1\");\r\n        //                                         let arrow = new cc.Node();\r\n        //                                         arrow.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Arrow\");\r\n        //                                         bg.addChild(arrow);\r\n        //                                         // bg.scale = 1.3;\r\n        //                                         item.addChild(bg);\r\n        //                                        item.on(cc.Node.EventType.TOUCH_START, this.onTouchPetItem, this);\r\n        //                                    }\r\n        //                                    else{\r\n        //                                         let bg = new cc.Node();\r\n        //                                         bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_0\");\r\n        //                                         let lock = new cc.Node();\r\n        //                                         lock.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Lock\");\r\n        //                                         bg.addChild(lock);\r\n        //                                         bg.scale = 1.2;\r\n        //                                         item.addChild(bg);\r\n        //                                    }\r\n        //                                 }\r\n        //                                 else{\r\n        //                                     let bg = new cc.Node();\r\n        //                                     bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_0\");\r\n        //                                     let lock = new cc.Node();\r\n        //                                     lock.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Lock\");\r\n        //                                     bg.addChild(lock);\r\n        //                                     bg.scale = 1.2;\r\n        //                                     item.addChild(bg);\r\n        //                                 }\r\n        //                             }else{\r\n        //                                 // 消耗同质量\r\n        //                                 if(tempList3[i].pet_quality == this.targetInfo.CostSameTypeQuality){\r\n        //                                     let bg = new cc.Node();\r\n        //                                     bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_1\");\r\n        //                                     let arrow = new cc.Node();\r\n        //                                     arrow.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Arrow\");\r\n        //                                     bg.addChild(arrow);\r\n        //                                     // bg.scale = 1.3;\r\n        //                                     item.addChild(bg);\r\n        //                                     item.on(cc.Node.EventType.TOUCH_START, this.onTouchPetItem, this);\r\n        //                                 } \r\n        //                                 // else if (this.chooseItem3 != null) {\r\n        //                                 //     if (this.all_list[i].sequence_id == this.chooseItem3.sequence_id) {\r\n        //                                 //         let gou = new cc.Node();\r\n        //                                 //         gou.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Checkmark_1\");\r\n        //                                 //         gou.scale = 1.2;\r\n        //                                 //         item.addChild(gou);\r\n        //                                 //     }\r\n        //                                 // }\r\n        //                                 else{\r\n        //                                     let bg = new cc.Node();\r\n        //                                     bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_0\");\r\n        //                                     let lock = new cc.Node();\r\n        //                                     lock.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Lock\");\r\n        //                                     bg.addChild(lock);\r\n        //                                     bg.scale = 1.2;\r\n        //                                     item.addChild(bg);\r\n        //                                 }\r\n        //                             }\r\n        //                         }\r\n        //                     }\r\n        //                     else{\r\n        //                         let bg = new cc.Node();\r\n        //                         bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_0\");\r\n        //                         let lock = new cc.Node();\r\n        //                         lock.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Lock\");\r\n        //                         bg.addChild(lock);\r\n        //                         bg.scale = 1.2;\r\n        //                         item.addChild(bg);\r\n        //                         item.setParent(content);\r\n        //                         continue;\r\n        //                     }\r\n        //                 }\r\n        //             }\r\n        //             else{\r\n        //                 // 当第二个宠物未选择时\r\n        //                 if(this.targetInfo.CostItselfNum != 0){\r\n        //                     // 消耗本体\r\n        //                     if(tempList3[i].pet_id == this.chooseItem1.pet_id){\r\n        //                        if(tempList3[i].pet_quality == this.targetInfo.CostItselfQuality){\r\n        //                             let bg = new cc.Node();\r\n        //                             bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_1\");\r\n        //                             let arrow = new cc.Node();\r\n        //                             arrow.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Arrow\");\r\n        //                             bg.addChild(arrow);\r\n        //                             // bg.scale = 1.3;\r\n        //                             item.addChild(bg);\r\n        //                             item.on(cc.Node.EventType.TOUCH_START, this.onTouchPetItem, this);\r\n        //                        }\r\n        //                        else{\r\n        //                             let bg = new cc.Node();\r\n        //                             bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_0\");\r\n        //                             let lock = new cc.Node();\r\n        //                             lock.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Lock\");\r\n        //                             bg.addChild(lock);\r\n        //                             bg.scale = 1.2;\r\n        //                             item.addChild(bg);\r\n        //                        }\r\n        //                     }\r\n        //                     else{\r\n        //                         let bg = new cc.Node();\r\n        //                         bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_0\");\r\n        //                         let lock = new cc.Node();\r\n        //                         lock.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Lock\");\r\n        //                         bg.addChild(lock);\r\n        //                         bg.scale = 1.2;\r\n        //                         item.addChild(bg);\r\n        //                     }\r\n        //                 }else{\r\n        //                     // 消耗同质量\r\n        //                     if(tempList3[i].pet_quality == this.targetInfo.CostSameTypeQuality){\r\n        //                         let bg = new cc.Node();\r\n        //                         bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_1\");\r\n        //                         let arrow = new cc.Node();\r\n        //                         arrow.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Arrow\");\r\n        //                         bg.addChild(arrow);\r\n        //                         // bg.scale = 1.3;\r\n        //                         item.addChild(bg);\r\n        //                         item.on(cc.Node.EventType.TOUCH_START, this.onTouchPetItem, this);\r\n        //                     }\r\n        //                     else{\r\n        //                         let bg = new cc.Node();\r\n        //                         bg.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Mask_0\");\r\n        //                         let lock = new cc.Node();\r\n        //                         lock.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Evo_Lock\");\r\n        //                         bg.addChild(lock);\r\n        //                         bg.scale = 1.2;\r\n        //                         item.addChild(bg);\r\n        //                     }\r\n        //                 }\r\n        //             }\r\n        //         }\r\n        //     }\r\n        //     if(this.checkCanAdvance(tempList3[i])){\r\n        //         let red = new cc.Node();\r\n        //         red.addComponent(cc.Sprite).spriteFrame = this.pet_advance_ui.getSpriteFrame(\"Common_Icon_RedDot\");\r\n        //         item.addChild(red);\r\n        //         red.setPosition(cc.v2(item.width/2,item.height/2));\r\n        //     }\r\n        //     item.setParent(content);\r\n        // }\r\n   }\r\n\r\n   sortList(){\r\n        // this.all_list = new Array<PetInfo>();\r\n        // this.all_list = PetManager.getInstance().getDeepPetList();\r\n        // this.pet_id_num = new Map<string,number>();\r\n        // this.pet_quality_num = new Map<number,number>();\r\n        // this.getPetAdvanceData();\r\n        // this.all_list.sort(this.petInfoSort.bind(this));\r\n   }\r\n\r\n    onClickPetBtn(e, num: number) {\r\n        // GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        // num = Number(num);\r\n        // let bottom = this.node.getChildByName(\"bottom\");\r\n        // switch (num) {\r\n        //     case 1:\r\n        //         bottom.getChildByName(\"3\").active = false;\r\n        //         bottom.getChildByName(\"2\").active = false;\r\n        //         this.targetInfo = null;\r\n        //         this.chooseItem1 = null;\r\n        //         this.chooseItem2 = null;\r\n        //         this.chooseItem3 = null;\r\n        //         break;\r\n        //     case 2:\r\n        //         this.chooseItem2 = null;\r\n        //         this.chooseItem3 = null;\r\n        //         break;\r\n        //     case 3:\r\n        //         this.chooseItem3 = null;\r\n        //         break;\r\n\r\n        // }\r\n        // this.refreshUi();\r\n   }\r\n\r\n\r\n   onTouchPetItem(e:cc.Event.EventTouch){\r\n        // GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        // let bottom = this.node.getChildByName(\"bottom\");\r\n        // if(this.targetInfo == null){\r\n        //     // 选中晋级目标\r\n        //     this.chooseItem1 = e.target.getComponent(PetItem).pet_info;\r\n        //     this.targetInfo = SpiritQualityAdvancedManager.getInstance().getJsonSpiritQualityAdvanced(this.chooseItem1.pet_quality);\r\n        //     if(this.targetInfo.CostItselfNum == 2 || this.targetInfo.CostSameTypeNum == 2){\r\n        //         bottom.getChildByName(\"3\").active = true;\r\n        //         bottom.getChildByName(\"2\").active = false;\r\n        //     }\r\n        //     if(this.targetInfo.CostItselfNum == 1 || this.targetInfo.CostSameTypeNum == 1){\r\n        //         bottom.getChildByName(\"3\").active = false;\r\n        //         bottom.getChildByName(\"2\").active = true;\r\n        //     }\r\n        // }else{\r\n        //     // 选中晋级耗材\r\n        //     if(this.chooseItem2 == null){\r\n        //         this.chooseItem2 = e.target.getComponent(PetItem).pet_info;\r\n        //     }else{\r\n        //         if(this.chooseItem3 == null){\r\n        //         this.chooseItem3 = e.target.getComponent(PetItem).pet_info;\r\n        //         }\r\n        //     }\r\n        // }\r\n        // this.refreshUi();\r\n   }\r\n\r\n   onTouchMaxQualityPetItem(){\r\n        GameManager.getInstance().showMessage(LanguageManager.getInstance().getStrByTextId(100049));\r\n   }\r\n\r\n   loadPrefab(petId: string,parent:cc.Node) {\r\n        cc.resources.load(\"pet/ui/pet_\"+petId, cc.Prefab, (error: Error, assets: cc.Prefab) => {\r\n            if (error) {\r\n                cc.log(error);\r\n                return;\r\n            }\r\n            let node = cc.instantiate(assets)\r\n            node.parent = parent;\r\n            let shadow = node.getChildByName(\"Sprite_Up_Shadow\");\r\n            shadow.parent = parent;\r\n            shadow.scale = node.scale;\r\n            node.zIndex = 1;\r\n            node.setPosition(cc.v2(0,0));\r\n            let s = node.getComponent(sp.Skeleton);\r\n            s.setAnimation(0,\"Side_Idle\",true);\r\n        });\r\n    }\r\n\r\n    getPetAdvanceData(){\r\n        // this.all_list.forEach((v,index) =>{\r\n        //     // let num1 = this.pet_id_num.get(v.pet_id+\"_\"+v.pet_quality) || 0;\r\n        //     // num1 = num1 + 1;\r\n        //     // console.log(v.pet_id+\"_\"+v.pet_quality,num1);\r\n        //     // this.pet_id_num[v.pet_id+\"_\"+v.pet_quality] = num1;\r\n        //     // console.log(v.pet_id+\"_\"+v.pet_quality,this.pet_id_num[v.pet_id+\"_\"+v.pet_quality]);\r\n        //     // let num2 = this.pet_quality_num[v.pet_quality] || 0;\r\n        //     // num2 = num2 + 1;\r\n        //     // this.pet_quality_num[v.pet_quality] = num2;\r\n        //     if(this.pet_id_num.has(v.pet_id+\"_\"+v.pet_quality)){\r\n        //         this.pet_id_num.set(v.pet_id+\"_\"+v.pet_quality,this.pet_id_num.get(v.pet_id+\"_\"+v.pet_quality) + 1);\r\n        //     }\r\n        //     else{\r\n        //         this.pet_id_num.set(v.pet_id+\"_\"+v.pet_quality,1);\r\n        //     }\r\n        //     if(this.pet_quality_num.has(v.pet_quality)){\r\n        //         this.pet_quality_num.set(v.pet_quality,this.pet_quality_num.get(v.pet_quality) + 1)                \r\n        //     }\r\n        //     else{\r\n        //         this.pet_quality_num.set(v.pet_quality,1)    \r\n        //     }\r\n        // })\r\n    }\r\n\r\n    checkCanAdvance(info:PetInfo):boolean{\r\n        // GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        // if(info.pet_quality<=1) return false;\r\n        // // if(info.pet_quality == SpiritMessageManager.getInstance().getQualityLimit(info.pet_id)) return false;\r\n        // let data = SpiritQualityAdvancedManager.getInstance().getJsonSpiritQualityAdvanced(info.pet_quality);\r\n        // if(data.CostItselfNum != 0){\r\n        //     // if((this.pet_id_num[info.pet_id + \"_\" + data.CostItselfQuality] || 0) >= (data.CostItselfNum + 1)){\r\n        //     //     return true;\r\n        //     // }\r\n        //     if(this.pet_id_num.has(info.pet_id + \"_\" + data.CostItselfQuality)){\r\n        //         if(this.pet_id_num.get(info.pet_id + \"_\" + data.CostItselfQuality) >= (info.pet_quality == data.CostItselfQuality ? data.CostItselfNum+1 : data.CostItselfNum)){\r\n        //             return true;\r\n        //         }\r\n        //     }\r\n        //     return false;\r\n        // }\r\n        // else{\r\n        //     // if(this.pet_quality_num[data.CostSameTypeQuality] >= (data.CostSameTypeNum + 1)){\r\n        //     //     return true;\r\n        //     // }\r\n        //     if(this.pet_quality_num.has(data.CostSameTypeQuality)){\r\n        //         if(this.pet_quality_num.get(data.CostSameTypeQuality) >= (info.pet_quality == data.CostSameTypeQuality ? data.CostSameTypeNum + 1:data.CostSameTypeNum)){\r\n        //             return true;\r\n        //         }\r\n        //     }\r\n        // }\r\n            return false;\r\n    }\r\n    // 自定义排序\r\n    petInfoSort(a:PetInfo,b:PetInfo):number{\r\n        let cb = this.checkCanAdvance(b);\r\n        if(cb){\r\n            let ca = this.checkCanAdvance(a)\r\n            if(ca){\r\n                return b.pet_level - a.pet_level;\r\n            }\r\n            return 1;\r\n        }else{\r\n            return b.pet_level - a.pet_level;\r\n        }\r\n    }\r\n\r\n    selectPetList(list:PetInfo[],target:boolean):PetInfo[]{\r\n        let tempList: PetInfo[] = [];\r\n        for(let i = 0;i < list.length;i++){\r\n            if(this.checkCanAdvance(list[i]) == target){\r\n                tempList.push(list[i]);\r\n            }\r\n        }\r\n        return tempList;\r\n    }\r\n\r\n    onClickAdvanceBtn(){\r\n        // GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        // if(this.targetInfo != null){\r\n        //     if(this.targetInfo.CostItselfNum == 2 || this.targetInfo.CostSameTypeNum == 2){\r\n        //         if(this.chooseItem2 != null && this.chooseItem3 != null){\r\n        //             let bottom = this.node.getChildByName(\"bottom\");\r\n        //             let oldPetInfo = cc.instantiate(this.chooseItem1);\r\n        //             PetManager.getInstance().removePet(this.chooseItem2);\r\n        //             PetManager.getInstance().removePet(this.chooseItem3);\r\n        //             PetManager.getInstance().setPetQuality(this.chooseItem1,this.targetInfo.TargetQuality);\r\n        //             PetManager.getInstance().saveAllPetList();\r\n        //             PetManager.getInstance().loadAllPetData();\r\n        //             bottom.getChildByName(\"3\").active = false;\r\n        //             bottom.getChildByName(\"2\").active = false;\r\n        //             UIManager.getInstance().showPetAdvanceShowUi(null,this.chooseItem1,oldPetInfo);\r\n\r\n        //             // switch(SpiritMessageManager.getInstance().getSpiritRarity(this.chooseItem2.pet_id)){\r\n        //             //     case 2:\r\n        //             //         FollowManager.getInstance().followEvent(Follow_Type.记录进阶消耗的史诗稀有度宠物);\r\n        //             //         break;\r\n        //             //     case 3:\r\n        //             //         FollowManager.getInstance().followEvent(Follow_Type.记录进阶消耗的神话稀有度宠物);\r\n        //             //         break;\r\n        //             //     case 4:\r\n        //             //         FollowManager.getInstance().followEvent(Follow_Type.记录进阶消耗的SP稀有度宠物);\r\n        //             //         break;\r\n        //             // }\r\n\r\n        //             // switch(SpiritMessageManager.getInstance().getSpiritRarity(this.chooseItem3.pet_id)){\r\n        //             //     case 2:\r\n        //             //         FollowManager.getInstance().followEvent(Follow_Type.记录进阶消耗的史诗稀有度宠物);\r\n        //             //         break;\r\n        //             //     case 3:\r\n        //             //         FollowManager.getInstance().followEvent(Follow_Type.记录进阶消耗的神话稀有度宠物);\r\n        //             //         break;\r\n        //             //     case 4:\r\n        //             //         FollowManager.getInstance().followEvent(Follow_Type.记录进阶消耗的SP稀有度宠物);\r\n        //             //         break;\r\n        //             // }\r\n\r\n        //             FollowManager.getInstance().followEvent(Follow_Type.记录不同品质的成功进阶次数完成时品质 + this.chooseItem1.pet_quality);\r\n        //             this.targetInfo = null;\r\n        //             this.chooseItem1 = null;\r\n        //             this.chooseItem2 = null;\r\n        //             this.chooseItem3 = null;\r\n        //             // this.sortList();\r\n        //             this.refreshUi();\r\n        //             // GameManager.getInstance().showMessage(\"进阶成功！\");\r\n        //             GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_Hecheng);\r\n        //             FollowManager.getInstance().followEvent(Follow_Type.记录宠物进阶成功);\r\n        //             return;\r\n        //         }\r\n        //     }\r\n        //     if(this.targetInfo.CostItselfNum == 1 || this.targetInfo.CostSameTypeNum == 1){\r\n        //         if(this.chooseItem2 != null){\r\n        //             let bottom = this.node.getChildByName(\"bottom\");\r\n        //             let oldPetInfo = cc.instantiate(this.chooseItem1);\r\n        //             PetManager.getInstance().removePet(this.chooseItem2);\r\n        //             PetManager.getInstance().setPetQuality(this.chooseItem1,this.targetInfo.TargetQuality);\r\n        //             PetManager.getInstance().saveAllPetList();\r\n        //             PetManager.getInstance().loadAllPetData();\r\n        //             bottom.getChildByName(\"3\").active = false;\r\n        //             bottom.getChildByName(\"2\").active = false;\r\n        //             UIManager.getInstance().showPetAdvanceShowUi(null,this.chooseItem1,oldPetInfo);\r\n\r\n        //             // switch(SpiritMessageManager.getInstance().getSpiritRarity(this.chooseItem2.pet_id)){\r\n        //             //     case 2:\r\n        //             //         FollowManager.getInstance().followEvent(Follow_Type.记录进阶消耗的史诗稀有度宠物);\r\n        //             //         break;\r\n        //             //     case 3:\r\n        //             //         FollowManager.getInstance().followEvent(Follow_Type.记录进阶消耗的神话稀有度宠物);\r\n        //             //         break;\r\n        //             //     case 4:\r\n        //             //         FollowManager.getInstance().followEvent(Follow_Type.记录进阶消耗的SP稀有度宠物);\r\n        //             //         break;\r\n        //             // }\r\n\r\n        //             FollowManager.getInstance().followEvent(Follow_Type.记录不同品质的成功进阶次数完成时品质 + this.chooseItem1.pet_quality);\r\n        //             this.targetInfo = null;\r\n        //             this.chooseItem1 = null;\r\n        //             this.chooseItem2 = null;\r\n        //             this.chooseItem3 = null;\r\n        //             // this.sortList();\r\n        //             this.refreshUi();\r\n        //             // GameManager.getInstance().showMessage(\"进阶成功！\");\r\n        //             GameManager.getInstance().sound_manager.playSound(SoundIndex.YX_Hecheng);\r\n        //             FollowManager.getInstance().followEvent(Follow_Type.记录宠物进阶成功);\r\n        //         }\r\n        //     }\r\n        //     // if(this.targetInfo.CostItselfNum != 0){\r\n        //     //     if(this.targetInfo.CostSameTypeNum == 2){\r\n        //     //         if(this.chooseItem2!= null && this.chooseItem3 != null){\r\n\r\n        //     //         }\r\n        //     //     }else{\r\n        //     //         if(this.chooseItem2 != null){\r\n\r\n        //     //         }\r\n        //     //     }\r\n        //     // }\r\n        //     // else{\r\n        //     //     if(this.targetInfo.CostSameTypeNum == 2){\r\n        //     //         if(this.chooseItem2!= null && this.chooseItem3 != null){\r\n\r\n        //     //         }\r\n        //     //     }\r\n        //     // }\r\n        // }\r\n    }\r\n\r\n    clickBtnClose()\r\n    {\r\n        GameManager.getInstance().sound_manager.playSound(SoundIndex.click);\r\n        this.destroySelf();\r\n    }\r\n\r\n    destroySelf()\r\n    {\r\n        super.onClose();\r\n        ApkManager.getInstance().closeBanner();\r\n        // EventManager.postRedEvent(RedEventString.RED_CHECK,RedEventType.Btn_Main_SignIn);\r\n    }\r\n\r\n}\r\n"]}